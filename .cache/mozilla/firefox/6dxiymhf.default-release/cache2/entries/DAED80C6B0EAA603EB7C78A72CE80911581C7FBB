!function(e){function t(t){for(var i,r,a=t[0],c=t[1],u=t[2],d=0,h=[];a.length>d;d++)Object.prototype.hasOwnProperty.call(o,r=a[d])&&o[r]&&h.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(l&&l(t);h.length;)h.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;s.length>t;t++){for(var n=s[t],r=!0,a=1;n.length>a;a++){0!==o[n[a]]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var r={},o={18:0},s=[];i.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(t,i){n=o[e]=[t,i]});t.push(n[2]=r);var s,a=document.createElement("script");a.charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.src=function(e){return i.p+""+({1:"vendors~draggable~touch-punch",21:"touch-punch",22:"vendors~fxa-common-password-list",23:"vendors~fxaClient",24:"vendors~fxaCryptoDeriver",25:"vendors~fxaPairingChannel"}[e]||e)+".bundle.js"}(e),0!==a.src.indexOf(window.location.origin+"/")&&(a.crossOrigin="anonymous");var c=Error();s=function(t){a.onerror=a.onload=null,clearTimeout(u);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",c.name="ChunkLoadError",c.type=i,c.request=r,n[1](c)}o[e]=void 0}};var u=setTimeout(function(){s({type:"timeout",target:a})},12e4);a.onerror=a.onload=s,document.head.appendChild(a)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/bundle-fdac8446fb59e4d985ed1693009cebe0541f978d/",i.oe=function(e){throw e};var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;a.length>u;u++)t(a[u]);var l=c;s.push([364,19]),n()}([,function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(72),s=new(n(32).a),a=function(e){return e},c=a("Unexpected error"),u=a("The link you clicked to verify your email is expired."),l=a("You've tried too many times. Try again later."),d=a("You've tried too many times. Try again %(retryAfterLocalized)s."),h={UNEXPECTED_ERROR:{errno:999,message:c},INVALID_TOKEN:{errno:110,message:a("Invalid token")},INVALID_TIMESTAMP:{errno:111,message:a("Invalid timestamp in request signature")},INVALID_NONCE:{errno:115,message:a("Invalid nonce in request signature")},ACCOUNT_ALREADY_EXISTS:{errno:101,message:a("Account already exists")},UNKNOWN_ACCOUNT:{errno:102,message:a("Unknown account")},INCORRECT_EMAIL_CASE:{errno:120,message:a("Incorrect email case")},INCORRECT_PASSWORD:{errno:103,message:a("Incorrect password")},UNVERIFIED_ACCOUNT:{errno:104,message:a("Unverified account")},INVALID_VERIFICATION_CODE:{errno:105,message:a("Invalid verification code")},INVALID_JSON:{errno:106,message:a("Invalid JSON in request body")},INVALID_PARAMETER:{errno:107,message:a("Invalid parameter: %(param)s")},MISSING_PARAMETER:{errno:108,message:a("Missing parameter: %(param)s")},INVALID_REQUEST_SIGNATURE:{errno:109,message:a("Invalid request signature")},MISSING_CONTENT_LENGTH_HEADER:{errno:112,message:a("Missing content-length header")},REQUEST_TOO_LARGE:{errno:113,message:a("Request body too large")},THROTTLED:{errno:114,message:l},REQUEST_BLOCKED:{errno:125,message:a("The request was blocked for security reasons")},ACCOUNT_RESET:{errno:126,message:a("Your account has been locked for security reasons")},INCORRECT_UNBLOCK_CODE:{errno:127,message:a("Invalid authorization code")},INVALID_PHONE_NUMBER:{errno:129,message:a("Invalid phone number")},INVALID_PHONE_REGION:{errno:130,message:a("Cannot send to this country")},SMS_ID_INVALID:{errno:131,message:"SMS ID invalid"},SMS_REJECTED:{errno:132,message:a("Could not send a message to this number")},EMAIL_SENT_COMPLAINT:{errno:133,message:a("Your email was just returned")},EMAIL_HARD_BOUNCE:{errno:134,message:a("Your email was just returned. Mistyped email?")},EMAIL_SOFT_BOUNCE:{errno:135,message:a("Unable to deliver email")},EMAIL_EXISTS:{errno:136,message:a("This email was already verified by another user")},EMAIL_PRIMARY_EXISTS:{errno:139,message:a("Secondary email must be different than your account email")},EMAIL_VERIFIED_PRIMARY_EXISTS:{errno:140,message:a("Account already exists")},UNVERIFIED_PRIMARY_EMAIL_NEWLY_CREATED:{errno:141,message:a("Account already exists")},LOGIN_WITH_SECONDARY_EMAIL:{errno:142,message:a("Primary account email required for sign-in")},VERIFIED_SECONDARY_EMAIL_EXISTS:{errno:144,message:a("Address in use by another account")},RESET_PASSWORD_WITH_SECONDARY_EMAIL:{errno:145,message:a("Primary account email required for reset")},INVALID_SIGNIN_CODE:{errno:146,message:a("Invalid signin code")},CHANGE_EMAIL_TO_UNVERIFIED_EMAIL:{errno:147,message:a("Can not change primary email to an unverified email")},CHANGE_EMAIL_TO_UNOWNED_EMAIL:{errno:148,message:a("Can not change primary email to an email that does not belong to this account")},LOGIN_WITH_INVALID_EMAIL:{errno:149,message:a("This email can not currently be used to login")},RESEND_EMAIL_CODE_TO_UNOWNED_EMAIL:{errno:150,message:a("Can not change primary email to an email that does not belong to this account")},FAILED_TO_SEND_EMAIL:{errno:151,message:a("Failed to send email")},INVALID_OTP_CODE:{errno:152,message:a("Valid code required")},EXPIRED_TOKEN_VERIFICATION_CODE:{errno:153,message:a("This verification code has expired")},TOTP_TOKEN_EXISTS:{errno:154,message:a("A TOTP token already exists for this account")},TOTP_TOKEN_NOT_FOUND:{errno:155,message:a("TOTP token not found")},RECOVERY_CODE_NOT_FOUND:{errno:156,message:a("Recovery code not found")},DEVICE_COMMAND_UNAVAILABLE:{errno:157,message:a("Unavailable device command")},RECOVERY_KEY_NOT_FOUND:{errno:158,message:a("Recovery key not found")},INVALID_RECOVERY_KEY:{errno:159,message:a("Invalid recovery key")},TOTP_REQUIRED:{errno:160,message:a("This request requires two step authentication enabled on your account.")},REDIS_CONFLICT:{errno:165,message:a("Failed due to a conflicting request, please try again.")},UNKNOWN_SUBSCRIPTION_CUSTOMER:{errno:176,message:a("Unknown customer for subscription.")},UNKNOWN_SUBSCRIPTION:{errno:177,message:a("Unknown subscription.")},UNKNOWN_SUBSCRIPTION_PLAN:{errno:178,message:a("Unknown plan for subscription.")},REJECTED_SUBSCRIPTION_PAYMENT_TOKEN:{errno:179,message:a("Invalid payment token for subscription.")},SUBSCRIPTION_ALREADY_CANCELLED:{errno:180,message:a("Subscription has already been cancelled")},REJECTED_CUSTOMER_UPDATE:{errno:181,message:a("Update was rejected, please try again")},INVALID_EXPIRED_SIGNUP_CODE:{errno:183,message:a("Invalid or expired verification code")},SERVER_BUSY:{errno:201,message:a("Server busy, try again soon")},FEATURE_NOT_ENABLED:{errno:202,message:a("Feature not enabled")},BACKEND_SERVICE_FAILURE:{errno:203,message:a("System unavailable, try again soon")},DISABLED_CLIENT_ID:{errno:204,message:a("System unavailable, try again soon")},ENDPOINT_NOT_SUPPORTED:{errno:116,message:a("This endpoint is no longer supported")},SERVICE_UNAVAILABLE:{errno:998,message:a("System unavailable, try again soon")},USER_CANCELED_LOGIN:{errno:1001,message:a("Login attempt cancelled")},SESSION_EXPIRED:{errno:1002,message:a("Session expired. Sign in to continue.")},COOKIES_STILL_DISABLED:{errno:1003,message:a("Cookies are still disabled")},PASSWORDS_DO_NOT_MATCH:{errno:1004,message:a("Passwords do not match")},WORKING:{errno:1005,message:a("Workingâ€¦")},COULD_NOT_GET_PP:{errno:1006,message:a("Could not get Privacy Notice")},COULD_NOT_GET_TOS:{errno:1007,message:a("Could not get Terms of Service")},PASSWORDS_MUST_BE_DIFFERENT:{errno:1008,message:a("Your new password must be different")},PASSWORD_TOO_SHORT:{errno:1009,message:a("Must be at least 8 characters")},PASSWORD_REQUIRED:{errno:1010,message:a("Valid password required")},EMAIL_REQUIRED:{errno:1011,message:a("Valid email required")},UNUSABLE_IMAGE:{errno:1013,message:a("A usable image was not found")},NO_CAMERA:{errno:1014,message:a("Could not initialize camera")},URL_REQUIRED:{errno:1015,message:a("Valid URL required")},DESKTOP_CHANNEL_TIMEOUT:{errno:1017,message:c},SIGNUP_EMAIL_BOUNCE:{errno:1018,message:a("Your verification email was just returned. Mistyped email?")},DIFFERENT_EMAIL_REQUIRED:{errno:1019,message:a("Valid email required")},DIFFERENT_EMAIL_REQUIRED_FIREFOX_DOMAIN:{errno:1020,message:a("Enter a valid email address. firefox.com does not offer email.")},CHANNEL_TIMEOUT:{errno:1021,message:c},ILLEGAL_IFRAME_PARENT:{errno:1022,message:a("Firefox Accounts can only be placed into an IFRAME on approved sites")},INVALID_EMAIL:{errno:1023,message:a("Valid email required")},EXPIRED_VERIFICATION_LINK:{errno:1025,message:u},DAMAGED_VERIFICATION_LINK:{errno:1026,message:a("Verification link damaged")},UNEXPECTED_POSTMESSAGE_ORIGIN:{errno:1027,message:c},INVALID_IMAGE_SIZE:{errno:1028,message:a("The image dimensions must be at least 100x100px")},IOS_SIGNUP_DISABLED:{errno:1029,message:a("Signup is coming soon to Firefox for iOS")},AGE_REQUIRED:{errno:1031,message:a("You must enter your age to sign up")},INVALID_AGE:{errno:1032,message:a("You must enter a valid age to sign up")},INVALID_CAMERA_DIMENSIONS:{errno:1033,message:c},DELETED_ACCOUNT:{errno:1034,message:a("Account no longer exists.")},INVALID_RESUME_TOKEN_PROPERTY:{errno:1035,message:a("Invalid property in resume token: %(property)s")},MISSING_RESUME_TOKEN_PROPERTY:{errno:1036,message:a("Missing property in resume token: %(property)s")},INVALID_DATA_ATTRIBUTE:{errno:1037,message:a("Invalid data attribute: %(property)s")},MISSING_DATA_ATTRIBUTE:{errno:1038,message:a("Missing data attribute: %(property)s")},POLLING_FAILED:{errno:1039,message:a("Server busy, try again soon")},UNKNOWN_ACCOUNT_VERIFICATION:{errno:1040,message:u},REUSED_SIGNIN_VERIFICATION_CODE:{errno:1041,message:a("That confirmation link was already used, and can only be used once.")},INPUT_REQUIRED:{errno:1042,message:a("This is a required field")},UNBLOCK_CODE_REQUIRED:{errno:1043,message:a("Authorization code required")},INVALID_UNBLOCK_CODE:{errno:1044,message:a("Invalid authorization code")},DAMAGED_REJECT_UNBLOCK_LINK:{errno:1045,message:a("Link damaged")},UNSAFE_INTERPOLATION_VARIABLE_NAME:{errno:1046,message:"String variable name does not have escape prefix: %(string)s"},HTML_WILL_BE_ESCAPED:{errno:1047,message:"HTML will be escaped: %(string)s"},CANNOT_CHANGE_INPUT_TYPE:{errno:1048,message:"Cannot change input type: %(type)s"},PHONE_NUMBER_REQUIRED:{errno:1049,message:a("Phone number required")},ACCOUNT_HAS_NO_UID:{errno:1050,message:"Account has no uid"},INVALID_WEB_CHANNEL:{errno:1051,message:"Browser not configured to accept WebChannel messages from this domain"},REUSED_PRIMARY_EMAIL_VERIFICATION_CODE:{errno:1052,message:a("That confirmation link was already used, and can only be used once.")},TOTP_CODE_REQUIRED:{errno:1053,message:a("Two-step authentication code required")},INVALID_TOTP_CODE:{errno:1054,message:a("Invalid two-step authentication code")},RECOVERY_CODE_REQUIRED:{errno:1055,message:a("Recovery code required")},INVALID_RECOVERY_CODE:{errno:1056,message:a("Invalid recovery code")},PASSWORD_SAME_AS_EMAIL:{errno:1057,message:"Password must not be your email address"},PASSWORD_TOO_COMMON:{errno:1058,message:"Password is too common"},RECOVERY_KEY_REQUIRED:{errno:1059,message:a("Recovery key required")},OTP_CODE_REQUIRED:{errno:1060,message:a("Please enter verification code")},INVALID_REDIRECT_TO:{errno:1062,message:a("Invalid redirect")},INVALID_EMAIL_DOMAIN:{errno:1064,message:a("Mistyped email? %(domain)s does not offer email.")}};t.a=r.a.extend({},o.a,{ERRORS:h,NAMESPACE:"auth",toInterpolationContext:function(e){try{if(this.is(e,"INVALID_PARAMETER"))return{param:e.param||e.validation.keys};if(this.is(e,"MISSING_PARAMETER"))return{param:e.param};if(this.is(e,"INVALID_RESUME_TOKEN_PROPERTY"))return{property:e.property};if(this.is(e,"MISSING_RESUME_TOKEN_PROPERTY"))return{property:e.property};if(this.is(e,"INVALID_DATA_ATTRIBUTE"))return{property:e.property};if(this.is(e,"MISSING_DATA_ATTRIBUTE"))return{property:e.property};if(this.is(e,"UNSAFE_INTERPOLATION_VARIABLE_NAME"))return{string:e.string};if(this.is(e,"HTML_WILL_BE_ESCAPED"))return{string:e.string};if(this.is(e,"CANNOT_CHANGE_INPUT_TYPE"))return{type:e.type};if(this.is(e,"THROTTLED"))return e.retryAfterLocalized&&(e.message=d),{retryAfterLocalized:e.retryAfterLocalized};if(this.is(e,"INVALID_EMAIL_DOMAIN"))return{domain:e.domain}}catch(e){s.error("Error in errors.js->toInterpolationContext: %s",e+"")}return{}}})},function(e,t,n){var i=n(343);e.exports={URL_MAX_LENGTH:2048,SESSION_TOKEN_USED_FOR_SYNC:"fx_desktop_v1",CONTENT_SERVER_CONTEXT:"web",FX_SYNC_CONTEXT:"fx_sync",FX_DESKTOP_V1_CONTEXT:"fx_desktop_v1",FX_DESKTOP_V2_CONTEXT:"fx_desktop_v2",FX_DESKTOP_V3_CONTEXT:"fx_desktop_v3",FX_FENNEC_V1_CONTEXT:"fx_fennec_v1",FX_IOS_V1_CONTEXT:"fx_ios_v1",OAUTH_CONTEXT:"oauth",OAUTH_WEBCHANNEL_CONTEXT:"oauth_webchannel_v1",OAUTH_CHROME_ANDROID_CONTEXT:"oauth_chrome_android",CONTENT_SERVER_SERVICE:"content-server",SYNC_SERVICE:"sync",SYNC11_MIGRATION:"sync11",AMO_MIGRATION:"amo",VERIFICATION_POLL_IN_MS:4e3,EMAIL_RESEND_MAX_TRIES:4,CODE_LENGTH:32,UID_LENGTH:32,OAUTH_CODE_LENGTH:64,OAUTH_ACTION_SIGNIN:"signin",OAUTH_ACTION_SIGNUP:"signup",OAUTH_TRUSTED_PROFILE_SCOPE:"profile",OAUTH_TRUSTED_PROFILE_SCOPE_EXPANSION:["profile:uid","profile:email","profile:display_name","profile:avatar"],OAUTH_UNTRUSTED_ALLOWED_PERMISSIONS:["openid","profile:display_name","profile:email","profile:uid"],OAUTH_WEBCHANNEL_REDIRECT:"urn:ietf:wg:oauth:2.0:oob:oauth-redirect-webchannel",RELIER_KEYS_LENGTH:32,RELIER_KEYS_CONTEXT_INFO_PREFIX:"identity.mozilla.com/picl/v1/oauth/",PASSWORD_MIN_LENGTH:8,PROFILE_IMAGE_DISPLAY_SIZE:240,PROFILE_IMAGE_EXPORT_SIZE:600,PROFILE_IMAGE_JPEG_QUALITY:.8,PROFILE_IMAGE_MIN_HEIGHT:100,PROFILE_IMAGE_MIN_WIDTH:100,DEFAULT_PROFILE_IMAGE_MIME_TYPE:"image/jpeg",ONERROR_MESSAGE_LIMIT:100,ACCOUNT_UPDATES_WEBCHANNEL_ID:"account_updates",MARKETING_EMAIL_NEWSLETTER_ID:"firefox-accounts-journey",ACCESS_TYPE_ONLINE:"online",ACCESS_TYPE_OFFLINE:"offline",CLIENT_TYPE_DEVICE:"device",CLIENT_TYPE_OAUTH_APP:"oAuthApp",CLIENT_TYPE_WEB_SESSION:"webSession",DEFAULT_XHR_TIMEOUT_MS:2500,DEFAULT_BUNDLE_PATH:"/bundle/",IOS_V1_LOGIN_MESSAGE_DELAY_MS:5e3,BLOCKED_SIGNIN_SUPPORT_URL:"https://support.mozilla.org/kb/accounts-blocked",UNBLOCK_CODE_LENGTH:8,RECOVERY_CODE_LENGTH:8,TOKEN_CODE_LENGTH:6,MARKETING_ID_SPRING_2015:"spring-2015-android-ios-sync",MARKETING_ID_AUTUMN_2016:"autumn-2016-connect-another-device",DOWNLOAD_LINK_TEMPLATE_ANDROID:"https://app.adjust.com/2uo1qc?campaign=%(campaign)s&creative=%(creative)s&adgroup=android",DOWNLOAD_LINK_TEMPLATE_IOS:"https://app.adjust.com/2uo1qc?campaign=%(campaign)s&creative=%(creative)s&adgroup=ios&fallback=https://itunes.apple.com/app/apple-store/id989804926?pt=373246&ct=adjust_tracker&mt=8",DOWNLOAD_LINK_PAIRING_APP:"https://play.google.com/store/apps/details?id=org.mozilla.fenix",MOZ_ORG_SYNC_GET_STARTED_LINK:"https://www.mozilla.org/firefox/sync?utm_source=fx-website&utm_medium=fx-accounts&utm_campaign=fx-signup&utm_content=fx-sync-get-started",POPULAR_EMAIL_DOMAINS:i.reduce(function(e,t){return e[t]=!0,e},{}),OTHER_EMAIL_DOMAIN:"other",UTM_SOURCE_EMAIL:"email",RECOVERY_KEY_LENGTH:32,DEVICE_PAIRING_AUTHORITY_CONTEXT:"device_pairing_authority",DEVICE_PAIRING_AUTHORITY_REDIRECT_URI:"urn:ietf:wg:oauth:2.0:oob:pair-auth-webchannel",DEVICE_PAIRING_SCOPES:["profile","https://identity.mozilla.com/apps/oldsync"],DEVICE_PAIRING_SUPPLICANT_CONTEXT:"device_pairing_supplicant",DEVICE_PAIRING_WEBCHANNEL_SUPPLICANT_CONTEXT:"device_pairing_webchannel_supplicant",TWO_STEP_AUTHENTICATION_ACR:"AAL2",STYLE_TRAILHEAD:"trailhead",CC_EXPIRED:"expired_card",SIGNUP_CODE_LENGTH:6}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),s=n.n(o),a=n(146),c=n(103),u=/^(?:[a-fA-F0-9]{2})+$/,l=/^[A-Za-z0-9-_]+$/,d=/^[0-9A-HJ-NP-TV-Z]+$/,h=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/,f=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,p=RegExp("^[a-z0-9]{".concat(s.a.UNBLOCK_CODE_LENGTH,"}$"),"i"),m=/^[\w.!#$%&'*+\/=?^`{|}~-]{1,64}@[a-z\d](?:[a-z\d-]{0,253}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,253}[a-z\d])?)+$/i,g=/^[0-9]{6}$/,v=/^([a-zA-Z0-9]{8,10})$/,_={isEmailValid:function(e){return"string"==typeof e&&256>=e.length&&m.test(e)},isCodeValid:function(e){return"string"==typeof e&&(e.length===s.a.CODE_LENGTH&&u.test(e))},isOAuthCodeValid:function(e){return"string"==typeof e&&(e.length===s.a.OAUTH_CODE_LENGTH&&u.test(e))},isTokenValid:function(e){return"string"==typeof e&&u.test(e)},isUidValid:function(e){return"string"==typeof e&&(e.length===s.a.UID_LENGTH&&u.test(e))},isPasswordValid:function(e){return"string"==typeof e&&e.length>=s.a.PASSWORD_MIN_LENGTH},isPromptValid:function(e){return r.a.contains([c.a.CONSENT,c.a.NONE],e)},isUrlValid:function(e){return h.test(e)},isUuidValid:function(e){return f.test(e)},isAccessTypeValid:function(e){return r.a.contains([s.a.ACCESS_TYPE_OFFLINE,s.a.ACCESS_TYPE_ONLINE],e)},isHexValid:function(e){return u.test(e)},isBase32Valid:function(e){return d.test(e)},isUnblockCodeValid:function(e){return p.test(e)},isTotpCodeValid:function(e){return g.test(e)},isRecoveryCodeValid:function(e){return v.test(e)},isBase64Url:function(e){return l.test(e)},isNewslettersArrayValid:function(e){if(!Array.isArray(e))return!1;var t=r.a.values(a.a).map(function(e){return e.slug});return e.reduce(function(e,n){return e&&t.indexOf(n)>-1},!0)}},y=n(12),w=n.n(y);w.a.register("accessType",w.a.string().test(_.isAccessTypeValid)),w.a.register("action",w.a.string().valid("signin","signup","email","force_auth","pairing")),w.a.register("base32",w.a.string().test(_.isBase32Valid)),w.a.register("channelId",w.a.string().test(_.isBase64Url)),w.a.register("channelKey",w.a.string().test(_.isBase64Url)),w.a.register("codeChallenge",w.a.string().min(43).max(128)),w.a.register("codeChallengeMethod",w.a.string().valid("S256")),w.a.register("email",w.a.string().test(_.isEmailValid)),w.a.register("hex",w.a.string().test(_.isHexValid)),w.a.register("keyFetchToken",w.a.string()),w.a.register("keysJwk",w.a.string().test(_.isBase64Url)),w.a.register("newslettersArray",w.a.any().test(_.isNewslettersArrayValid)),w.a.register("oauthCode",w.a.string().test(_.isOAuthCodeValid)),w.a.register("password",w.a.string().test(_.isPasswordValid)),w.a.register("prompt",w.a.string().test(_.isPromptValid)),w.a.register("recoveryCode",w.a.string().test(_.isRecoveryCodeValid)),w.a.register("sessionToken",w.a.string()),w.a.register("token",w.a.string().test(_.isTokenValid)),w.a.register("totpCode",w.a.string().test(_.isTotpCodeValid)),w.a.register("uid",w.a.string().test(_.isUidValid)),w.a.register("unblockCode",w.a.string().test(_.isUnblockCodeValid)),w.a.register("unwrapBKey",w.a.string()),w.a.register("url",w.a.string().test(_.isUrlValid)),w.a.register("uuid",w.a.string().test(_.isUuidValid)),w.a.register("verificationCode",w.a.string().test(_.isCodeValid)),w.a.register("verificationRedirect",w.a.string().test(_.isVerificationRedirectValid)),w.a.register("clientId",w.a.hex()),w.a.any().extend({empty:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return this.transform(function(e){return t.indexOf(e)>-1?void 0:e})}});t.a=w.a},function(e,t,n){"use strict";function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);e.length>t;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=n(212),o=n.n(r),s=n(0),a=n.n(s);t.a={isMixedIn:function(e,t){return a.a.every(Object.keys(t),function(t){return t in e})},mixin:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];o.a.mixin.apply(o.a,[e].concat(i(function e(t){return a.a.uniq(t.reduce(function(t,n){return n.dependsOn&&t.push.apply(t,i(e(n.dependsOn))),t.push(n),t},[]))}(n))))}}},,,function(e,t,n){"use strict";function i(e){return function(){if(this.updateFormValueChanges())return this.invokeHandler(e,arguments)}}n.r(t);n(233);var r=n(0),o=n.n(r),s=n(81),a=n(1),c=n(11),u=n(94),l=n(50),d=n.n(l),h=n(178),f=n(93),p=n(10),m=n(54),g=n(82),v=c.default.prototype,_=c.default.extend({LONGER_THAN_EXPECTED:new d.a("10s").milliseconds(),constructor:function(e){c.default.call(this,e),this._attachEvents()},events:{"change form":i(Object(u.default)("onFormChange")),"input form":i(Object(u.default)("onFormChange")),"keyup form":i(Object(u.default)("onFormChange")),"submit form":Object(p.default)("onFormSubmit")},_notifiedOfEngaged:!1,onFormChange:function(){this.isSubmitting()||this.isHalted()||(this.hideError(),this.hideSuccess(),this._notifiedOfEngaged||(this._notifiedOfEngaged=!0,this.notifier.trigger("form.engaged")))},afterRender:function(){return this._attachEvents(),this.updateFormValueChanges(),v.afterRender.call(this)},getFormValues:function(){var e=this,t={};return this.getFormElements().each(function(n,i){var r=e.$(i),o=r.attr("name")||r.attr("id")||n;t[o]=e.getElementValue(r)}),t},getFormElements:function(){var e=this;return this.$("input,textarea,select").filter(function(t,n){var i=e.$(n);return o.a.isUndefined(i.attr("data-novalue"))})},isFormEnabled:function(){var e=this.$("button[type=submit]");return!e.hasClass("disabled")&&!e.attr("disabled")},onFormSubmit:function(){return this.validateAndSubmit().catch(function(){})},validateAndSubmit:Object(s.default)(function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Date.now(),r=n.artificialDelay||0;return e&&e.stopImmediatePropagation(),this.trigger("submitStart"),Promise.resolve().then(function(){if(!t.isHalted()){if(!t.isValid())throw t.showValidationErrors();if(t.isFormEnabled())return t.logViewEvent("submit"),t._submitForm().then(function(){var e=Date.now()-i;return f.a.delay(Math.max(r-e,0))}).then(function(){return t.afterSubmit()})}}).finally(function(){t.trigger("submitEnd")})}),_submitForm:Object(h.default)(Object(m.default)(function(){var e=this;return Promise.resolve().then(o.a.bind(this.beforeSubmit,this)).then(function(t){if(!1!==t)return e.submit()}).catch(function(t){throw e.displayError(t),t})})),_attachEvents:function(){this.delegateEvents(o.a.extend({},_.prototype.events,this.events))},isValid:function(){if(!this.isValidStart())return!1;for(var e=this.$("input"),t=0,n=e.length;n>t;++t){var i=this.$(e[t]);try{i.validate()}catch(e){return!1}}return this.isValidEnd()},isValidStart:function(){return!0},isValidEnd:function(){return!0},showValidationErrors:function(){if(this.hideError(),!this.showValidationErrorsStart()){for(var e=this.$("input"),t=0,n=e.length;n>t;++t){var i=e[t],r=this.$(i);try{r.validate()}catch(e){return void this.showValidationError(i,e)}}this.showValidationErrorsEnd()}},getElementValue:function(e){return this.$(e).val()},showValidationErrorsStart:function(){},showValidationErrorsEnd:function(){},showValidationError:function(e,t){var n=this,i=2>=arguments.length||void 0===arguments[2]||arguments[2];this.logError(t);var r=this.$(e),o=a.a.toMessage(t),s=function(t){n.markElementInvalid(r,t),n.trigger("validation_error",e,o),i&&setTimeout(function(){try{r.get(0).focus()}catch(e){}},200)};if(t.describedById)s(t.describedById);else{var c="error-tooltip-".concat(t.errno),u=new g.default({id:c,invalidEl:r,message:o,translator:this.translator});u.on("destroyed",function(){n.markElementValid(r),n.trigger("validation_error_removed",e)}).render().then(function(){return s(c)}),this.trackChildView(u)}return o},markElementInvalid:function(e,t){e.addClass("invalid").attr("aria-invalid","true"),t&&e.attr("aria-described-by",t)},markElementValid:function(e){e.removeClass("invalid").attr("aria-invalid",null).attr("aria-described-by",null)},beforeSubmit:function(){return Promise.resolve()},submit:function(){},afterSubmit:function(e){var t=this;return Promise.resolve().then(function(){return e&&e.halt&&t.halt(),e})},isSubmitting:function(){return this._isSubmitting},halt:function(){this.$("input,textarea,button").attr("disabled","disabled").blur(),this._isHalted=!0},isHalted:function(){return this._isHalted},detectFormValueChanges:function(){var e=this._previousFormValues,t=this.getFormValues();return o.a.isEqual(e,t)?null:t},updateFormValueChanges:function(){var e=this.detectFormValueChanges();return e&&(this._previousFormValues=e),e}});t.default=_},,,function(e,t,n){"use strict";n.r(t),t.default=function(e){return function(t){t&&t.preventDefault();var n=[].slice.call(arguments,0);return n.unshift(e),this.invokeHandler.apply(this,n)}}},function(e,t,n){"use strict";function i(){}function r(e,t){this.hideError();var n=this.$(".success");t&&n[e](this.translator.get(t)),n.slideDown(x).attr("data-shown","true"),n.css(P>this.window.pageYOffset?{left:"",position:"",top:"",width:""}:{left:0,position:"fixed",top:0,width:"100%"}),this.trigger("success",t),this._isSuccessVisible=!0}function o(e,t){if(this._areErrorsEnabled){this.hideSuccess(),t=this._normalizeError(t),this.logError(t);var n=this.translateError(t),i=this.$(".error");return d.a.is(t,"WORKING")?(this.logFlowEvent("working"),i.addClass("info")):i.removeClass("info"),n&&i[e](n),i.slideDown(x).attr("data-shown","true"),this.trigger("error",n),this._isErrorVisible=!0,n}this.logger.error("Error ignored: %s",JSON.stringify(t))}function s(e){return e&&e.errorModule?e.errorModule:d.a}n.r(t);var a=n(5),c=n.n(a),u=n(0),l=n.n(u),d=n(1),h=n(6),f=n.n(h),p=n(4),m=n(213),g=n(74),v=n(148),_=n(89),y=n(105);l.a.forEach(l.a.keys(y.a.prototype),function(e){i.prototype[e]=function(){}}),i.prototype.flush=function(){return Promise.resolve()},i.prototype.isCollectionEnabled=function(){return!1};var w=i,b=n(32),E=n(113),S=n(73),A=n(29),I=n(112),C=n(90),T=n(46),O=n(16),k=window.document.title,P=64,x=150,N=new w,R=f.a.View.extend({layoutClassName:null,viewName:"",partialTemplates:{},constructor:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.broker=t.broker,this.currentPage=t.currentPage,this.model=t.model||new f.a.Model,this.metrics=t.metrics||N,this.relier=t.relier,this.sentryMetrics=t.sentryMetrics||E,this.childViews=[],this.user=t.user,this.lang=t.lang,this.window=t.window||window,this.logger=new b.a(this.window),this.navigator=t.navigator||this.window.navigator||navigator,this.translator=t.translator||new C.a,l.a.extend(this.events,v.default.events);var n=function(t){var n=e.events[t];l.a.isString(n)&&l.a.isFunction(e[n])&&(e.events[t]=function(){this[n].apply(this,arguments)})};for(var i in this.events)n(i);!this.viewName&&t.viewName&&(this.viewName=t.viewName),_.a.initialize.call(this,t),f.a.View.call(this,t),this._boundDisableErrors=this.disableErrors.bind(this),c()(this.window).on("beforeunload",this._boundDisableErrors),this._boundCheckAuthorization=this.checkAuthorization.bind(this),c()(this.window).on("focus",this._boundCheckAuthorization),this.rerender=l.a.debounce(this.rerender,50)},render:function(){var e=this;this.layoutClassName&&c()("body").addClass(this.layoutClassName);var t=this.relier&&this.relier.get("style");return t&&c()("body").addClass(t),this._hasNavigated=!1,Promise.resolve().then(function(){return e.checkAuthorization()}).then(function(t){return t&&e.beforeRender()}).then(function(t){return!1!==t&&!e.hasNavigated()&&(e.destroyChildViews(),e._context=null,Promise.resolve().then(function(){if(e.renderReactComponent)return e.renderReactComponent();e.$el.html(e.renderTemplate(e.template.bind(e)))}).then(function(){return e.trigger("rendered"),e._isErrorVisible=e.$(".error").hasClass("visible"),e._isSuccessVisible=e.$(".success").hasClass("visible"),e.afterRender()}))}).then(function(t){return!1!==t&&!e.hasNavigated()})},renderTemplate:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=l.a.extend({},this.getContext(),{t:function(e){return t.translateInTemplate(e,i)},unsafeTranslate:function(e){return t.unsafeTranslateInTemplate(e,i)}},n),r=function(e){var r=t.partialTemplates[e];i[e]=function(){return t.renderTemplate(r,n)}};for(var o in this.partialTemplates)r(o);return e(i)},writeToDOM:function(e){return m.a.write(this.window,e)},checkAuthorization:function(){var e=this;return this.mustAuth||this.mustVerify?this.user.sessionStatus().then(function(t){var n;return!(e.mustVerify&&!t.get("verified"))||(t.get("verificationReason")===O.a.SIGN_UP?n="confirm":t.get("verificationReason")===O.a.SIGN_IN&&(n=t.get("verificationMethod")===T.a.EMAIL_2FA?"signin_code":"confirm_signin"),e.navigate(n,{account:t}),!1)},function(t){if(d.a.is(t,"INVALID_TOKEN"))return e.logError(d.a.toError("SESSION_EXPIRED")),e.relier.set("redirectTo",e.window.location.href),e.navigate(e._reAuthPage()),!1;throw t}):Promise.resolve(!0)},_reAuthPage:function(){return this.relier&&this.relier.get("email")?"force_auth":(this.relier.set("action","email"),"/")},displayStatusMessages:function(){var e=this.model.get("success");e&&(this.displaySuccess(e),this.model.unset("success"));var t=this.model.get("unsafeSuccess");t&&(this.unsafeDisplaySuccess(t),this.model.unset("unsafeSuccess"));var n=this.model.get("error");n&&(this.displayError(n),this.model.unset("error"))},titleFromView:function(e){var t=e||k,n=this.$("header:first h1").text(),i=this.$("header:first h2").text();return n&&i?t=n+": "+i:n?t=n:i&&(t=t+": "+i),t},getContext:function(){return this._context||(this._context=new f.a.Model(this.model.toJSON()),this.setInitialContext(this._context)),this._context.toJSON()},setInitialContext:function(){},translate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getContext();if(A.a.hasHTML(e)){var n=d.a.toError("HTML_WILL_BE_ESCAPED");n.string=e,this.logError(n)}return l.a.escape(this.translator.get(e,t))},unsafeTranslate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getContext();if(A.a.hasUnsafeVariables(e)){var n=d.a.toError("UNSAFE_INTERPOLATION_VARIABLE_NAME");n.string=e,this.logError(n)}return this.translator.get(e,t)},translateInTemplate:function(e,t){var n=this;return function(i){return n.translate(e||i,t)}},unsafeTranslateInTemplate:function(e,t){var n=this;return function(i){return n.unsafeTranslate(e||i,t)}},beforeRender:function(){},afterRender:function(){return Promise.resolve()},afterVisible:function(){return this.displayStatusMessages(),this.stackWideLinks(),this.focusAutofocusElement(),Promise.resolve()},rerender:function(){var e=this;return this.render().then(function(){return e.afterVisible()})},stackWideLinks:function(){var e=this;this.$(".links").each(function(t,n){var i=e.$(n),r=i.children("a"),o=Math.floor(i.width()/r.length);r.filter(function(t,n){var i=e.$(n);i.css("max-width","100%"),i.css("white-space","nowrap");var r=i.outerWidth()>=o;return i.css("white-space",""),i.css("max-width",""),r}).length&&(i.addClass("centered"),r.removeClass("left").removeClass("right"))})},destroy:function(e){this.trigger("destroy"),this.beforeDestroy&&this.beforeDestroy(),e?this.remove():(this.stopListening(),this.$el.off()),this.layoutClassName&&c()("body").removeClass(this.layoutClassName),c()(this.window).off("beforeunload",this._boundDisableErrors),c()(this.window).off("focus",this._boundCheckAuthorization),this.destroyChildViews(),this.trigger("destroyed")},trackChildView:function(e){return l.a.contains(this.childViews,e)||(this.childViews.push(e),e.on("destroyed",l.a.bind(this.untrackChildView,this,e))),e},untrackChildView:function(e){return this.childViews=l.a.without(this.childViews,e),e},destroyChildViews:function(){l.a.invoke(this.childViews,"destroy"),this.childViews=[]},isChildViewTracked:function(e){return l.a.indexOf(this.childViews,e)>-1},displaySuccess:l.a.partial(r,"text"),unsafeDisplaySuccess:l.a.partial(r,"html"),hideSuccess:function(){this.$(".success").slideUp(x).removeClass("visible"),this._isSuccessVisible=!1},isSuccessVisible:function(){return!!this._isSuccessVisible},translateError:function(e){return s(e).toInterpolatedMessage(e,this.translator)},_areErrorsEnabled:!0,disableErrors:function(){this._areErrorsEnabled=!1},displayError:l.a.partial(o,"text"),unsafeDisplayError:l.a.partial(o,"html"),logError:function(e){(e=this._normalizeError(e)).logged||(e.logged=!0,g.a.captureError(e,this.sentryMetrics,this.metrics))},fatalError:function(e){return g.a.fatalError(e,this.sentryMetrics,this.metrics,this.window,this.translator)},getViewName:function(){return this.viewName},_normalizeError:function(e){var t=s(e);return e||(e=t.toError("UNEXPECTED_ERROR"),this.logger.trace()),l.a.isString(e)&&(e=Error(e)),e.viewName=this.getViewName(),e},logView:function(){this.metrics.logView(this.getViewName())},logEvent:function(e){this.metrics.logEvent(e)},logEventOnce:function(e){this.metrics.logEventOnce(e)},logViewEvent:function(e){this.metrics.logViewEvent(this.getViewName(),e)},logFlowEvent:function(e,t,n){this.notifier.trigger("flow.event",l.a.assign({},n,{event:e,viewName:t}))},logFlowEventOnce:function(e,t){this.logFlowEvent(e,t,{once:!0})},hideError:function(){this.$(".error").slideUp(x).removeClass("visible"),this._isErrorVisible=!1},isErrorVisible:function(){return!!this._isErrorVisible},navigate:function(e,t,n){t=t||{},n=n||{},t.error&&this.logError(t.error),this._hasNavigated=!0,this.notifier.trigger("navigate",{nextViewData:t,routerOptions:n,url:e})},navigateAway:function(e){this._hasNavigated=!0,this.notifier.trigger("navigate",{server:!0,url:e})},replaceCurrentPage:function(e){this.navigate(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{replace:!0,trigger:!0})},hasNavigated:function(){return!!this._hasNavigated},focusAutofocusElement:function(){var e=this,t=this.$("[autofocus]");if(c()("html").hasClass("no-touch")&&t.length){!function n(){t.is(":focus")||(t.is(":visible")?e.focus(t):e.setTimeout(n,50))}()}},focus:function(e){var t=this;if(c()("html").hasClass("no-touch"))try{var n=this.$(e);n.one("focus",function(){return t.placeCursorAt(n)}),n.get(0).focus()}catch(e){}},placeCursorAt:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c()(e).__val().length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=c()(e).get(0);try{i.selectionStart=t,i.selectionEnd=n}catch(e){}},invokeHandler:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];if(l.a.isString(e)&&!l.a.isFunction(e=this[e]))throw Error(e+" is an invalid function name");if(l.a.isFunction(e))return l.a.isArguments(n[0])&&(n=n[0]),e.apply(this,n)},getSignedInAccount:function(){return this.user.getSignedInAccount()},getAccount:function(){},showChildView:function(){return Promise.resolve()},invokeBrokerMethod:function(e){for(var t,n=this,i=arguments.length,r=Array(i>1?i-1:0),o=1;i>o;o++)r[o-1]=arguments[o];return Promise.resolve((t=this.broker)[e].apply(t,r)).then(function(e){return n.invokeBehavior.apply(n,[e].concat(r))})},invokeBehavior:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];return Promise.resolve().then(function(){return l.a.isFunction(e)?e.apply(void 0,[t].concat(i)):e}).then(function(n){return l.a.isFunction(e)?t.invokeBehavior.apply(t,[n].concat(i)):n})}});p.a.mixin(R,v.default,S.a,I.default);t.default=R},,function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(72),s=n(32),a=n(29),c=new s.a,u=function(e){return e},l=u("Unexpected error"),d={UNKNOWN_CLIENT:{errno:101,message:u("Unknown client")},INCORRECT_REDIRECT:{errno:103,message:u("Incorrect redirect_uri")},INVALID_ASSERTION:{errno:104,message:u("Invalid assertion")},UNKNOWN_CODE:{errno:105,message:u("Unknown code")},INCORRECT_CODE:{errno:106,message:u("Incorrect code")},EXPIRED_CODE:{errno:107,message:u("Expired code")},INVALID_TOKEN:{errno:108,message:u("Invalid token")},INVALID_PARAMETER:{errno:109,message:u("Invalid OAuth parameter: %(param)s")},INVALID_RESPONSE_TYPE:{errno:110,message:l},UNAUTHORIZED:{errno:111,message:u("Unauthorized")},FORBIDDEN:{errno:112,message:u("Forbidden")},INVALID_CONTENT_TYPE:{errno:113,message:l},INVALID_SCOPES:{errno:114,message:a.a.interpolate(u("Invalid OAuth parameter: %(param)s"),{param:"scope"})},EXPIRED_TOKEN:{errno:115,message:u("Expired token")},NOT_PUBLIC_CLIENT:{errno:116,message:"Not a public client"},INCORRECT_CODE_CHALLENGE:{errno:117,message:"Incorrect code_challenge"},MISSING_PKCE_PARAMETERS:{errno:118,message:"PKCE parameters missing"},STALE_AUTHENTICATION_TIMESTAMP:{errno:119,message:"Stale authentication timestamp"},MISMATCH_ACR_VALUES:{errno:120,message:"Mismatch acr values"},INVALID_GRANT_TYPE:{errno:121,message:"Invalid grant_type"},SERVER_UNAVAILABLE:{errno:201,message:u("System unavailable, try again soon")},DISABLED_CLIENT_ID:{errno:202,message:u("System unavailable, try again soon")},SERVICE_UNAVAILABLE:{errno:998,message:u("System unavailable, try again soon")},UNEXPECTED_ERROR:{errno:999,message:l},TRY_AGAIN:{errno:1e3,message:u("Something went wrong. Please close this tab and try again.")},INVALID_RESULT:{errno:1001,message:l},USER_CANCELED_OAUTH_LOGIN:{errno:1004,message:u("no message")},MISSING_PARAMETER:{errno:1005,message:u("Missing OAuth parameter: %(param)s"),response_error_code:"invalid_request"},INVALID_PAIRING_CLIENT:{errno:1006,message:"Invalid pairing client"},PROMPT_NONE_NOT_ENABLED:{errno:1007,message:"prompt=none is not enabled",response_error_code:"invalid_request"},PROMPT_NONE_NOT_ENABLED_FOR_CLIENT:{errno:1008,message:"prompt=none is not enabled for this client",response_error_code:"unauthorized_client"},PROMPT_NONE_WITH_KEYS:{errno:1009,message:"prompt=none cannot be used when requesting keys",response_error_code:"invalid_request"},PROMPT_NONE_NOT_SIGNED_IN:{errno:1010,message:u("User is not signed in"),response_error_code:"login_required"},PROMPT_NONE_DIFFERENT_USER_SIGNED_IN:{errno:1011,message:u("A different user is signed in"),response_error_code:"account_selection_required"},PROMPT_NONE_UNVERIFIED:{errno:1012,message:u("Unverified user or session"),response_error_code:"interaction_required"}};t.a=r.a.extend({},o.a,{ERRORS:d,NAMESPACE:"oauth",toInterpolationContext:function(e){try{if(this.is(e,"MISSING_PARAMETER"))return{param:e.param};if(this.is(e,"INVALID_PARAMETER"))return{param:e.param||e.validation.keys.join(",")}}catch(e){c.error("Error in oauth-errors.js->toInterpolationContext: %s",e+"")}return{}}})},,function(e,t,n){"use strict";n.r(t);var i=n(5),r=n.n(i),o=n(23);t.default={afterRender:function(){this.initializeFlowEvents()},events:{"click a":"_clickFlowEventsLink","click input":"_engageFlowEventsForm","input input":"_engageFlowEventsForm","change select":"_engageFlowEventsForm","keyup input":"_keyupFlowEventsInput","keyup textarea":"_keyupFlowEventsInput",submit:"_submitFlowEventsForm"},initializeFlowEvents:function(){this.notifier.trigger("flow.initialize")},_clickFlowEventsLink:function(e){if(e&&e.currentTarget){var t=r()(e.currentTarget).data("flowEvent");t&&this.logFlowEvent(t,this.viewName)}},_engageFlowEventsForm:function(){this.logFlowEventOnce("engage",this.viewName)},_keyupFlowEventsInput:function(e){e.which!==o.a.TAB||e.metaKey||e.ctrlKey||e.altKey||this._engageFlowEventsForm()},_submitFlowEventsForm:function(){this.isFormEnabled()&&this.logFlowEvent("submit",this.viewName)}}},function(e,t){"use strict";var n;!function(e){e.FORCE_AUTH="force_auth",e.PASSWORD_RESET="reset_password",e.PASSWORD_RESET_WITH_RECOVERY_KEY="reset_password_with_recovery_key",e.PRIMARY_EMAIL_VERIFIED="primary_email_verified",e.RECOVERY_KEY="recovery_key",e.SECONDARY_EMAIL_VERIFIED="secondary_email_verified",e.SIGN_IN="login",e.SIGN_UP="signup",e.SUCCESSFUL_OAUTH="oauth_success"}(n||(n={})),t.a=n},function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=n(0),o=n.n(r);t.a={searchParams:function(){var e=arguments.length>1?arguments[1]:void 0,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/(^.*\?|#.*$)/g,"").trim();return t?this.splitEncodedParams(t,e):{}},searchParam:function(e,t){return this.searchParams(t)[e]},hashParams:function(){var e=arguments.length>1?arguments[1]:void 0,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/^.*#/,"").trim();return t?this.splitEncodedParams(t,e):{}},splitEncodedParams:function(){var e=arguments.length>1?arguments[1]:void 0,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("&"),n={};return o.a.each(t,function(e){var t=i(e.split("="),2);n[t[0]]=decodeURIComponent(t[1]).trim()}),e?o.a.pick(n,e):n},objToSearchString:function(e){return this.objToUrlString(e,"?")},objToHashString:function(e){return this.objToUrlString(e,"#")},objToUrlString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?",n=[];for(var i in e){var r=e[i];void 0!==r&&null!==r&&""!==r&&n.push(i+"="+encodeURIComponent(r))}return n.length?t+n.join("&"):""},getOrigin:function(e){if(!e)return"";var t=document.createElement("a");if(t.setAttribute("href",e),!t.protocol||!t.host)return null;var n=t.protocol+"//"+(443==+t.port||80==+t.port?t.hostname:t.host);return 0!==e.indexOf(n)?null:n},updateSearchString:function(e,t){var n={},i=e.indexOf("?");return 0>i||(n=this.searchParams(e.substring(i+1)),e=e.substring(0,i)),o.a.extend(n,t),e+this.objToSearchString(n)},cleanSearchString:function(e,t){var n=i(e.split("?"),2),r=n[0],o=n[1],s=this.searchParams(void 0===o?"":o,t);return r+this.objToSearchString(s)}}},,function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(n,i){var o=r.a.assign({},t,{account:i});return n.navigate(e,o),new Promise(function(){})};return r.a.assign(n,t,{endpoint:e,halt:!0,type:"navigate"}),n}},,function(e,t,n){"use strict";var i=n(73),r=n(92);t.a={dependsOn:[i.a],getUserAgentString:function(){return this.getSearchParam("forceUA")||this.window.navigator.userAgent},getUserAgent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getUserAgentString();return new r.a(e)}}},function(e,t,n){"use strict";n.r(t);var i=n(11),r=n(5),o=n.n(r);t.default={afterRender:function(){this.transformLinks()},setInitialContext:function(e){e.set(this.relier.pick("service","serviceName"))},transformLinks:function(){var e=this;this.$('a[href^="/signin"],a[href^="/signup"],a[href^="/reset_password"]').each(function(t,n){var i=o()(n);i.attr("href",e.broker.transformLink(i.attr("href")))})},unsafeDisplayError:function(e){var t=i.default.prototype.unsafeDisplayError.call(this,e);return this.transformLinks(),t}}},function(e,t){"use strict";t.a={BACKSPACE:8,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,NUM_0:48,NUM_1:49,NUM_9:57,NUMPAD_0:96,NUMPAD_9:105,PERIOD:190,RIGHT_ARROW:39,TAB:9,UP_ARROW:38,IME:229}},,function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(5),s=n.n(o),a=n(1),c=n(41),u=n(60),l=n(65),d={dependsOn:[n(21).a],notifications:{},onProfileUpdate:function(){},displayAccountProfileImage:function(e,t){var n=this;s()("#image-holder").css("display","none");var i,r=this.$((t=t||{}).wrapperClass||".avatar-wrapper");return this._shouldShowDefaultProfileImage(e)?this.setDefaultPlaceholderAvatar(r):t.spinner&&(i=this._addLoadingSpinner(r)),e.fetchCurrentProfileImage().then(function(t){return n._updateCachedProfileImage(t,e),t},function(e){return u.a.is(e,"UNAUTHORIZED")||a.a.is(e,"UNVERIFIED_ACCOUNT")||n.logError(e),new l.a}).then(function(e){return n._completeLoadingSpinner(i).then(function(){return e})}).then(function(e){r.find(":not(.avatar-spinner)").remove(),e.isDefault()?(r.addClass("with-default").append("<span></span>"),n.logViewEvent("profile_image_not_shown"),s()("#image-holder").css("display","inline-block"),s()("#loading-avatar-spinner").css("display","none")):(r.removeClass("with-default").append(s()(e.get("img")).addClass("profile-image")),s()("#image-holder").css("display","inline-block"),s()("#loading-avatar-spinner").css("display","none"),n.logViewEvent("profile_image_shown"))})},setDefaultPlaceholderAvatar:function(e){(e=e||s()(".avatar-wrapper")).addClass("with-default")},_updateCachedProfileImage:function(e,t){t.isDefault()||t.setProfileImage(e)},_shouldShowDefaultProfileImage:function(e){return!e.has("profileImageUrl")},_addLoadingSpinner:function(e){if(e)return s()('<span class="avatar-spinner"></span>').appendTo(e.addClass("with-spinner"))},_completeLoadingSpinner:function(e){var t=this;return r.a.isUndefined(e)?Promise.resolve():new Promise(function(n){e.addClass("completed").on("transitionend",function(t){n(),t.originalEvent&&"::after"===t.originalEvent.pseudoElement&&e.remove()}),t.setTimeout(function(){n(),e.remove()},400)})},logAccountImageChange:function(e){e.get("hadProfileImageSetBefore")?this.logViewEvent("submit.change"):this.logViewEvent("submit.new")},updateProfileImage:function(e,t){return t.setProfileImage(e),Promise.resolve().then(r.a.bind(this._notifyProfileUpdate,this,t.get("uid")))},deleteDisplayedAccountProfileImage:function(e){var t=this;return Promise.resolve().then(function(){if(!e.get("profileImageId"))return e.fetchCurrentProfileImage().then(function(n){return t._updateCachedProfileImage(n,e),n})}).then(function(){return e.deleteAvatar(e.get("profileImageId"))}).then(function(){t.updateProfileImage(new l.a({default:!0}),e)})},updateDisplayName:function(e){var t=this,n=this.getSignedInAccount();return n.set("displayName",e),Promise.resolve().then(function(){return t._notifyProfileUpdate(n.get("uid"))})},updateDisplayEmail:function(e){var t=this,n=this.getSignedInAccount();return n.set("email",e),Promise.resolve().then(function(){return t._notifyProfileUpdate(n.get("uid"))})},_notifyProfileUpdate:function(e){this.notifier.triggerAll(c.a.PROFILE_CHANGE,{uid:e})},supportsAvatarUpload:function(){var e=this.getUserAgent();return!e.isFirefoxIos()||e.parseOsVersion().major>10}};d.notifications[c.a.PROFILE_CHANGE]="onProfileUpdate",t.default=d},,function(e,t,n){"use strict";n.r(t);var i=n(10),r=n(23);t.default={initialize:function(){this._canGoBack=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).canGoBack},events:{"click #back,.back":Object(i.default)("onClick"),"keyup #back,.back":"backOnEnter"},setInitialContext:function(e){e.has("canGoBack")||e.set("canGoBack",this.canGoBack())},onClick:function(){this.back()},back:function(e){this.canGoBack()&&(this._canGoBack=!1,this.logViewEvent("back"),this.notifier.trigger("navigate-back",{nextViewData:e}))},backOnEnter:function(e){e.which===r.a.ENTER&&(e.preventDefault(),this.back())},canGoBack:function(){return!!this._canGoBack}}},function(e,t,n){"use strict";n.r(t);var i=n(5),r=n.n(i),o=n(10);t.default={initialize:function(e){this.parentView=e.parentView},events:{"click .cancel":Object(o.default)("_closePanelReturnToSettings"),"click .settings-unit-toggle":Object(o.default)("_triggerPanel")},afterRender:function(){this.$("[autofocus]").attr("data-autofocus-on-panel-open",!0).removeAttr("autofocus")},_triggerPanel:function(e){var t=e&&r()(e.currentTarget).data("href");t&&this.navigate(t)},openPanel:function(){this.closeAllPanels(),this.$(".settings-unit").addClass("open"),this.$el.closest("#fxa-settings-content").addClass("animate-shadow"),this.focus(this.$("[data-autofocus-on-panel-open]")),this.model.set("isPanelOpen",!0)},hidePanel:function(){this._closePanelReturnToSettings()},isPanelOpen:function(){return!!this.model.get("isPanelOpen")},_closePanelReturnToSettings:function(){this.navigate("settings"),this.clearInput(),this.closePanel()},clearInput:function(){this.$("input").each(function(e,t){r()(t).change()});var e=this.$("form")[0];e&&e.reset()},closePanel:function(){this.$el.closest("#fxa-settings-content").removeClass("animate-shadow"),this.$(".settings-unit").removeClass("open"),this.model.set("isPanelOpen",!1)},closeAllPanels:function(){r()(".settings-unit").removeClass("open")},displaySuccess:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{closePanel:!0};this.parentView&&(this.parentView.displaySuccess(e),t.closePanel&&this.closePanel())}}},function(e,t){"use strict";var n=function(e){return e},i=/&(\D+|#\d+);/i,r=/<.*>/,o=/\%\(([a-zA-Z]+)\)s/g,s=/%s/g,a=/\%\(((?!escaped)[a-zA-Z]+)\)s/g;n('By proceeding, you agree to the <a id="service-tos" href="%(termsUri)s">Terms of Service</a> and<a id="service-pp" href="%(privacyUri)s">Privacy Notice</a> of %(serviceName)s (%(serviceUri)s).'),n('<a href="https://support.mozilla.org/kb/im-having-problems-with-my-firefox-account">Help</a>'),n("Get the latest news about Mozilla and Firefox."),n("%(city)s, %(country)s (estimated)"),n("%(country)s (estimated)"),n("IP address: %(ip)s"),n("For added security, please confirm this sign-in to begin syncing with this device:"),n("Sign in"),t.a={hasHTML:function(e){return i.test(e)||r.test(e)},hasUnsafeVariables:function(e){return s.test(e)||a.test(e)},interpolate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.replace(s,function(e){return t.shift&&t.length>0?t.shift():e}).replace(o,function(e,n){return n in t?t[n]:e})}}},function(e,t,n){"use strict";function i(e,t){if(void 0===e)throw Error("".concat(t," is required"))}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(50),s=n.n(o),a=n(6),c=n.n(a),u=n(2),l=n.n(u),d=c.a.Model.extend({defaults:{tries:0},initialize:function(e){this.maxTries=(e=e||{}).maxTries||l.a.EMAIL_RESEND_MAX_TRIES},incrementRequestCount:function(){var e=this.get("tries")+1;this.set("tries",e),this.maxTries>e||this.trigger("maxTriesReached")},shouldResend:function(){return e=this.get("tries"),this.maxTries>=e;var e},reset:function(){this.set("tries",0)}}),h=n(10),f=new s.a("5m").milliseconds();t.default=function(){var e,t=r.a.defaults(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{successMessage:(e="Email resent. Add accounts@firefox.com to your contacts to ensure a smooth delivery.",e)}).successMessage;return{initialize:function(){this._emailResend=new d,this.listenTo(this._emailResend,"maxTriesReached",this._onMaxTriesReached)},events:{"click #resend":Object(h.default)("_resend")},_resend:function(){var e=this;return Promise.resolve().then(function(){if(e.logViewEvent("resend"),e._updateSuccessMessage(),e._emailResend.incrementRequestCount(),e._emailResend.shouldResend())return e.resend().then(function(){t&&e.displaySuccess(t)}).catch(function(t){return e.displayError(t)})})},_updateSuccessMessage:function(){var e=this.$(".success:visible");e&&e.one("animationend",function(){e.removeClass("shake")}).addClass("shake")},_onMaxTriesReached:function(){var e=this;this.logViewEvent("too_many_attempts"),this.$("#resend").hide(),this.setTimeout(function(){e._emailResend.reset(),e.$("#resend").show()},f)}}}},function(e,t){"use strict";function n(e){this._window=e||window}n.prototype={info:function(){this._window.console&&this._window.console.info&&this._window.console.info.apply(this._window.console,arguments)},trace:function(){this._window.console&&this._window.console.trace&&this._window.console.trace()},warn:function(){this._window.console&&this._window.console.warn&&this._window.console.warn.apply(this._window.console,arguments)},error:function(e){if(this._window.console&&this._window.console.error){var t="";e.errorModule?(t=e.errorModule.toInterpolatedMessage(e),this._window.console.error(t)):this._window.console.error.apply(this._window.console,arguments)}}},t.a=n},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){this.load()}var o=n(0),s=n.n(o),a=["oauth"];r.prototype={load:function(){var e={};try{e=s.a.extend(e,JSON.parse(sessionStorage.getItem("__fxa_session")))}catch(e){}try{e=s.a.extend(e,JSON.parse(localStorage.getItem("__fxa_session")))}catch(e){}return s.a.each(e,function(e,t){r.prototype.hasOwnProperty(t)||(this[t]=e)},this),e},reload:function(){var e=this.load();s.a.each(this,function(t,n){r.prototype.hasOwnProperty(n)||e.hasOwnProperty(n)||(this[n]=null,delete this[n])},this)},set:function(e,t){if(void 0===t&&"object"===i(e))return s.a.each(e,function(e,t){this.set(t,e)},this);r.prototype.hasOwnProperty(e)||(this[e]=t,this.persist())},persist:function(){var e={},t={};s.a.each(this,function(n,i){0>s.a.indexOf(a,i)?e[i]=n:t[i]=n});try{localStorage.setItem("__fxa_session",JSON.stringify(t)),sessionStorage.setItem("__fxa_session",JSON.stringify(e))}catch(e){}},get:function(e){return this[e]},clear:function(e){if(void 0!==e)this.hasOwnProperty(e)&&(this[e]=null,delete this[e],this.persist());else for(e in this)this.clear(e)},testRemove:function(e){this.hasOwnProperty(e)&&(this[e]=null,delete this[e])},testClear:function(){for(var e in this)this.hasOwnProperty(e)&&(this[e]=null,delete this[e]);sessionStorage.clear(),localStorage.clear()}},t.a=new r},,,function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.r(t);var r=n(5),o=n.n(r),s=n(81),a=n(137),c=n(117),u=n(118),l=n(120),d=n(121),h=n(123),f=n(124),p=n(141),m=n(25),g=n(193),v=n(11),_=n(125),y=n(126),w=n(127),b=n(4),E=n(102),S=n(2),A=n.n(S),I=n(130),C=n(131),T=n(50),O=n.n(T),k=n(143),P=n(80),x=(n(163),n(10)),N=n(223),R=n.n(N),D=n(85),M=n(194),L=n(154),V=n(313),U=n.n(V),F=n(21),j=n(138),B=n(142),G=[g.default,C.default,L.default,k.default,c.default,u.default,l.default,d.default,j.default,B.default,w.default,y.default,_.default,I.default,f.default,p.default,h.default,E.default],H=v.default.prototype,W=v.default.extend({template:U.a,className:"settings",layoutClassName:"settings",viewName:"settings",mustVerify:!0,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._childView=e.childView,this._createView=e.createView,this._experimentGroupingRules=e.experimentGroupingRules,this._language=e.config.lang,this._marketingEmailEnabled=!1!==e.marketingEmailEnabled,this._subscriptionsManagementEnabled=!1!==e.subscriptionsManagementEnabled,this.getUidAndSetSignedInAccount()},notifications:{"navigate-from-child-view":"_onNavigateFromChildView"},setInitialContext:function(e){var t=this.getSignedInAccount();e.set({ccExpired:!!this._ccExpired,escapedCcExpiredLinkAttrs:'href="/subscriptions" class="alert-link"',securityEventsVisible:this.displaySecurityEvents(),showSignOut:!t.isFromSync(),unsafeHeaderHTML:this._getHeaderHTML(t)})},events:{"click #signout":Object(x.default)("signOut")},onProfileUpdate:function(){this._showAvatar()},showChildView:function(e,t){return this._subPanels.showChildView(e,t)},_onNavigateFromChildView:function(){o.a.modal.isActive()?o.a.modal.close():0>this.currentPage.indexOf("settings")||o()(".settings-unit").removeClass("open"),this.displayStatusMessages()},beforeRender:function(){var e=this,t=this.getSignedInAccount();return Promise.all([t.fetchProfile(),t.settingsData()]).then(function(t){var n=i(t,2)[1];n&&Array.isArray(n.subscriptions)&&(e._ccExpired=n.subscriptions.some(function(e){return e.failure_code===A.a.CC_EXPIRED}))}).catch(function(t){e.model.set("error",t)})},_onAccountUpdate:function(e){this.$("#fxa-settings-profile-header").html(this._getHeaderHTML(e))},_getHeaderHTML:function(e){return R()(e.pick("displayName","email"))},afterRender:function(){var e=this.getSignedInAccount();return this.listenTo(e,"change:displayName",this._onAccountUpdate),this.listenTo(e,"change:email",this._onAccountUpdate),this.logViewEvent("communication-prefs-link.visible."+this._areCommunicationPrefsVisible()),this._initializeSubPanels(this.$("#sub-panels")[0]).render().then(H.afterRender.bind(this))},afterVisible:function(){return"avatar"===this.relier.get("setting")&&(this.relier.set("setting",null),this.navigate("settings/avatar/change")),H.afterVisible.call(this).then(this._showAvatar.bind(this))},_setupAvatarChangeLinks:function(){this.supportsAvatarUpload()?this.$(".avatar-wrapper > *").wrap('<a href="/settings/avatar/change" class="change-avatar"></a>'):this.$(".avatar-wrapper").addClass("nohover")},_showAvatar:function(){var e=this,t=this.getSignedInAccount();return this.displayAccountProfileImage(t).then(function(){return e._setupAvatarChangeLinks()})},_initializeSubPanels:function(e){return this._subPanels||(this._subPanels=new M.default({createView:this._createView,el:e,initialChildView:this._childView,panelViews:this._getPanelsToDisplay(),parent:this})),this._subPanels},_getPanelsToDisplay:function(){var e=this,t=this._areCommunicationPrefsVisible();return G.filter(function(n){return n===E.default?t:n!==L.default||e._subscriptionsManagementEnabled})},_areCommunicationPrefsVisible:function(){return!!this._marketingEmailEnabled&&(!!this._experimentGroupingRules.choose("communicationPrefsVisible",{lang:this.navigator.language})&&!this.getUserAgent().isFirefoxIos())},signOut:Object(s.default)(function(){var e=this,t=this.getSignedInAccount();return this.logViewEvent("signout.submit"),this.user.signOutAccount(t).catch(function(){e.logViewEvent("signout.error")}).then(function(){e.logViewEvent("signout.success"),e.clearSessionAndNavigateToSignIn()})}),SUCCESS_MESSAGE_DELAY_MS:new O.a("5s").milliseconds(),displaySuccess:function(){var e=this;return this.clearTimeout(this._successTimeout),this._successTimeout=this.setTimeout(function(){e.hideSuccess()},this.SUCCESS_MESSAGE_DELAY_MS),v.default.prototype.displaySuccess.apply(this,arguments)},unsafeDisplaySuccess:function(){var e=this;return this.clearTimeout(this._successTimeout),this._successTimeout=this.setTimeout(function(){e.hideSuccess()},this.SUCCESS_MESSAGE_DELAY_MS),v.default.prototype.unsafeDisplaySuccess.apply(this,arguments)},displaySecurityEvents:function(){return!!this.broker.hasCapability("showSecurityEvents")}});b.a.mixin(W,a.default,m.default,P.default,D.default,F.a),t.default=W},function(e,t,n){"use strict";function i(){this._storage={}}function r(e){return a+"."+e}i.prototype.getItem=function(e){return e?this._storage[e]:null},i.prototype.setItem=function(e,t){e&&(this._storage[e]=t)},i.prototype.removeItem=function(e){e&&delete this._storage[e]},i.prototype.clear=function(){this._storage={}};var o=i,s=n(17),a="__fxa_storage",c=function(){function e(e,t){this._backend=e||new o,this.type=t}return e.prototype.get=function(e){var t;try{t=JSON.parse(this._backend.getItem(r(e))||"")}catch(e){}return t},e.prototype.set=function(e,t){this._backend.setItem(r(e),JSON.stringify(t))},e.prototype.remove=function(e){this._backend.removeItem(r(e))},e.prototype.clear=function(){this._backend.clear()},e.prototype.isNull=function(){return this._backend instanceof o},e.testStorage=function(e,t){void 0===t&&(t=window);try{var n=void 0;if("sessionStorage"===e)n=t.sessionStorage;else{if("1"===s.a.searchParam("disable_local_storage",t.location.search))throw Error("disabled for tests");n=t.localStorage}n.setItem("storage-test","storage-test"),n.removeItem("storage-test")}catch(t){throw function(e,t){return e.context="storage",e.namespace=t,e.errno=e.name||e.message,e}(t,e)}},e.testLocalStorage=function(t){e.testStorage("localStorage",t)},e.testSessionStorage=function(t){e.testStorage("sessionStorage",t)},e._isStorageEnabled=function(t,n){try{return e.testStorage(t,n),!0}catch(e){return!1}},e.isLocalStorageEnabled=function(t){return e._isStorageEnabled("localStorage",t)},e.isSessionStorageEnabled=function(t){return e._isStorageEnabled("sessionStorage",t)},e.factory=function(t,n){return void 0===n&&(n=window),"localStorage"===t&&this.isLocalStorageEnabled(n)?new e(n.localStorage,"local"):"sessionStorage"===t&&this.isSessionStorageEnabled(n)?new e(n.sessionStorage,"session"):new e(new o,"null")},e}();t.a=c},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(16);t.default={initialize:function(e){this.model.has("type")||this.model.set("type",e.type||o.a.SIGN_UP)},isSignIn:function(){return this.model.get("type")===o.a.SIGN_IN},isSignUp:function(){return this.model.get("type")===o.a.SIGN_UP},isPrimaryEmail:function(){return this.model.get("type")===o.a.PRIMARY_EMAIL_VERIFIED},isSecondaryEmail:function(){return this.model.get("type")===o.a.SECONDARY_EMAIL_VERIFIED},keyOfVerificationReason:function(e){return t=e,r.a.findKey(o.a,function(e){return e===t});var t}}},function(e,t,n){"use strict";n.r(t);var i=n(23),r=n(1),o=n(267),s=n.n(o);t.default={events:{"change input.password":"onPasswordChanged","keyup input.password":"onPasswordChanged","blur #vpassword":"hidePasswordHelper","keyup #vpassword":"onVPasswordChanged","mousedown .show-password-label":"onShowPasswordMouseDown","touchstart .show-password-label":"onShowPasswordMouseDown","keydown input.show-password":"onShowPasswordTV"},initialize:function(){var e=this;this.on("submitStart",function(){return e.hideVisiblePasswords()})},afterRender:function(){this._addShowPasswordLabel(this.$("input[type=password]"))},_updateShowPasswordLabel:function(e){var t=this.$(e);0===t.val().length?t.addClass("empty"):t.removeClass("empty")},_addShowPasswordLabel:function(e){var t=this;this.$(e).each(function(e,n){t._createShowPasswordLabelLabel(t.$(n))})},_createShowPasswordLabelLabel:function(e){if(!this.$("#show-".concat(e.attr("id"))).length){var t=e.attr("id"),n={id:"show-".concat(t),synchronizeShow:!!e.data("synchronize-show"),targetId:t},i=this.renderTemplate(s.a,n);e.after(i),this._updateShowPasswordLabel(e)}},onShowPasswordTV:function(e){if(e.which===i.a.ENTER){var t=this.getAffectedPasswordInputs(this.$(e.target));this.togglePasswordVisibility(t)}},onShowPasswordMouseDown:function(e){var t=this.$(e.target).siblings(".show-password"),n=this.getAffectedPasswordInputs(t);this.togglePasswordVisibility(n)},togglePasswordVisibility:function(e){"text"===e.attr("type")?this.hidePassword(e):this.showPassword(e)},getAffectedPasswordInputs:function(e){var t=this.$(e).siblings(".password");return this.$(e).data("synchronizeShow")&&(t=this.$(".password[data-synchronize-show]")),t},showPassword:function(e){var t=this.$(e);try{t.attr("type","text").attr("autocomplete","off").attr("autocorrect","off").attr("autocapitalize","off")}catch(e){this._logErrorConvertingPasswordType(t)}t.siblings(".show-password").attr("checked",!0),this.logViewEvent("password.visible")},hidePassword:function(e){var t=this.$(e);try{t.attr("type","password").removeAttr("autocomplete").removeAttr("autocorrect").removeAttr("autocapitalize")}catch(e){this._logErrorConvertingPasswordType(t)}t.siblings(".show-password").removeAttr("checked"),this.logViewEvent("password.hidden"),this.focus(t)},_logErrorConvertingPasswordType:function(e){var t=r.a.toError("CANNOT_CHANGE_INPUT_TYPE");t.type=e.attr("type"),this.logError(t)},hideVisiblePasswords:function(){var e=this,t=document.activeElement;this.$el.find(".password[type=text]").each(function(t,n){e.hidePassword(n)}),t.focus()},onPasswordChanged:function(e){this._updateShowPasswordLabel(e.target)},onVPasswordChanged:function(){this.$("#vpassword").val()===this.$("#password").val()?this.hidePasswordHelper():this.showPasswordHelper()},showPasswordHelper:function(){if(this.$("#vpassword").is(":focus")){var e="block"===this.$("#password-strength-balloon").css("display")?"none":"block";this.$(".input-help:not(.password-strength-balloon)").css("display",e)}},hidePasswordHelper:function(){this.$(".input-help:not(.input-help-forgot-pw,.password-strength-balloon)").css("display","none")}}},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(10),o=n(119),s=Object(i.assign)({},o.default,{initialize:function(){var e=this;this.parentView=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).parentView,this.on("modal-cancel",function(){return e.onModalCancel()})},events:{"click .cancel":Object(r.default)("_returnToSettings"),"click .modal-panel #back":Object(r.default)("_returnToAvatarChange")},_returnToAvatarChange:function(){this.navigate("settings/avatar/change")},_returnToClients:function(){this.navigate("settings/clients")},_returnToTwoFactorAuthentication:function(){this.navigate("settings/two_step_authentication")},_returnToAccountRecovery:function(e){this.navigate("settings/account_recovery",{hasRecoveryKey:e})},_showAccountRecoveryKey:function(){this.navigate("settings/account_recovery/recovery_key",{hasRecoveryKey:!0})},_returnToSettings:function(){this.navigate("settings")},onModalCancel:function(){if(!this.hasNavigated())switch(this.currentPage){case"settings/clients/disconnect":this._returnToClients();break;case"settings/two_step_authentication/recovery_codes":if("sign_in_recovery_code"===this.model.get("previousViewName")){var e=this.getSignedInAccount();return this.invokeBrokerMethod("afterCompleteSignInWithCode",e)}this._returnToTwoFactorAuthentication();break;case"settings/account_recovery/recovery_key":this._returnToAccountRecovery(!0);break;case"settings/account_recovery/confirm_revoke":this._returnToAccountRecovery(!1);break;case"settings/account_recovery/confirm_password":this.showRecoveryKeyView?this._showAccountRecoveryKey():this._returnToAccountRecovery(!1);break;default:this._returnToSettings()}},displaySuccess:function(e){this.parentView.displaySuccess(e)}});t.default=s},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(6),s=n.n(o),a=n(3),c=n(52),u={CHANGE_PASSWORD:{name:c.a.CHANGE_PASSWORD,schema:{email:a.a.email().required(),keyFetchToken:a.a.keyFetchToken().optional(),sessionToken:a.a.sessionToken().required(),uid:a.a.uid().required(),unwrapBKey:a.a.unwrapBKey().optional(),verified:a.a.boolean().required()}},COMPLETE_RESET_PASSWORD_TAB_OPEN:{name:"fxaccounts:complete_reset_password_tab_open",schema:null},DELETE:{name:c.a.DELETE,schema:{uid:a.a.uid().required()}},PROFILE_CHANGE:{name:c.a.PROFILE_CHANGE,schema:{uid:a.a.uid().required()}},SESSION_VERIFIED:{name:"internal:session_verified"},SIGNED_IN:{name:"internal:signed_in",schema:{keyFetchToken:a.a.keyFetchToken().optional(),sessionToken:a.a.sessionToken().required(),sessionTokenContext:a.a.string().optional(),uid:a.a.uid().required(),unwrapBKey:a.a.unwrapBKey().optional()}},SIGNED_OUT:{name:c.a.LOGOUT,schema:{uid:a.a.uid().optional()}}},l={},d={};Object.keys(u).forEach(function(e){var t=u[e];l[e]=t.name,d[t.name]=t.schema});var h=s.a.Model.extend({COMMANDS:l,SCHEMATA:d,initialize:function(e){e=e||{},this._internalChannels=[],this._channels=[],e.webChannel&&this._channels.push(e.webChannel),e.tabChannel&&(this._tabChannel=e.tabChannel,this._internalChannels.push(e.tabChannel),this._channels.push(e.tabChannel),this._listen(e.tabChannel))},triggerAll:function(e,t,n){this.triggerRemote(e,t),this.trigger(e,t,n)},triggerRemote:function(e,t){if(t=function(e){return e?r.a.omit(e,r.a.isUndefined):e}(t),d[e]){if(a.a.validate(t,d[e]).error)throw Error("Invalid data for command ".concat(e))}else if(!r.a.isNull(t)&&!r.a.isUndefined(t))throw Error("Unexpected data for command ".concat(e));/^internal:/.test(e)?this._internalChannels.forEach(function(n){n.send(e,t)}):this._channels.forEach(function(n){n.send(e,t)})},_listen:function(e){var t=this;r.a.each(l,function(n){e.on(n,t.trigger.bind(t,n))})}},l);t.a=h},,function(e,t,n){"use strict";n.r(t);var i=n(1);t.default={match:function(e){return"text"===e.attr("type")},validate:function(){var e=void 0!==this.attr("required"),t=this.val();if(e&&!t.length)throw i.a.toError("INPUT_REQUIRED")}}},function(e,t,n){"use strict";function i(e){return e.prop("name")||e.prop("id")}n.r(t),t.default={preinitialize:function(){this.formPrefill=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).formPrefill},initialize:function(){var e=this;this.on("rendered",function(){return e.fillPrefillableValues()})},fillPrefillableValues:function(){var e=this;this.getFormElements&&this.getFormElements().each(function(t,n){var r=e.$(n);if(function(e,t){var n=i(e);return!e.__val()&&"off"!==e.attr("autocomplete")&&n&&!!t.get(n)}(r,e.formPrefill)){var o=i(r);r.val(e.formPrefill.get(o))}})},beforeDestroy:function(){var e=this;this.getFormElements&&this.getFormElements().each(function(t,n){var r=e.$(n),o=i(r);o&&e.formPrefill.set(o,r.__val())})}}},function(e,t,n){"use strict";function i(){}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){if(e&&e.experimentGroupingRules&&e.metrics&&e.notifier&&e.user&&e.window){this.window=e.window;var t=this.window.location.search;this.forceExperiment=p.a.searchParam(m,t),this.forceExperimentGroup=p.a.searchParam(g,t),this._activeExperiments={},this.account=e.account,this.experimentGroupingRules=e.experimentGroupingRules,this.metrics=e.metrics,this.notifier=e.notifier,this.translator=e.translator,this.user=e.user,this.initialized=!!(!this.window.navigator.webdriver&&0>this.window.navigator.userAgent.indexOf(v)||this.forceExperiment)}else this.initialized=!1}n.r(t);var a=n(0),c=n.n(a),u=n(6),l=n.n(u),d=n(89),h=n(37);c.a.extend(i.prototype,l.a.Events,{constructor:i,_name:null,notifications:{},_groupType:null,initialize:function(e,t){return this._initialized=!1,!!(e&&t&&t.groupType&&t.metrics&&t.notifier)&&(this._groupType=t.groupType,this.metrics=t.metrics,this._name=e,this._notifier=t.notifier,this.storage=t.storage||h.a.factory("localStorage"),this._loggingNamespace="experiment.".concat(this._groupType,".").concat(this._name,"."),this._storageNamespace="experiment.".concat(this._name),this._initialized=!0,this.metrics.logExperiment(e,t.groupType),this.saveState("enrolled"),d.a.initialize.call(this,{notifier:t.notifier}),!0)},destroy:function(){this.stopListening()},logEvent:function(e){this._initialized&&e&&this.metrics.logEvent(this._loggingNamespace+e)},saveState:function(e){if(!e)return!1;var t={};try{t=JSON.parse(this.storage.get(this._storageNamespace))||{}}catch(e){}t[e]||this.logEvent(e),t[e]=!0,this.storage.set(this._storageNamespace,JSON.stringify(t))},hasState:function(e){if(!e)return null;var t={};try{t=JSON.parse(this.storage.get(this._storageNamespace))||{}}catch(e){}return!0===t[e]}}),i.createSaveStateDelegate=function(e){return function(){this.saveState(e)}},i.extend=l.a.Model.extend;var f=i,p=n(17),m="forceExperiment",g="forceExperimentGroup",v="FxATester",_={},y=c.a.extend({},_,{emailMxValidation:f,sendSms:f,signupPasswordCWTS:f});c.a.extend(s.prototype,{},{_activeExperiments:{},_startupExperiments:_,_allExperiments:y,destroy:function(){for(var e in this._activeExperiments){this._activeExperiments[e].destroy(),this._activeExperiments[e]=null,delete this._activeExperiments[e]}},isInExperiment:function(e,t){return!!this.getExperimentGroup(e,t)},isInExperimentGroup:function(e,t,n){return this.getExperimentGroup(e,n)===t},chooseExperiments:function(){if(this.initialized)for(var e in this._startupExperiments)this.getAndReportExperimentGroup(e)},createExperiment:function(e,t){if(this._activeExperiments[e])return this._activeExperiments[e];var n=this._allExperiments[e];if(c.a.isFunction(n)){this.notifier.trigger("flow.initialize");var i=new n;if(i.initialize(e,{groupType:t,metrics:this.metrics,notifier:this.notifier}))return this._activeExperiments[e]=i,i}},getExperimentGroup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!!this.initialized&&this.experimentGroupingRules.choose(e,function(e){for(var t=1;arguments.length>t;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({account:this.account,experimentGroupingRules:this.experimentGroupingRules,forceExperiment:this.forceExperiment,forceExperimentGroup:this.forceExperimentGroup,isMetricsEnabledValue:this.metrics.isCollectionEnabled(),uniqueUserId:this.user.get("uniqueUserId")},t))},getAndReportExperimentGroup:function(e,t){var n=this.getExperimentGroup(e,t);return!!n&&(this.createExperiment(e,n),n)}});var w=s,b={initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.experiments=e.experiments||this._createExperimentInterface(e),this.experiments.chooseExperiments()},_createExperimentInterface:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new w({account:function(){return Object(a.isFunction)(this.getAccount)&&this.getAccount()||this._account}.call(this),experimentGroupingRules:e.experimentGroupingRules,metrics:this.metrics,notifier:e.notifier,translator:this.translator,user:e.user,window:this.window})},destroy:function(){this.experiments&&(this.experiments.destroy(),this.experiments=null)}};["getAndReportExperimentGroup","createExperiment","getExperimentGroup","isInExperiment","isInExperimentGroup"].forEach(function(e){b[e]=function(){var t;if(this.experiments)return(t=this.experiments)[e].apply(t,arguments)}});t.default=b},function(e,t){"use strict";var n;!function(e){e.EMAIL="email",e.EMAIL_2FA="email-2fa",e.EMAIL_CAPTCHA="email-captcha",e.TOTP_2FA="totp-2fa"}(n||(n={})),t.a=n},,function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(214);t.default={getResumeToken:function(e){var t,n=e.pickResumeTokenInfo(),i=this.relier.pickResumeTokenInfo(),s=this.user.pickResumeTokenInfo(),a=this.metrics.getFlowModel();a&&(t=a.pickResumeTokenInfo());var c=this.metrics.getSubscriptionModel(),u=r.a.extend({},t,i,s,n,c.pickResumeTokenInfo());return new o.a(u)},getStringifiedResumeToken:function(e){return this.getResumeToken(e).stringify()}}},function(e,t,n){"use strict";n.r(t);t.default=function(){var e=function(){return new Promise(function(){})};return e.halt=!0,e.type="halt",e}},,function(e,t,n){"use strict";n.r(t);t.default=function(){var e=function(){};return e.type="null",e}},function(e,t,n){"use strict";function i(){}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return new e.CustomEvent("WebChannelMessageToChrome",{detail:function(e,t){var n=new y.a(e.navigator.userAgent);return!n.isFirefoxDesktop()&&!n.isFirefoxAndroid()||50>n.browser.version?t:JSON.stringify(t)}(e,t)})}function s(e){if(!e)throw Error("WebChannel must have an id");this._id=e}var a=n(0),c=n.n(a),u=n(1),l=n(4),d=n(108),h=n(73),f=n(21),p=n(6),m=n.n(p),g=n(32),v=n(24);c.a.extend(i.prototype,m.a.Events,{initialize:function(e){this._window=(e=e||{}).window,this._boundReceiveMessage=this.receiveMessage.bind(this),this._window.addEventListener("WebChannelMessageToContent",this._boundReceiveMessage,!0),this._webChannelId=e.webChannelId,this._logger=new g.a(this._window)},receiveMessage:function(e){var t=e.detail;if(c.a.isString(t))try{t=JSON.parse(e.detail)}catch(e){return void this._logger.error("failed parsing WebChannelMessageToContent event",t)}if(t&&t.id){if(t.id===this._webChannelId){var n=t.message;if(n){var i=this._extractErrorFromMessage(n);i?(this._reportError(i),n.error=i,this.trigger("error",n)):this.trigger("message",n)}}}else this._logger.error("malformed WebChannelMessageToContent event",JSON.stringify(t))},_reportError:function(e){this._logger.error("WebChannel error:",e.message),v.d("WebChannel error: "+e.message,{extra:{stackTrace:e.stack}})},_extractErrorFromMessage:function(e){return e.error&&c.a.isString(e.error)?{message:e.error,stack:null}:e.data&&e.data.error?{message:e.data.error.message,stack:e.data.error.stack}:void 0},teardown:function(){this._window.removeEventListener("WebChannelMessageToContent",this._boundReceiveMessage,!0)}});var _=i,y=n(92),w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._window=e.window,this._webChannelId=e.webChannelId}},{key:"send",value:function(e,t,n){var i=this;return Promise.resolve().then(function(){i._saveEventForTests(e,t);var r=function(e,t,n,i){return{id:e,message:{command:t,data:n,messageId:i}}}(i._webChannelId,e,t,n),s=o(i._window,r);i._window.dispatchEvent(s)})}},{key:"teardown",value:function(){}},{key:"_saveEventForTests",value:function(e,t){if(this._window.navigator.webdriver||-1!==this._window.navigator.userAgent.indexOf("FxATester")){var n;try{n=JSON.parse(this._window.sessionStorage.getItem("webChannelEvents"))||[]}catch(e){n=[]}n.push({command:e,data:t});try{this._window.sessionStorage.setItem("webChannelEvents",JSON.stringify(n))}catch(e){}}}}])&&r(t.prototype,n),i&&r(t,i),e}(),b={CAN_LINK_ACCOUNT:"fxaccounts:can_link_account",CHANGE_PASSWORD:"fxaccounts:change_password",DELETE:"fxaccounts:delete",DELETE_ACCOUNT:"fxaccounts:delete_account",FXA_STATUS:"fxaccounts:fxa_status",LOADED:"fxaccounts:loaded",LOGIN:"fxaccounts:login",LOGOUT:"fxaccounts:logout",OAUTH_LOGIN:"fxaccounts:oauth_login",PAIR_AUTHORIZE:"fxaccounts:pair_authorize",PAIR_COMPLETE:"fxaccounts:pair_complete",PAIR_DECLINE:"fxaccounts:pair_decline",PAIR_HEARTBEAT:"fxaccounts:pair_heartbeat",PAIR_PREFERENCES:"fxaccounts:pair_preferences",PAIR_REQUEST_SUPPLICANT_METADATA:"fxaccounts:pair_supplicant_metadata",PROFILE_CHANGE:"profile:change",VERIFIED:"fxaccounts:verified"};c.a.extend(s,b),c.a.extend(s.prototype,new d.a,{COMMANDS:b,initialize:function(){var e=this.window=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window||window,t=this._id,n=this._sender=new w;n.initialize({webChannelId:t,window:e});var i=this._receiver=new _;i.initialize({webChannelId:t,window:e}),d.a.prototype.initialize.call(this,{receiver:i,sender:n,window:e})},isFxaStatusSupported:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getUserAgentString(),t=this.getUserAgent(e);return t.isFirefoxDesktop()&&t.parseVersion().major>=55},onErrorReceived:function(e){var t=this.parseError(e).error;/no such channel/i.test(t&&t.message)&&this.rejectAllOutstandingRequests(u.a.toError("INVALID_WEB_CHANNEL")),d.a.prototype.onErrorReceived.call(this,e)}}),l.a.mixin(s,h.a,f.a);t.a=s},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(4),s=n(2),a=n.n(s),c=n(45),u=n(15),l=n(7),d=n(69),h=n(10),f=n(86),p=n(22),m=n(304),g=n.n(m),v=n(38),_=function(e){return e},y={FORCE_AUTH:{headerId:"fxa-force-auth-complete-header",headerTitle:_("Welcome back"),readyToSyncText:_("Firefox Sync will resume momentarily")},PASSWORD_RESET:{headerId:"fxa-reset-password-complete-header",headerTitle:_("Your password has beenÂ reset"),readyToSyncText:_("Complete set-up by entering the new password on your other Firefox devices.")},PASSWORD_RESET_WITH_RECOVERY_KEY:{headerId:"fxa-reset-password-complete-header",headerTitle:_("Your password has beenÂ reset"),readyToSyncText:_("Complete set-up by entering the new password on your other Firefox devices.")},PRIMARY_EMAIL_VERIFIED:{emailReadyText:_("You are now ready to make changes to your Firefox Account."),headerId:"fxa-sign-up-complete-header",headerTitle:_("Primary email verified")},SECONDARY_EMAIL_VERIFIED:{emailReadyText:_("Account notifications will now also be sent to %(secondaryEmailVerified)s."),headerId:"fxa-sign-up-complete-header",headerTitle:_("Secondary email verified")},SIGN_IN:{headerId:"fxa-sign-in-complete-header",headerTitle:_("Sign-in confirmed"),readyToSyncText:_("You are now ready to use %(serviceName)s")},SIGN_UP:{headerId:"fxa-sign-up-complete-header",headerTitle:_("Account verified"),readyToSyncText:_("You are now ready to use %(serviceName)s")},SUCCESSFUL_OAUTH:{headerId:"fxa-oauth-success-header",headerTitle:_("Connected"),readyToSyncText:_("You are now ready to use %(serviceName)s")}},w=l.default.extend({template:g.a,className:"ready",events:r.a.extend({},l.default.prototype.events,{"click .btn-continue":Object(h.default)("continue"),"click .btn-create-recovery-key":Object(h.default)("createRecoveryKey"),"click .btn-goto-account":Object(h.default)("gotoSettings"),"click .btn-start-browsing":Object(h.default)("gotoProductPage")}),initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._templateInfo=y[this.keyOfVerificationReason(e.type)],this.type=e.type},setInitialContext:function(e){e.set({emailVerified:this.getSearchParam("secondary_email_verified")||this.getSearchParam("primary_email_verified"),escapedEmailReadyText:this._getEscapedEmailReadyText(),escapedHeaderTitle:this._getEscapedHeaderTitle(),escapedReadyToSyncText:this._getEscapedReadyToSyncText(),headerId:this._getHeaderId(),isPasswordReset:this.isPasswordReset(),isSync:this.relier.isSync(),secondaryEmailVerified:this.getSearchParam("secondary_email_verified")||null,showContinueButton:!!this.model.get("continueBrokerMethod")})},continue:function(){var e=this;return Promise.resolve().then(function(){var t=e.model.toJSON(),n=t.account,i=t.continueBrokerMethod;if(i&&n)return e.invokeBrokerMethod(i,n)}).catch(function(t){return e.displayError(t)})},createRecoveryKey:function(){this.navigate("settings/account_recovery/confirm_password")},gotoProductPage:function(){this.window.location.href="https://www.mozilla.org/firefox/accounts"},gotoSettings:function(){this.navigate("settings")},isPasswordReset:function(){return"reset_password_with_recovery_key"===this.type},_getHeaderId:function(){return this._templateInfo.headerId},_getEscapedHeaderTitle:function(){return this.translateInTemplate(this._templateInfo.headerTitle)},_getEscapedReadyToSyncText:function(){return this.translateInTemplate(this._templateInfo.readyToSyncText)},_getEscapedEmailReadyText:function(){return this.translateInTemplate(this._templateInfo.emailReadyText)}});o.a.mixin(w,c.default,u.default,Object(d.default)({marketingId:a.a.MARKETING_ID_SPRING_2015}),f.default,p.default,v.default),t.default=w},function(e,t,n){"use strict";function i(e,t){return new Promise(function(n){e.setTimeout(n,t)})}n.r(t);var r=n(115);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"button[type=submit]",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(){for(var o=this,s=arguments.length,a=Array(s),c=0;s>c;c++)a[c]=arguments[c];var u=this.$(t),l=parseInt(u.data("minProgressIndicatorMs")||0,10),d=function(e,t){var n=t.data("progressIndicator");return n||(n=new r.default,e.trackChildView(n),t.data("progressIndicator",n)),n}(this,u);d.start(u);var h=Date.now();return i(d,n).then(function(){return o.invokeHandler(e,a)}).then(function(e){var t=Date.now()-h;return i(d,Math.max(l-t,0)).then(function(){return e&&e.halt||d.done(),e})},function(e){throw d.done(),e})}}},function(e,t,n){"use strict";n.r(t);var i=n(48);t.default={dependsOn:[i.default],resetPassword:function(e){var t=this,n=this.user.initAccount({email:e});return n.resetPassword(this.relier,{resume:this.getStringifiedResumeToken(n)}).then(function(n){return t.navigate("confirm_reset_password",{email:e,passwordForgotToken:n.passwordForgotToken},{clearQueryParams:!0}),n})},retryResetPassword:function(e,t){var n=this.user.initAccount({email:e});return n.retryResetPassword(t,this.relier,{resume:this.getStringifiedResumeToken(n)})}}},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(13),o=n(19),s=n(48),a=n(46),c=n(16);t.default={dependsOn:[s.default],signIn:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!e||e.isDefault()||!e.has("sessionToken")&&!t?Promise.reject(i.a.toError("UNEXPECTED_ERROR")):this.invokeBrokerMethod("beforeSignIn",e).then(function(){n.logFlowEvent("attempt","signin");var i=a.a.EMAIL_2FA;return n.relier.isOAuth()&&n.relier.wantsTwoStepAuthentication()&&(i=a.a.TOTP_2FA),e.has("sessionToken")&&!n.broker.hasCapability("reuseExistingSession")&&e.discardSessionToken(),n.user.signInAccount(e,t,n.relier,{resume:n.getStringifiedResumeToken(e),unblockCode:o.unblockCode,verificationMethod:i})}).then(function(e){return n.formPrefill&&n.formPrefill.clear(),n.relier.accountNeedsPermissions(e)?n.navigate("signin_permissions",{account:e,onSubmitComplete:n.onSignInSuccess.bind(n)}):n.relier.shouldOfferToSync(n.viewName)?n.navigate("would_you_like_to_sync",{account:e,skipCWTS:!0,onSubmitComplete:n.onSignInSuccess.bind(n)}):("function"==typeof o.onSuccess&&o.onSuccess(),n.onSignInSuccess(e))}).catch(function(o){if(i.a.is(o,"THROTTLED")||i.a.is(o,"REQUEST_BLOCKED"))return n.onSignInBlocked(e,t,o);if(i.a.is(o,"EMAIL_HARD_BOUNCE")||i.a.is(o,"EMAIL_SENT_COMPLAINT"))return n.navigate("signin_bounced",{email:e.get("email")});if(i.a.is(o,"TOTP_REQUIRED")||r.a.is(o,"MISMATCH_ACR_VALUES"))return o.forceMessage="This request requires two step authentication enabled on your account. <a target=\"_blank\" href='https://support.mozilla.org/kb/secure-firefox-account-two-step-authentication'>More Information</a>",n.unsafeDisplayError(o);throw o})},onSignInBlocked:function(e,t,n){var i=this;return n.verificationReason===c.a.SIGN_IN&&n.verificationMethod===a.a.EMAIL_CAPTCHA?e.sendUnblockEmail().then(function(){return i.navigate("signin_unblock",{account:e,lastPage:i.currentPage,password:t})}):Promise.reject(n)},onSignInSuccess:function(e){if(!e.get("verified")){var t=e.get("verificationMethod"),n=e.get("verificationReason");return this.navigate(n===c.a.SIGN_IN&&t===a.a.EMAIL?"confirm_signin":n===c.a.SIGN_IN&&t===a.a.EMAIL_2FA?"signin_token_code":n===c.a.SIGN_IN&&t===a.a.TOTP_2FA?"signin_totp_code":"confirm",{account:e})}e.get("uid")!==this.relier.get("uid")&&this.broker.hasCapability("allowUidChange")?this.relier.set("uid",e.get("uid")):e.get("email")!==this.relier.get("email")&&(this.relier.set("email",e.get("email")),this.relier.set("uid",e.get("uid"))),this.logEvent("signin.success"),this.logEvent("signin.success.skip-confirm"),this.logViewEvent("signin.success");var i=this.afterSignInBrokerMethod||"afterSignIn",r=this.afterSignInNavigateData||{};if(this.relier.get("redirectTo")){var s=new o.default(this.relier.get("redirectTo"));this.relier.unset("redirectTo"),this.broker.setBehavior(i,s,r)}return this.invokeBrokerMethod(i,e)}}},function(e,t,n){"use strict";var i=n(1),r=n(74),o=n(214),s=n(3);t.a={pickResumeTokenInfo:function(){if(this.resumeTokenFields)return this.pick(this.resumeTokenFields)},populateFromStringifiedResumeToken:function(e){if(this.resumeTokenFields){var t=o.a.createFromStringifiedResumeToken(e);this.populateFromResumeToken(t)}},populateFromResumeToken:function(e){if(this.resumeTokenFields){var t=e.pick(this.resumeTokenFields),n=function(e){if(this.resumeTokenSchema)return s.a.validate(e,this.resumeTokenSchema).error}.call(this,t);if(n)return function(e){e=e instanceof ReferenceError?i.a.toMissingResumeTokenPropertyError(e.key):i.a.toInvalidResumeTokenPropertyError(e.key),r.a.captureError(e,this.sentryMetrics)}.call(this,n);this.set(t)}}}},function(e,t,n){"use strict";var i=n(0),r=n(73),o=n(76);t.a={dependsOn:[r.a],importSearchParamsUsingSchema:function(e,t){var n=this.getSearchParams(Object.keys(e));this.importFromObjectUsingSchema(n,e,t)},importHashParamsUsingSchema:function(e,t){var n=this.getHashParams(Object.keys(e));this.importFromObjectUsingSchema(n,e,t)},importFromObjectUsingSchema:function(e,t,n){var r=Object(i.pick)(e,Object.keys(t)),s=o.a.transformUsingSchema(r,t,n);this.set(s)}}},,function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(72),s=function(e){return e},a=s("You've tried too many times. Try again later."),c={UNAUTHORIZED:{errno:100,message:s("Unauthorized")},INVALID_PARAMETER:{errno:101,message:s("Invalid parameter in request body: %(param)s")},UNSUPPORTED_PROVIDER:{errno:102,message:s("Unsupported image provider")},IMAGE_PROCESSING_ERROR:{errno:103,message:s("Image processing error")},OAUTH_ERROR:{errno:104,message:s("System unavailable, try again soon")},AUTH_ERROR:{errno:105,message:s("System unavailable, try again soon")},INVALID_TOKEN:{errno:110,message:s("Invalid Token")},THROTTLED:{errno:114,message:a},REQUEST_BLOCKED:{errno:125,message:s("The request was blocked for security reasons")},IMAGE_LOAD_ERROR:{errno:997,message:s("Unexpected error")},SERVICE_UNAVAILABLE:{errno:998,message:s("System unavailable, try again soon")},UNEXPECTED_ERROR:{errno:999,message:s("Unexpected error")}};t.a=r.a.extend({},o.a,{ERRORS:c,NAMESPACE:"profile"})},function(e,t,n){var i,r;!function(){"use strict";void 0===(r="function"==typeof(i=function(){function e(e){this.window=e}return e.prototype={hasGetUserMedia:function(){var e=this.window.navigator;return!!(e.mediaDevices||e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia)},hasPasswordRevealer:function(){var e=this.window.document;return!(!e.documentMode||10>e.documentMode)},hasTouchEvents:function(){var e=this.window;
/*!
       * This code comes from Modernizr v2.7.1
       * www.modernizr.com
       *
       * Copyright (c) Faruk Ates, Paul Irish, Alex Sexton
       * Available under the BSD and MIT licenses: www.modernizr.com/license/
       */
return!!("ontouchstart"in e||e.DocumentTouch&&e.document instanceof e.DocumentTouch)},isFxiOS:function(){return/FxiOS/.test(this.window.navigator.userAgent)},hasSendBeacon:function(){return"function"==typeof this.window.navigator.sendBeacon}},e})?i.call(t,n,t,e):i)||(e.exports=r)}(window)},function(e,t,n){"use strict";n.r(t);var i=n(45),r=n(21),o=n(38);t.default={dependsOn:[i.default,r.a,o.default],isEligibleForConnectAnotherDevice:function(e){return!this.user.isAnotherAccountSignedIn(e)},navigateToConnectAnotherDeviceScreen:function(e){var t=this;return Promise.resolve().then(function(){if(!t.isEligibleForConnectAnotherDevice(e))throw Error("chooseConnectAnotherDeviceScreen can only be called if user is eligible to connect another device");var n=t.model.get("type");t.navigate("connect_another_device",{account:e,showSuccessMessage:!0,type:n})})},replaceCurrentPageWithSmsScreen:function(e,t,n){var i=this.model.get("type");this.replaceCurrentPage("sms",{account:e,country:t,showSuccessMessage:n,type:i})},getEligibleSmsCountry:function(e){var t=this;return this.notifier.trigger("flow.initialize"),this._isEligibleForSms(e).then(function(n){var i=n.country;if(i){var r=t.getAndReportExperimentGroup("sendSms",{account:e,country:i});if(r){if(!0===r)return i;if("control"!==r)return i;t.logFlowEvent("sms.ineligible.control_group")}else t.logFlowEvent("sms.ineligible.not_in_experiment")}})},_isEligibleForSms:function(e){return Promise.resolve(this._areSmsRequirementsMet(e)&&this._smsCountry(e)).then(function(e){return{country:e,ok:!!e}})},_areSmsRequirementsMet:function(e){var t;return this.getUserAgent().isAndroid()?t="sms.ineligible.android":this.getUserAgent().isIos()?t="sms.ineligible.ios":e&&e.get("sessionToken")?this.user.isAnotherAccountSignedIn(e)&&(t="sms.ineligible.other_user_signed_in"):t="sms.ineligible.no_session",t&&this.logFlowEvent(t),!t},_smsCountry:function(e){var t=this;return e.smsStatus(this.relier.pick("country")).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.country&&t.logFlowEvent("sms.status.country.".concat(e.country)),e.ok)return e.country||"US";t.logFlowEvent("sms.ineligible.unsupported_country")},function(e){e.context="".concat(t.getViewName(),".smsStatus"),t.logError(e),t.logFlowEvent("sms.ineligible.xhr_error")})}}},function(e){function t(e){return function(t){return e.replace(/\$\{serverPhoneNumber\}/,t)}}function n(e){return function(t){return function(e,t){return 0===e.indexOf(t)}(t,e)?t:"".concat(e).concat(t)}}e.exports={AT:{format:t("+43 ${serverPhoneNumber}"),normalize:n("+43"),pattern:/^(?:\+43)?\d{6,}$/,prefix:"+43",rolloutRate:1},AU:{format:t("+61 ${serverPhoneNumber}"),normalize:n("+61"),pattern:/^(?:\+61\d{9}|\d{10})$/,prefix:"+61",rolloutRate:1},BE:{format:t("+32 ${serverPhoneNumber}"),normalize:n("+32"),pattern:/^(?:\+32\d{9}|\d{10})$/,prefix:"+32",rolloutRate:1},DE:{format:t("+49 ${serverPhoneNumber}"),normalize:n("+49"),pattern:/^(?:\+49)?\d{6,13}$/,prefix:"+49",rolloutRate:1},DK:{format:t("+45 ${serverPhoneNumber}"),normalize:n("+45"),pattern:/^(?:\+45)?\d{8}$/,prefix:"+45",rolloutRate:1},ES:{format:t("+34 ${serverPhoneNumber}"),normalize:n("+34"),pattern:/^(?:\+34)?\d{9}$/,prefix:"+34",rolloutRate:1},FR:{format:t("+33 ${serverPhoneNumber}"),normalize:n("+33"),pattern:/^(?:\+33\d{9}|\d{10})$/,prefix:"+33",rolloutRate:1},GB:{format:t("+44 ${serverPhoneNumber}"),normalize:n("+44"),pattern:/^(?:\+44\d{10}|\d{11})$/,prefix:"+44",rolloutRate:1},IT:{format:t("+39 ${serverPhoneNumber}"),normalize:n("+39"),pattern:/^(?:\+39)?\d{9,10}$/,prefix:"+39",rolloutRate:1},LU:{format:t("+352 ${serverPhoneNumber}"),normalize:n("+352"),pattern:/^(?:\+352)?\d{9}$/,prefix:"+352",rolloutRate:0},NL:{format:t("+31 ${serverPhoneNumber}"),normalize:n("+31"),pattern:/^(?:\+31)?\d{4,}$/,prefix:"+31",rolloutRate:1},PT:{format:t("+351 ${serverPhoneNumber}"),normalize:n("+351"),pattern:/^(?:\+351)?\d{9}$/,prefix:"+351",rolloutRate:1},RO:{format:t("+40 ${serverPhoneNumber}"),normalize:function(e){var t=/^(\+40)?0?/;return t.test(e)&&(e=e.replace(t,"")),"+40".concat(e)},pattern:/^(?:\+40)?0?7\d{8,8}$/,prefix:"+40",rolloutRate:1},US:{format:function(e){return e},normalize:function(e){return/^\+1/.test(e)?e:/^1/.test(e)&&11===e.length?"+".concat(e):"+1".concat(e)},pattern:/^(\+?1)?[2-9]\d{9,9}$/,prefix:"+1",rolloutRate:1}},e.exports.CA=e.exports.US},function(e,t,n){"use strict";function i(){return n.e(24).then(n.t.bind(null,368,7))}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(219),s=n(60),a=r.a.Model.extend({defaults:{default:void 0,id:void 0,img:void 0,url:void 0},fetch:function(){var e=this;return this.has("url")?o.a.load(this.get("url")).then(function(t){return e.set("img",t)},function(){var t=s.a.toError("IMAGE_LOAD_ERROR");return t.context=e.get("url"),Promise.reject(t)}):Promise.resolve()},isDefault:function(){return!(this.has("url")&&this.has("id")&&this.has("img"))}});t.a=a},,function(e,t,n){"use strict";function i(e){return new Promise(function(t,n){e.then(function(e){return t(e)},function(e){return n(e)})})}var r=n(5),o=n.n(r),s=n(0),a=n.n(s),c="application/json";t.a={ajax:function(e){return"json"===e.dataType&&(e.contentType||(e.contentType=c),function(e){return!(!e.data||!1===e.processData||e.contentType!==c)}(e)&&(e.data=JSON.stringify(e.data)),e.accepts||(e.accepts={}),e.accepts.json=c),i(o.a.ajax(e))},oauthAjax:function(e){var t={contentType:e.contentType||c,dataType:"json",headers:{Accept:c,Authorization:"Bearer ".concat(e.accessToken)},timeout:e.timeout,type:e.type,url:e.url};e.headers&&a.a.extend(t.headers,e.headers);var n=e.data;return n&&(t.data=n),"undefined"!=typeof Blob&&n instanceof Blob&&(t.processData=!1),this.ajax(t)},get:function(e,t,n,i){return i||(i="json"),this.ajax({data:t,dataType:i,method:"GET",success:n,url:e})},post:function(e,t,n,i){return i||(i="json"),this.ajax({data:t,dataType:i,method:"POST",success:n,url:e})},getJSON:function(e,t,n){return i(o.a.getJSON(e,t,n))}}},function(e,t,n){"use strict";n.r(t);var i=function(e){return e};t.default={setInitialContext:function(e){e.set({lastCheckedTime:this.getLastCheckedTimeString()})},setLastCheckedTime:function(e){e||(e=new Date),this.lastCheckedTime=e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},getLastCheckedTimeString:function(){var e=i("none");return this.lastCheckedTime&&(e=this.lastCheckedTime),this.translate(i("Last checked: %(lastCheckTime)s"),{lastCheckTime:e})}}},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(129);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{createMarketingSnippet:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.a.extend({broker:this.broker,el:this.$(".marketing-area"),lang:this.lang,metrics:this.metrics,notifier:this.notifier,service:this.relier.get("service"),type:this.model.get("type"),window:this.window},e,t),i=new o.default(n);return this.trackChildView(i),i.render()},afterRender:function(){if(!1!==e.autocreate)return this.createMarketingSnippet()}}}},function(e,t,n){"use strict";n.r(t);var i=n(41),r={notifications:{},_navigateToSignedInView:function(e){return this.broker.hasCapability("handleSignedInNotification")&&(this.user.setSignedInAccountByUid(e.uid),this.navigate(this.relier.get("redirectTo")||"settings")),Promise.resolve()}};r.notifications[i.a.SIGNED_IN]="_navigateToSignedInView",t.default=r},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t);var u=n(1),l=n(6),d=n.n(l),h=n(2),f=function(){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=o(this,a(e).call(this,i,t)),!i.account)throw Error("options.account required");return n._account=i.account,n._pollIntervalInMS=i.pollIntervalInMS||h.VERIFICATION_POLL_IN_MS,n._window=i.window,n}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(e,d.a.Model),t=e,(n=[{key:"destroy",value:function(){this.stop(),s(a(e.prototype),"destroy",this).call(this)}},{key:"start",value:function(){this._isWaiting||(this._isWaiting=!0,this._poll())}},{key:"stop",value:function(){this._pollTimeout&&(this._window.clearTimeout(this._pollTimeout),this._pollTimeout=null),this._isWaiting=!1}},{key:"_poll",value:function(){var e=this;this._isWaiting&&this._account.sessionStatus().then(function(t){return e._onStatusComplete(t)},function(t){return e._onStatusError(t)})}},{key:"_onStatusComplete",value:function(e){var t=this;this._isWaiting&&(e.verified?(this.trigger("verified"),this._pollTimeout=null,this.stop()):this._pollTimeout=this._window.setTimeout(function(){return t._poll()},this._pollIntervalInMS))}},{key:"_onStatusError",value:function(e){var t=this;u.a.is(e,"INVALID_TOKEN")&&this._account.has("uid")?this._account.checkUidExists().then(function(n){n||(e=u.a.toError("SIGNUP_EMAIL_BOUNCE")),t.trigger("error",e),t.stop()}):(this.trigger("error",e),this.stop())}}])&&r(t.prototype,n),i&&r(t,i),e}(),p=n(38);t.default={dependsOn:[p.default],VERIFICATION_POLL_IN_MS:h.VERIFICATION_POLL_IN_MS,initialize:function(){this._sessionVerificationPoll=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).sessionVerificationPoll},beforeDestroy:function(){this._sessionVerificationPoll&&(this._sessionVerificationPoll.destroy(),this._sessionVerificationPoll=null)},waitForSessionVerification:function(e,t){var n=this,i=this.getSessionVerificationPoll(e);this.listenTo(i,"verified",t),this.listenTo(i,"error",function(t){return n._handleSessionVerificationPollErrors(e,t)}),i.start()},getSessionVerificationPoll:function(e){return this._sessionVerificationPoll||(this._sessionVerificationPoll=new f({},{account:e,pollIntervalInMS:this.VERIFICATION_POLL_IN_MS,window:this.window})),this._sessionVerificationPoll},_handleSessionVerificationPollErrors:function(e,t){var n=this;u.a.is(t,"SIGNUP_EMAIL_BOUNCE")||u.a.is(t,"INVALID_TOKEN")?(e.set("hasBounced",!0),this.isSignUp()?this.replaceCurrentPage("/",{account:e}):this.replaceCurrentPage("signin_bounced",e.pick("email"))):u.a.is(t,"UNEXPECTED_ERROR")||u.a.is(t,"BACKEND_SERVICE_FAILURE")?(this.logError(u.a.toError("POLLING_FAILED")),this.setTimeout(function(){return n.getSessionVerificationPoll(e).start()},this.VERIFICATION_POLL_IN_MS)):this.displayError(t)}}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(29);t.a={find:function(e){var t;if(void 0!==e&&null!==e)return"number"==typeof e.errno?t=this.find(e.errno):"number"==typeof e?t=r.a.find(this.ERRORS,function(t){return t.errno===e}):"string"==typeof e&&(t=this.ERRORS[e]),t},toMessage:function(e){if(!e)return this.toMessage("SERVICE_UNAVAILABLE");if(e.forceMessage)return e.forceMessage;if(e.message)return e.message;var t=this.find(e);return t&&t.message?t.message:"string"!=typeof e?this.toMessage("UNEXPECTED_ERROR"):e},toInterpolatedMessage:function(e,t){var n=this.toMessage(e),i=this.toInterpolationContext(e);return t?t.get(n,i):o.a.interpolate(n,i)},toInterpolationContext:function(){return{}},toErrno:function(e){var t=this.find(e);return t&&t.errno?t.errno:e},toError:function(e,t){var n=this.toErrno(e),i=this.toMessage(n),o=r.a.isString(i)?Error(i):i,s=this.find(n);return r.a.isObject(s)&&r.a.extendOwn(o,s),r.a.isObject(e)&&r.a.extendOwn(o,e),o.errno=n,o.message=i,o.namespace=this.NAMESPACE,o.errorModule=this,t&&(o.context=t),o},toInvalidParameterError:function(e){var t=this.toError("INVALID_PARAMETER");return t.param=e,t},toMissingParameterError:function(e){var t=this.toError("MISSING_PARAMETER");return t.param=e,t},toInvalidResumeTokenPropertyError:function(e){var t=this.toError("INVALID_RESUME_TOKEN_PROPERTY");return t.property=e,t},toMissingResumeTokenPropertyError:function(e){var t=this.toError("MISSING_RESUME_TOKEN_PROPERTY");return t.property=e,t},toInvalidDataAttributeError:function(e){var t=this.toError("INVALID_DATA_ATTRIBUTE");return t.property=e,t},toMissingDataAttributeError:function(e){var t=this.toError("MISSING_DATA_ATTRIBUTE");return t.property=e,t},toInvalidEmailDomainError:function(e){var t=this.toError("INVALID_EMAIL_DOMAIN");return t.domain=e,t},is:function(e,t){var n=this.toErrno(t);return e.errno===n},created:function(e){return e.namespace===this.NAMESPACE},normalizeXHRError:function(e){var t;"status"in(t=this.toError(e&&0!==e.status?e.responseJSON?e.responseJSON:503===e.status?"SERVICE_UNAVAILABLE":429===e.status?"THROTTLED":"UNEXPECTED_ERROR":"SERVICE_UNAVAILABLE"))||(t.status=e&&e.status||0);return t}}},function(e,t,n){"use strict";var i=n(17);t.a={getSearchParam:function(e){return i.a.searchParam(e,this.window.location.search)},getSearchParams:function(e){return i.a.searchParams(this.window.location.search,e)},getHashParams:function(e){return i.a.hashParams(this.window.location.hash,e)},getPathname:function(){return this.window.location.pathname}}},function(e,t,n){"use strict";var i=n(1),r=n(213),o=n(259),s=n.n(o),a=n(260),c=n.n(a),u=n(32),l=n(13);t.a={getErrorPageTemplate:function(e){return i.a.is(e,"INVALID_PARAMETER")||i.a.is(e,"MISSING_PARAMETER")||i.a.is(e,"USER_CANCELED_LOGIN")||l.a.is(e,"INCORRECT_REDIRECT")||l.a.is(e,"INVALID_PARAMETER")||l.a.is(e,"INVALID_PAIRING_CLIENT")||l.a.is(e,"MISSING_PARAMETER")||l.a.is(e,"UNKNOWN_CLIENT")||l.a.is(e,"PROMPT_NONE_NOT_ENABLED")||l.a.is(e,"PROMPT_NONE_NOT_ENABLED_FOR_CLIENT")||l.a.is(e,"PROMPT_NONE_WITH_KEYS")||l.a.is(e,"PROMPT_NONE_NOT_SIGNED_IN")||l.a.is(e,"PROMPT_NONE_DIFFERENT_USER_SIGNED_IN")||l.a.is(e,"PROMPT_NONE_UNVERIFIED")?c.a:s.a},captureError:function(e,t,n,i){new u.a(i).error(e);try{e.message=this.getErrorMessage(e)}catch(e){}t.captureException(e),n&&n.logError(e)},captureAndFlushError:function(e,t,n,i){return this.captureError(e,t,n,i),Promise.resolve().then(function(){if(n)return n.flush()})},renderError:function(e,t,n){var i=this.getErrorPageTemplate(e)({message:this.getErrorMessage(e,n),t:function(e){return e?e.translateInTemplate.bind(e):function(){return function(e){return e}}}(n)});r.a.write(t,i)},fatalError:function(e,t,n,i,r){return Promise.all([this.captureAndFlushError(e,t,n,i),this.renderError(e,i,r)])},getErrorMessage:function(e,t){return e&&e.errorModule?e.errorModule.toInterpolatedMessage(e,t):e.message}}},,function(e,t,n){"use strict";var i=n(3);t.a={transformUsingSchema:function(e,t,n){var r=i.a.validate(e,t),o=r.error;if(o instanceof ReferenceError)throw n.toMissingParameterError(o.key);if(o instanceof TypeError)throw n.toInvalidParameterError(o.key);return r.value}}},,,function(e,t,n){"use strict";n.r(t);var i=n(21);t.default={dependsOn:[i.a],getGraphicsId:function(){return this.getUserAgent().supportsSvgTransformOrigin()?"graphic-connect-another-device-hearts":"graphic-connect-another-device"}}},function(e,t,n){"use strict";n.r(t);var i=n(262),r=n.n(i);t.default={initialize:function(){var e=r()({});this.writeToDOM(e)}}},function(e,t,n){"use strict";n.r(t),t.default=function(e){return function(){var t=this,n=arguments;return this._isSubmitting?Promise.resolve().then(function(){throw Error("submit already in progress")}):(this._isSubmitting=!0,Promise.resolve().then(function(){return t.invokeHandler(e,n)}).then(function(e){return t._isSubmitting=!1,e},function(e){throw t._isSubmitting=!1,e}))}}},function(e,t,n){"use strict";n.r(t);var i=n(5),r=n.n(i),o=n(0),s=n.n(o),a=n(11),c=n(4),u=n(23),l=n(116),d=n(217),h=a.default.prototype,f=a.default.extend({tagName:"aside",className:"tooltip",type:"generic",initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.message=e.message||"",this.unsafeMessage=e.unsafeMessage||"",this.dismissible=e.dismissible||!1,this.extraClassNames=e.extraClassNames||"",this.invalidEl=r()(e.invalidEl)},template:function(){return this.message?this.translate(this.message):this.unsafeMessage?this.unsafeTranslate(this.unsafeMessage):""},afterRender:function(){var e=this.invalidEl.closest(".input-row");return this.$el.addClass(this.extraClassNames),this.$el.appendTo(e),this.setPosition(),this.dismissible&&this.$el.append('<span class="dismiss" tabindex="2">&#10005;</span>'),this.bindDOMEvents(),h.afterRender.call(this)},removeAndDestroy:function(){this.destroy(!0)},beforeDestroy:function(){var e=this.invalidEl;e.off("keyup change",this._destroy),e.find("option").off("click",this._destroy)},canShowTooltipBelow:function(){var e=new d.a(this.window);return e.clientHeight>=480&&e.clientWidth>=520},setPosition:function(){var e=this.$el,t=this.invalidEl;t.hasClass("tooltip-below")&&this.canShowTooltipBelow()?(e.addClass("tooltip-below fade-up-tt"),e.css({top:t.outerHeight()+4})):(e.css({top:-e.outerHeight()-2}),e.addClass("fade-down-tt"))},bindDOMEvents:function(){var e=this.invalidEl;this._destroy=s.a.bind(this.destroy,this,!0),e.one("change",this._destroy);var t=r()(e).val().trim(),n=function(){r()(e).val().trim()!==t?this._destroy():e.one("keyup",n)}.bind(this);e.one("keyup",n),e.find("option").one("click",this._destroy),this.$el.find(".dismiss").one("click keypress",function(e){"click"!==e.type&&e.which!==u.a.ENTER||(this.logEvent("tooltip."+this.type+"-dismissed"),this._destroy())}.bind(this))}});c.a.mixin(f,Object(l.default)({hideMethod:"removeAndDestroy",showMethod:"afterRender",viewType:"tooltip"})),t.default=f},function(e,t,n){"use strict";n.r(t);var i=n(10),r=n(41),o=n(68),s=n(179),a=n(28),c=n(266),u=n.n(c),l=n(54),d=function(e){return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{dependsOn:[o.default,a.default,s.default],events:{"click .cancel-verification-email":Object(i.default)("_clickCancelVerificationEmail"),"click .refresh-verification-state":Object(i.default)("_clickRefreshVerificationState"),"click .send-verification-email":Object(i.default)("_clickSendVerificationEmail")},initialize:function(){this.gatedTemplate=this.template},_clickRefreshVerificationState:Object(l.default)(function(){var e=this;return this.setupSessionGateIfRequired().then(function(t){e.setLastCheckedTime(),t&&(e.displaySuccess(d("Primary email verified successfully"),{closePanel:!1}),e.notifier.triggerAll(r.a.SESSION_VERIFIED)),e.render()})},"button.settings-button.refresh-verification-state",350),_clickSendVerificationEmail:function(){var e=this;return this.getSignedInAccount().requestVerifySession({redirectTo:this.window.location.href}).then(function(){return e.setLastCheckedTime(),e.displaySuccess(d("Verification email sent"),{closePanel:!1}),e.model.set({emailSent:!0}),e.render()})},_clickCancelVerificationEmail:function(){this.closePanel(),this.navigate("/settings"),this.$(".send-verification-email").removeClass("hidden"),this.$(".cancel-verification-email").addClass("hidden")},setInitialContext:function(t){t.set({email:this.getSignedInAccount().get("email"),emailSent:this.model.get("emailSent"),gatedHref:e.gatedHref,isPanelOpen:this.isPanelOpen(),title:this.translate(e.title)})},setupSessionGateIfRequired:function(){var e=this;return this.getSignedInAccount().sessionVerificationStatus().then(function(t){var n=t.sessionVerified;return e.template=n?e.gatedTemplate:u.a,n})}}}},function(e,t,n){"use strict";n.r(t);var i=n(15),r=n(10);t.default={dependsOn:[i.default],events:{"click #do-not-sync-device":Object(r.default)("doNotSync")},doNotSync:function(){var e=this;return this.disableSync(),Promise.resolve().then(function(){var t=e.getAccount();return e.onSubmitComplete(t)})},disableSync:function(){this.relier.set("syncPreference",!1),this.logFlowEvent("cwts_do_not_sync",this.viewName)},enableSync:function(){this.relier.set("syncPreference",!0)}}},function(e,t,n){"use strict";n.r(t);var i=n(41),r=n(33),o=n(17),s={notifications:{},clearSessionAndNavigateToSignIn:function(){this.user.clearSignedInAccountUid(),r.a.clear(),this.navigateToSignIn()},navigateToSignIn:function(){var e=o.a.objToSearchString({context:this.relier.get("context"),entrypoint:this.relier.get("entrypoint"),entrypoint_experiment:this.relier.get("entrypointExperiment"),entrypoint_variation:this.relier.get("entrypointVariation"),service:this.relier.get("service"),utm_campaign:this.relier.get("utmCampaign"),utm_content:this.relier.get("utmContent"),utm_medium:this.relier.get("utmMedium"),utm_source:this.relier.get("utmSource"),utm_term:this.relier.get("utmTerm")});this.navigateAway("/signin".concat(e))}};s.notifications[i.a.SIGNED_OUT]="clearSessionAndNavigateToSignIn",t.default=s},function(e,t,n){"use strict";n.r(t),t.default={afterRender:function(){this.$(".graphic").addClass("pulse")}}},function(e,t,n){"use strict";n.r(t),t.default={initialize:function(){this._createView=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).createView},showChildView:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$(".child-view").append("<div>"),n.el=this.$(".child-view > div");var i=this._createView(e,n);return i.render().then(function(){return t.trackChildView(i)})}}},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t);var u=n(0),l=n(1),d=n(6),h=n(2),f=["addons","firefox","fxaccount","firefox account","firefoxaccount","fxsync","firefox sync","firefoxsync","lockbox","fxlockbox","mozilla","sumo","sync"].sort(function(e,t){return t.length-e.length}),p=/^(?:firefox|mozilla)\.(?:com|org)$/,m=function(){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=Object(u.assign)({email:"",hasUserTakenAction:!1,isVisible:!1,password:null},n);return(t=s(this,a(e).call(this,r,i))).on("change:password",function(){return t.set("hasUserTakenAction",!0)}),t.on("change:password",function(){return t.isValid()}),t}var t,i,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(e,d["Model"]),t=e,(i=[{key:"_getCommonPasswordList",value:function(){return n.e(22).then(n.t.bind(null,410,7))}},{key:"fetch",value:function(){var e=this;return this._getCommonPasswordList().then(function(t){e.commonPasswordList=t})}},{key:"isSameAsEmail",value:function(e){var t=this.get("email").toLowerCase();return this.doesPasswordContainFullEmail(e,t)||this.isPasswordSubstringOfEmail(e,t)||this.isPasswordMostlyLocalPartOfEmail(e,t)}},{key:"doesPasswordContainFullEmail",value:function(e,t){return-1!==e.indexOf(t)}},{key:"isPasswordSubstringOfEmail",value:function(e,t){return-1!==t.indexOf(e)}},{key:"isPasswordMostlyLocalPartOfEmail",value:function(e,t){var n=r(t.split("@"),1);return this.isPasswordMostlyWord(e,n[0])}},{key:"isPasswordMostlyWord",value:function(e,t){return 2*t.length>=e.length&&-1!==e.indexOf(t)}},{key:"isPasswordMostlyCommonServiceName",value:function(e){var t=Object(u.find)(f,function(t){return-1!==e.indexOf(t)});if(t)return this.isPasswordMostlyWord(e,t)}},{key:"isCommon",value:function(e,t){return e.test(t)||this.isPasswordMostlyCommonServiceName(t)||p.test(t)}},{key:"validate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.hasUserTakenAction||e.password){var t=(e.password||"").toLowerCase();return t?h.PASSWORD_MIN_LENGTH>t.length?l.a.toError("PASSWORD_TOO_SHORT"):this.isSameAsEmail(t)?l.a.toError("PASSWORD_SAME_AS_EMAIL"):this.isCommon(this.commonPasswordList,t)?l.a.toError("PASSWORD_TOO_COMMON"):void 0:l.a.toError("PASSWORD_REQUIRED")}}}])&&o(t.prototype,i),m&&o(t,m),e}(),g=n(182);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.delayBeforeLogReasonMS||1500,n=e.balloonEl,i=e.passwordEl;return{afterRender:function(){var e=this;return Promise.resolve().then(function(){if(e.$(i).length){var n=e.passwordModel=e._createPasswordStrengthBalloonModel();return e.listenTo(n,"invalid",Object(u.debounce)(function(){return e._logErrorIfInvalid()},t)),n.fetch().then(function(){var t=e._createPasswordWithStrengthBalloonView(e.passwordModel);e.trackChildView(t)})}})},_createPasswordStrengthBalloonModel:function(){return new m({email:this.getAccount().get("email")})},_createPasswordWithStrengthBalloonView:function(e){return new g.default({balloonEl:this.$(n),el:this.$(i),lang:this.lang,model:e,translator:this.translator})},_logErrorIfInvalid:function(){var e=this.passwordModel.validationError;e&&this.logError(e)}}}},function(e,t,n){"use strict";function i(e){var t=e.notifier;this._consumer=e.consumer,this._notifier=t,this.delegateNotifications()}var r=n(0),o=n.n(r),s=/^once!/;i.prototype={delegateNotifications:function(e){var t=this,n=this._consumer;if(!e&&!(e=o.a.result(n,"notifications")))return!1;var i=function(i){var a=e[i],c="on";s.test(i)&&(c="once",i=i.replace(s,"")),o.a.isString(a)&&o.a.isFunction(n[a])?t[c](i,function(){n[a].apply(n,arguments)}):o.a.isFunction(a)&&t[c](i,a.bind(n)),r=i};for(var r in e)i(r)},trigger:function(e,t){this._notifier.trigger(e,t,this._consumer)},triggerAll:function(e,t){this._notifier.triggerAll(e,t,this._consumer)},triggerRemote:function(e,t){this._notifier.triggerRemote(e,t)},on:function(e,t){this._consumer.listenTo(this._notifier,e,t)},once:function(e,t){this._consumer.listenToOnce(this._notifier,e,t)},off:function(e,t){this._consumer.stopListening(this._notifier,e,t)}},t.a={initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.notifier&&(this.notifier=new i({consumer:this,notifier:e.notifier}))}}},function(e,t,n){"use strict";var i=n(5),r=n.n(i),o=n(0),s=n.n(o),a=n(29),c=n(67),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.forceEnglish&&(this._forceEnglish=!0),this._xhr=e.xhr||c.a};u.prototype={__translations__:{"":{"project-id-version":"PACKAGE VERSION","report-msgid-bugs-to":"","pot-creation-date":"2019-12-09 17:57+0000","po-revision-date":"2014-09-03 08:41+0000","last-translator":"Zachary <zcarter@mozilla.com>","language-team":"LANGUAGE <LL@li.org>","language":"en","mime-version":"1.0","content-type":"text/plain; charset=UTF-8","content-transfer-encoding":"8bit","plural-forms":"nplurals=2; plural=(n != 1);","x-generator":"Pootle 2.5.0","x-pootle-mtime":"1409733678.0"},"Password reset":"","Password reset successfully. Sign in to continue.":"","Sign in":"","%(permissionName)s (required)":"","Email address":"","Display name":"","Account picture":"","Welcome back":"","Firefox Sync will resume momentarily":"","Your password has beenÂ reset":"","Complete set-up by entering the new password on your other Firefox devices.":"","You are now ready to make changes to your Firefox Account.":"","Primary email verified":"","Account notifications will now also be sent to %(secondaryEmailVerified)s.":"","Secondary email verified":"","Sign-in confirmed":"","You are now ready to use %(serviceName)s":"","Account verified":"","Connected":"","Unknown account. <a href=\"/signup\">Sign up</a>":"","Account no longer exists. Recreate it?":"","Account already exists. <a href=\"/signin\">Sign in</a>":"","Password changed successfully":"","We're sorry to hear about this. You should change your Firefox Account password, and look for information from your device manufacturer about erasing your data remotely.":"","We're sorry to hear about this. If this was a device you really don't trust, you should change your Firefox Account password, and change any passwords saved in Firefox.":"","Last sync %(translatedTimeAgo)s":"","Last sync over %(translatedTimeAgo)s":"","Last sync %(translatedTimeAgo)s in %(translatedCountry)s":"","Last sync over %(translatedTimeAgo)s in %(translatedCountry)s":"","Last sync %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s":"","Last sync over %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s":"","Last active %(translatedTimeAgo)s":"","Last active over %(translatedTimeAgo)s":"","Last active %(translatedTimeAgo)s in %(translatedCountry)s":"","Last active over %(translatedTimeAgo)s in %(translatedCountry)s":"","Last active %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s":"","Last active over %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s":"","%(translatedTimeAgo)s":"","Over %(translatedTimeAgo)s":"","%(translatedTimeAgo)s in %(translatedCountry)s":"","Over %(translatedTimeAgo)s in %(translatedCountry)s":"","%(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s":"","Over %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s":"","Web Session, %(userAgent)s":"","Web Session":"","Last sync time unknown":"","Subscribed successfully":"","Account deleted successfully":"","Display name updated":"","Secondary email removed":"","Verification email sent":"","Primary email set to %(email)s":"","Secondary email":"","Firefox Recovery Codes":"","New recovery codes generated":"","Two-step authentication enabled":"","Use the code %(code)s to set up two-step authentication in supported applications.":"","Two-step authentication removed":"","Two-step Authentication":"","Account Recovery":"","Account recovery enabled":"","Account recovery revoked":"","Firefox Recovery Key":"","Your account has been locked for security reasons":"","Reset password":"","none":"","Last checked: %(lastCheckTime)s":"","Open Gmail":"","Open Hotmail":"","Open Yahoo":"","Open Outlook":"","Open Restmail":"","Email resent. Add accounts@firefox.com to your contacts to ensure a smooth delivery.":"","Copied":"","Failed to copy. Please manually copy.":"","Downloaded":"","Printed":"","Primary email verified successfully":"","Account verified successfully":"","Open tabs":"","Bookmarks":"","Add-ons":"","Logins":"","History":"","Preferences":"","Addresses":"","Credit cards":"","Firefox Sync":"","Secondary email verified successfully":"","Password reset successfully":"","Unexpected error":"","The link you clicked to verify your email is expired.":"","You've tried too many times. Try again later.":"","You've tried too many times. Try again %(retryAfterLocalized)s.":"","Invalid token":"","Invalid timestamp in request signature":"","Invalid nonce in request signature":"","Account already exists":"","Unknown account":"","Incorrect email case":"","Incorrect password":"","Unverified account":"","Invalid verification code":"","Invalid JSON in request body":"","Invalid parameter: %(param)s":"","Missing parameter: %(param)s":"","Invalid request signature":"","Missing content-length header":"","Request body too large":"","The request was blocked for security reasons":"","Invalid authorization code":"","Invalid phone number":"","Cannot send to this country":"","Could not send a message to this number":"","Your email was just returned":"","Your email was just returned. Mistyped email?":"","Unable to deliver email":"","This email was already verified by another user":"","Secondary email must be different than your account email":"","Primary account email required for sign-in":"","Address in use by another account":"","Primary account email required for reset":"","Invalid signin code":"","Can not change primary email to an unverified email":"","Can not change primary email to an email that does not belong to this account":"","This email can not currently be used to login":"","Failed to send email":"","Valid code required":"","This verification code has expired":"","A TOTP token already exists for this account":"","TOTP token not found":"","Recovery code not found":"","Unavailable device command":"","Recovery key not found":"","Invalid recovery key":"","This request requires two step authentication enabled on your account.":"","Failed due to a conflicting request, please try again.":"","Unknown customer for subscription.":"","Unknown subscription.":"","Unknown plan for subscription.":"","Invalid payment token for subscription.":"","Server busy, try again soon":"","Feature not enabled":"","System unavailable, try again soon":"","This endpoint is no longer supported":"","Login attempt cancelled":"","Session expired. Sign in to continue.":"","Cookies are still disabled":"","Passwords do not match":"","Workingâ€¦":"","Could not get Privacy Notice":"","Could not get Terms of Service":"","Your new password must be different":"","Must be at least 8 characters":"","Valid password required":"","Valid email required":"","A usable image was not found":"","Could not initialize camera":"","Valid URL required":"","Your verification email was just returned. Mistyped email?":"","Enter a valid email address. firefox.com does not offer email.":"","Firefox Accounts can only be placed into an IFRAME on approved sites":"","Verification link damaged":"","The image dimensions must be at least 100x100px":"","Signup is coming soon to Firefox for iOS":"","You must enter your age to sign up":"","You must enter a valid age to sign up":"","Account no longer exists.":"","Invalid property in resume token: %(property)s":"","Missing property in resume token: %(property)s":"","Invalid data attribute: %(property)s":"","Missing data attribute: %(property)s":"","That confirmation link was already used, and can only be used once.":"","This is a required field":"","Authorization code required":"","Link damaged":"","Phone number required":"","Two-step authentication code required":"","Invalid two-step authentication code":"","Recovery code required":"","Invalid recovery code":"","Recovery key required":"","Please enter verification code":"","Accounts with two-step authentication do not support pairing at this time":"","Missing configuration":"","Invalid configuration":"","Did you mean <span %(escapedEmailSuggestionAttrs)s>%(escapedDomain)s</span>?":"","Please try again later":"","Service unavailable, try again soon":"","Unknown client":"","Incorrect redirect_uri":"","Invalid assertion":"","Unknown code":"","Incorrect code":"","Expired code":"","Invalid OAuth parameter: %(param)s":"","Unauthorized":"","Forbidden":"","Expired token":"","Something went wrong. Please close this tab and try again.":"","no message":"","Missing OAuth parameter: %(param)s":"","Invalid message from the remote device":"","Error pairing to remote device":"","Connection to remote device closed, please try again":"","Invalid parameter in request body: %(param)s":"","Unsupported image provider":"","Image processing error":"","Invalid Token":"","By proceeding, you agree to the <a id=\"service-tos\" href=\"%(termsUri)s\">Terms of Service</a> and<a id=\"service-pp\" href=\"%(privacyUri)s\">Privacy Notice</a> of %(serviceName)s (%(serviceUri)s).":"","<a href=\"https://support.mozilla.org/kb/im-having-problems-with-my-firefox-account\">Help</a>":"","Get the latest news about Mozilla and Firefox.":"","%(city)s, %(country)s (estimated)":"","%(country)s (estimated)":"","IP address: %(ip)s":"","For added security, please confirm this sign-in to begin syncing with this device:":"","Bad Request":"","500 Error":"","Oh dear, something went wrong there. We've been notified and will get working on a fix.":"","Reset password link expired":"","The link you clicked to reset your password is expired.":"","Receive new link":"","Reset password with recovery key":"","Continue to %(serviceName)s":"to continue to %(serviceName)s","Please enter the one time use recovery key you stored in a safe place to regain access to your Firefox Account.":"","<span class=\"note\">NOTE:</span> If you reset your password and don't have account recovery key saved, some of your data will be erased (including synced server data like history and bookmarks).":"","Enter recovery key":"","Confirm recovery key":"","Don't have a recovery key?":"","Cannot create account":"","You must meet certain age requirements to create a Firefox&nbsp;Account.":"","Learn more":"","%(email)s registered":"","Choose what to sync":"","Save selections":"","Back":"","Reset password link damaged":"","The link you clicked was missing characters, and may have been broken by your email client. Copy the address carefully, and try again.":"","Create new password":"","<span>REMEMBER:</span> When you reset your password, you reset your account. You may lose some of your personal information (including history, bookmarks, and passwords). Thatâ€™s because we encrypt your data with your password to protect your privacy.":"","You have successfully restored your account using your recovery key. Create a new password to secure your data, and store it in a safe location.":"","New password":"","Re-enter password":"","Remember password? Sign in":"","Primary email already confirmed":"","Sign-in already confirmed":"","Verification link expired":"","Click here to receive a new verification link":"","Verification error":"","Confirm your account":"","Confirm this sign-in":"","Check your email for the verification link sent&nbsp;to %(escapedEmail)s":"","Check your email for the sign-in confirmation link sent to %(escapedEmail)s":"","Not in inbox or spam folder? Resend":"","Reset email sent":"","Click the link emailed to %(email)s within the next hour to create a new password.":"","Connect another device":"","This Firefox is connected":"","Email verified":"","Success":"","Sign in to this Firefox to complete set-up":"","Still adding devices?":"","Sign in to Firefox on another device to complete set-up":"","Still adding devices? Sign in to Firefox on another device to complete set-up":"","Sign in to Firefox for Android to complete set-up":"","Sign in to Firefox for iOS to complete set-up":"","Why is more than one device required?":"","Cookies and local storage are required":"","Please enable cookies and local storage in your browser to access Firefox Accounts. Doing so will enable functionality such as remembering you between sessions.":"","Try again":"","Sign in to continue":"","Password":"","Forgot password?":"","By proceeding, you agree to the <a id=\"fxa-tos\" href=\"/legal/terms\">Terms of Service</a> and <a id=\"fxa-pp\" href=\"/legal/privacy\">Privacy Notice</a>.":"","Enter your email":"","Email":"","Continue":"","Legal":"","Terms of Service":"","Privacy Notice":"","Get the full Sync experience.":"","Download Firefox for iOS!":"","Download Firefox for Android.":"","Download Firefox for mobile devices.":"","Request for permission":"","%(serviceName)s wants the following information from your account:":"","Accept":"","Cancel":"","Your account is ready!":"","Generate a new recovery key":"","Continue to my account":"","Report unauthorized sign-in?":"","You received an email about attempted access to your account. Would you like to report this activity as suspicious?":"","Report activity":"","Why is this happening?":"","<span>NOTE:</span> When you reset your password, you reset your account. You may lose some of your personal information (including history, bookmarks, and passwords). Thatâ€™s because we encrypt your data with your password to protect your privacy.":"","Begin reset":"","Firefox Accounts":"","Sign out":"","Use a different account":"","Create an account":"","Sorry. Weâ€™ve locked your&nbsp;account.":"","The confirmation email we sent to %(email)s was returned and weâ€™ve locked your account to protect your Firefox data.":"","If this is a valid email address, <a %(escapedSupportLinkAttrs)s>let us know</a> and we can help unlock your account.":"","No longer own that email? Create a new account":"","Enter recovery code":"","Please enter a recovery code that was provided to you during setup.":"","Enter 10-digit recovery code":"","Verify":"","Use security code":"","Thank you for your vigilance":"","Our team has been notified. Reports like this help us fend off intruders.":"","Authorize this sign-in":"","Check your email for the code sent to %(email)s.":"","Enter code":"","Enter security code":"","Open your authentication app and enter the security code it provides.":"","Enter 6-digit code":"","Use recovery code":"","Check your email for the authorization code sent to %(email)s.":"","Enter authorization code":"","Create a Firefox Account":"","Repeat password":"","Donâ€™t lose this password. If you need to reset it, you may lose Sync data.":"","<span>Donâ€™t reuse your email password</span>If someone knows your email password, they can approve your Firefox sign-in on a new device and access your data.":"","<span>Remember your password</span>If you need to reset your password, you will lose any Sync data that is not on one of your devices.":"","Get the latest news about Mozilla and Firefox":"","Create account":"","Have an account? Sign in":"","Mistyped email?":"","Send Firefox directly to your smartphone and sign in to complete set-up":"","Mobile phone number":"","Send":"","SMS service only available in certain countries. SMS &amp; data rates may apply. The intended recipient of the email or SMS must have consented. <a %(escapedLearnMoreAttributes)s>Learn more</a>":"","Install Firefox on your smartphone and sign in to complete set-up":"","App link sent to %(escapedPhoneNumber)s. <a %(escapedBackLinkAttrs)s>Mistyped&nbsp;number?</a>":"","App link resent to %(escapedPhoneNumber)s. <a %(escapedBackLinkAttrs)s>Mistyped&nbsp;number?</a>":"","If you are not receiving the text message, you can also download the apps manually.":"","Didn't arrive? Resend":"","Why sync multiple devices?":"","The Sync service isnâ€™t a permanent backup, itâ€™s simply a secure way to transfer saved bookmarks, history and passwords between your own devices.":"","You should install Firefox and sync at least two devices to protect against losing your data if you need to restore it but forget your password.":"","Got it":"","Changeâ€¦":"","Addâ€¦":"","Take picture":"","Upload":"","Camera":"","Clear":"","Done":"","Position and rotate your picture as needed":"","Change":"","Once you're finished, use your new password to sign in on all of your devices.":"","Old password":"","Disconnect from Sync?":"","Your browsing data will remain on %(deviceName)s, but it will no longer sync with your account.":"","Suspicious device":"","Lost or stolen device":"","Old or replaced device":"","Duplicate device":"","Rather not say":"","Disconnect":"","Disconnection Successful":"","Devices & apps":"","Show":"","Current device":"","Disconnectâ€¦":"","Current session":"","Revoke":"","Firefox for iOS":"","None connected":"","Download":"","Firefox for Android":"","Missing or duplicate items?":"","Refresh status":"","Email preferences":"","You will receive communications relating to your account security, changes to our policy, your accountâ€™s functionality and initial emails to help you get the most from your Firefox Account.":"","Additionally, you can subscribe to receive promotional emails with the latest news from Mozilla and Firefox.":"","Subscribe":"","Manage preferences":"","Delete account":"","Deleteâ€¦":"","If you use this account for Mozilla apps and services like AMO, Pocket, and Screenshots you should first log in and remove any saved personal information. Once you delete your account here you may lose access to it everywhere.":"","Choose the name you would like to appear in Firefox and when managing your account.":"","A secondary email is an additional address for receiving security notices and confirming new devices.":"","verified":"","verification required":"","Make primary":"","Remove":"","Add":"","Recovery codes":"","NOTE:":"","By generating new recovery codes, all previous codes will become invalid. Please store new codes in a safe location.":"","Generate new recovery codes":"","These are your one time use recovery codes. Store them in a safe place in the event you lose access to your mobile device. You will not be able to see these codes again.":"","Copy":"","Print":"","Two-step authentication":"","Enableâ€¦":"","Add a layer of security to your account by requiring security codes from one of <a %(escapedTotpSupportAttributes)s>these authentication apps</a>.":"","Current status":"","Enabled":"","Disabled":"","Disable":"","Enable":"","Replace recovery codes":"","Scan the QR code in your authentication app and then enter the security code it provides.":"","Canâ€™t scan code?":"","Manually enter this secret key into your authentication app:":"","Security code":"","Confirm":"","Before you can view or make changes to this section, you will need to verify your email address.":"","Primary email":"","Account recovery":"","Generate a recovery key to regain access to your Firefox bookmarks, passwords, and synced data if you forget your password.":"","Recovery key":"","Not set":"","Generate":"","<span class=\"note\">NOTE: </span>Your Firefox Account password encrypts your Firefox data. Only your password or recovery key can access your data. <a %(escapedLearnMoreLinkAttributes)s>Learn more</a>":"","Step 1 of 2: Re-enter password":"","Enter your password to view your recovery key.":"","Enter Password":"","Are you sure you want to revoke?":"","You will be unable to use your recovery key to access your data in the event you reset your password.":"","Step 2 of 2: Save Recovery key":"","<span class=\"note\">NOTE: </span>If you forget your password, this key is required to regain access to your data. Save your recovery key in a safe location, where you can find it easily later.":"","Done, Recovery key saved":"","How old are you?":"","%(family)s on %(OS)s":"","%(city)s, %(region)s, %(country)s (estimated)":"","%(region)s, %(country)s (estimated)":"","%(country)s":"","Location unknown":"","IP address: %(ipAddress)s":"","Your Firefox Account password":"","Must not be your email address":"","Must not match this <a %(escapedCommonPasswordLinkAttrs)s>list of common passwords</a>":"","Be original and be safe &mdash; don't reuse this password anywhere else.":"","Remember this password &mdash; resetting it erases your data from our servers.":"","Show password":"","Looking for Firefox Sync? <a %(escapedSyncSuggestionAttrs)s>Get started here</a>":"","Approve new device <small>for %(email)s</small>":"","Approve device":"","Device connected":"","You are now syncing with:":"","Manage devices":"","Approval now required <small>from your other device</small>":"","Pairing not successful":"","The setup process was terminated.":"","Open the code scanner on your Firefox app and show code when ready.":"","Show code":"","Get App":"","Pairing was successful.":"","Confirm pairing <small>for %(email)s</small>":"","Confirm pairing":"","Pair using an app":"","Did you use the system camera? You must pair from within a Firefox app.":"","Verified":"","Verification required":"","Subscriptions":"","Manageâ€¦":"","Get the most out of your account":"","Sync these everywhere you sign in":"","Practical knowledge is coming to your inbox":"","Sign up for more:":"","Be safer and smarter online":"","Invite me to test new Mozilla products":"","Take action to keep the internet healthy":"","One last step":"","Check %(escapedEmail)s for a confirmation link and weâ€™ll get you on your way.":"","Sign in <span class=\"service\">to your Firefox account</span>":"","Create your Firefox account":"","Change email":"","You did it! Youâ€™re signed in.":"","Now get Firefox everywhere else.":"","Sign in on your other devices to get all the products, knowledge, and privacy features of Firefox.":"","Why sign in on another device?":"","Start browsing":"","Check your texts":"","A link to the Firefox app was sent to %(escapedPhoneNumber)s":"","Wrong number?":"","If you are not receiving the SMS message, you can also search your app store for â€œFirefox.â€":"","Get more from these features:":"","Firefox browser":"","Travel the internet with protection, on every device.":"","Firefox Lockwise":"","Keep your passwords protected and portable.":"","Firefox Monitor":"","Get a lookout for data breaches.":"","Firefox Send":"","Share large files without prying eyes.":"","Test new Firefox products":"","Practical knowledge is coming to your inbox. Sign up for more:":"","Get app":"","Subscription has already been cancelled":"","Update was rejected, please try again":"","Avatar":"","Please Select One":"","Logins and Passwords":"","Open Tabs":"","Credit Cards":"","Invalid redirect":"","Could not get Subscription Platform Terms of Service":"","User is not signed in":"","A different user is signed in":"","Unverified user or session":"","By proceeding, you agree to the <a id=\"fxa-tos\" href=\"/legal/terms\" tabindex=\"-1\">Terms of Service</a> and <a id=\"fxa-pp\" href=\"/legal/privacy\" tabindex=\"-1\">Privacy Notice</a>.":"","Your credit card has expired. Please update it <a %(escapedCcExpiredLinkAttrs)s>here</a>.":"","Subscription Platform Terms of Service":"","Contact Us":"","What do you need help with?":"","General inquiries":"","Payment & billing":"","Connection issues":"","Getting started":"","Account issues":"","Subject (optional)":"","Description of Issue":"","You've connected your Firefox account to Mozilla products that keep you secure and productive on the web:":"","Please acknowledge that by deleting your account:":"","Any subscriptions you have will be cancelled":"","You may lose saved information and features within Mozilla products":"","Reactivating with this email may not restore your saved information":"","Hmm, we're having trouble with our system. We're working on fixing it for you and apologize for the inconvenience. Please try again later.":"","Other":"","Thank you for reaching out to Mozilla Support about <b>%(escapedLowercaseTopic)s</b>. We'll contact you via email as soon as possible.":"","Thank you for reaching out to Mozilla Support about <b>%(escapedLowercaseTopic)s</b> for <b>%(escapedSelectedPlan)s</b>. We'll contact you via email as soon as possible.":"","Change...":"","Last seen %(translatedTimeAgo)s":"","Last seen over %(translatedTimeAgo)s":"","Last seen %(translatedTimeAgo)s in %(translatedCountry)s":"","Last seen over %(translatedTimeAgo)s in %(translatedCountry)s":"","Last seen %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s":"","Last seen over %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s":"","Last seen time unknown":"","Firefox":"","Expired or invalid code":"","Sync these everywhere you sign in:":"","Enable Sync":"","Donâ€™t sync this device":"","Enter verification code":"","Please enter the verification code that was sent to %(escapedEmail)s within 20 minutes.":"","Recent Activity":"","Security Events":"","Event Name":"","Created At":"","Delete events":"","Back to settings":"","What are you contacting us about?":"","Description of issue":"","Would you like to sync this device to your account?":"","Sync this device":"","Any paid subscriptions you have will be cancelled":"","Stay safe &mdash; don't reuse passwords.":"","Your message was sent to support":"","Back to Subscriptions":"","Invalid or expired verification code":"","Please enter the verification code that was sent to %(escapedEmail)s within 5 minutes.":"","Are you locked out?":"","Trouble entering code?":"","Looking to cancel a paid subscription? Go to <a href=\"/subscriptions\">Manage Subscriptions</a>.":"","Your message was sent to Support":"","Sync selections":"","Need another code? Resend":"","You need this password to access any encrypted data you store with us.<br/>A reset means potentially losing data like passwords and bookmarks.":"","Disconnect from Sync":"","You are disconnecting %(deviceName)s from Sync because this device is:":"","Suspicious":"","Lost or stolen":"","Old or replaced":"","Duplicate":"","Sign up to get more features:":"","Sync your bookmarks, passwords, and more on every device.":"","Securely access passwords saved in Firefox anywhere &mdash; even outside of the browser.":"","Send larger files securely and privately.":"","Choose what to sync:":"","Mistyped email? %(domain)s does not offer email.":""},fetch:function(){var e=this;return new Promise(function(t,n){e._forceEnglish||Object.keys(e.__translations__).length?t():e._xhr.getJSON("/i18n/client.json").then(function(n){e.__translations__=n,t()},n)})},set:function(e){this.__translations__=e},get:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.__translations__;n.msgctxt?t=i["".concat(n.msgctxt,"").concat(e)]||i[e]:t=i[e];return s.a.isArray(t)&&t.length>=2&&(t=t[1]),(t=r.a.trim(t))||(t=e),this.interpolate(t,n)},interpolate:a.a.interpolate,translateInTemplate:function(e,t){var n=this;return function(i){return n.get(e||i,t)}}},t.a=u},function(e,t,n){"use strict";n.r(t);var i=n(19);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(n,r){return r.isSignedIn().then(function(r){if(r){var o="Account verified successfully",s="settings";t.success&&(o=t.success);var a=n.relier.get("redirectTo");return a&&(a=new URL(a,window.location.origin)).origin===window.location.origin&&(0>(a=a.pathname+a.search).indexOf("/settings/emails")?0>a.indexOf("/settings/two_step_authentication")?0===a.indexOf("/subscriptions/products")&&(s=a):s="/settings/two_step_authentication":s="/settings/emails"),new i.default(s,{success:o})}return e})};return n.type="settings",n}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(243),s=n.n(o),a=function e(t){var n=s()(t);return r.a.extend(n,{isAndroid:function(){return"Android"===this.os.name},isIos:function(){return"iOS"===this.os.name},isMobileSafari:function(){return"Mobile Safari"===this.browser.name},isFirefox:function(){return"Firefox"===this.browser.name},isChrome:function(){return"Chrome"===this.browser.name},isChromeAndroid:function(){return this.isChrome()&&this.isAndroid()},isEdge:function(){return"Edge"===this.browser.name},isIE:function(){return"IE"===this.browser.name},isFirefoxAndroid:function(){return this.isFirefox()&&this.isAndroid()},isFirefoxIos:function(){return this.isFirefox()&&this.isIos()},isFirefoxDesktop:function(){return this.isFirefox()&&!this.isFirefoxIos()&&!this.isFirefoxAndroid()},supportsSvgTransformOrigin:function(){return!(this.isIos()||this.isEdge()||this.isIE())},parseVersion:function(){var e=this.browser.version?this.browser.version.split("."):[];return{major:parseInt(e[0]||0,10),minor:parseInt(e[1]||0,10),patch:parseInt(e[2]||0,10)}},parseOsVersion:function(){var e=this.os.version?this.os.version.split("."):[];return{major:parseInt(e[0]||0,10),minor:parseInt(e[1]||0,10),patch:parseInt(e[2]||0,10)}},genericOSName:function(){return e.toGenericOSName(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.os.name)},genericDeviceType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.device.type;switch(e){case"mobile":case"tablet":return e;case"smarttv":case"wearable":case"embedded":return"mobile";default:return"desktop"}}}),n};a.toGenericOSName=function(e){return/^Windows/.test(e)?"Windows":/^Android/.test(e)?"Android":/^Mac OS/.test(e)?"macOS":/^iOS/.test(e)?"iOS":/^Ubuntu/.test(e)||/^Linux/.test(e)||/^Fedora/.test(e)||/^Red Hat/.test(e)||/^Debian/.test(e)?"Linux":"Unknown"},t.a=a},function(e,t,n){"use strict";var i=n(232);n.n(i).a.polyfill(),t.a={delay:function(e){return new Promise(function(t){setTimeout(t,e)})},denodeify:function(e){return function(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];return new Promise(function(t,i){e.apply(void 0,n.concat([function(e,n){e?i(e):t(n)}]))})}}}},function(e,t,n){"use strict";n.r(t),t.default=function(e){return function(t){t&&(t.preventDefault(),t.stopPropagation());var n=[].slice.call(arguments,0);return n.unshift(e),this.invokeHandler.apply(this,n)}}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(6),s=n.n(o),a=n(3),c=s.a.Model.prototype,u=s.a.Model.extend({initialize:function(e){c.initialize.call(this,e),r.a.each(this.defaults,function(e,t){if(this.has(t)){var n=this.get(t).replace(/ /g,"");n?this.set(t,n):this.unset(t)}},this)},defaults:{},validation:{},isValid:function(){var e;if(this.isDamaged())return!1;try{e=c.isValid.call(this)}catch(t){e=!1}return e},validate:function(e){var t=a.a.validate(e,this.validation,{allowUnknown:!0});if(t.error)throw t.error},markExpired:function(){this._isExpired=!0},isExpired:function(){return!!this._isExpired},markUsed:function(){this._isUsed=!0},isUsed:function(){return!!this._isUsed},markDamaged:function(){this._isDamaged=!0},isDamaged:function(){return!!this._isDamaged}});t.a=u},function(e,t,n){"use strict";function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(17);t.a={navigateToPaymentServer:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t.managementClientId,c=t.managementScopes,u=t.managementTokenTTL,l=t.managementUrl,d=e.metrics.getFlowEventMetadata(),h=d.deviceId,f=d.flowBeginTime,p=d.flowId;return e.getSignedInAccount().createOAuthToken(a,{scope:c,ttl:u}).then(function(t){var a=o.a.objToSearchString(function(e){for(var t=1;arguments.length>t;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({device_id:h,flow_begin_time:f,flow_id:p},s)),c=o.a.objToHashString({accessToken:t.get("token")}),u="".concat(l,"/").concat(n).concat(a).concat(c);e.navigateAway(u)})}}},,function(e,t,n){"use strict";n.r(t);var i=n(4),r=n(62);t.default=function(e){var t=function t(n,i){return Promise.resolve().then(function(){if(t.ensureConnectAnotherDeviceMixin(n),n.isEligibleForConnectAnotherDevice(i))return n.navigateToConnectAnotherDeviceScreen(i)}).then(function(){return n.hasNavigated()?new Promise(function(){}):e})};return t.ensureConnectAnotherDeviceMixin=function(e){i.a.isMixedIn(e,r.default)||i.a.mixin(e,r.default)},t.type="connect-another-device",t}},,,function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(1),s=n(19);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(n,i){var r=n.relier.get("redirectTo");if(r){if((r=new URL(r,location.href)).origin!==location.origin){var a=o.a.toError("INVALID_REDIRECT_TO");throw this.logError(a),a}r=r.pathname+r.search}return new s.default(r||e,t)(n,i)};return r.a.assign(n,t,{endpoint:e,halt:!0,type:"navigateOrRedirect"}),n}},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"default",function(){return m});var u=n(4),l=n(15),d=n(7),h=n(281),f=n.n(h),p=n(17),m=function(){function e(){var t,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var u=arguments.length,l=Array(u),d=0;u>d;d++)l[d]=arguments[d];return r=this,c(s(n=!(a=(t=o(e)).call.apply(t,[this].concat(l)))||"object"!==i(a)&&"function"!=typeof a?s(r):a),"template",f.a),c(s(n),"className","communication-preferences"),c(s(n),"viewName","settings.communication-preferences"),n}var t,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(e,d["default"]),t=e,(n=[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.marketingEmailPreferencesUrl=e.config&&e.config.marketingEmailPreferencesUrl}},{key:"_getEscapedEmailPreferencesLink",value:function(){var e=this.getSignedInAccount();return p.a.updateSearchString(this.marketingEmailPreferencesUrl,e.pick("email"))}},{key:"setInitialContext",value:function(e){var t=this._getEscapedEmailPreferencesLink();e.set({escapedEmailPreferencesLink:t})}}])&&r(t.prototype,n),u&&r(t,u),e}();u.a.mixin(m,l.default)},function(e,t){"use strict";var n;!function(e){e.CONSENT="consent",e.NONE="none"}(n||(n={})),t.a=n},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(11),o=n(4),s=n(283),a=n.n(s),c=n(62),u=n(31),l=n(48),d=n(3),h=n(95).a.extend({defaults:{code:null,reminder:null,type:null,uid:null},validation:{code:d.a.verificationCode().required(),uid:d.a.uid().required()}}),f=r.default.extend({template:a.a,className:"complete_sign_up",initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._verificationInfo=new h(this.getSearchParams());var t=this._verificationInfo.get("uid");this.notifier.trigger("set-uid",t);var n=e.account||this.user.getAccountByUid(t);n.isDefault()&&n.set("uid",t),this._account=n,this._email=this._account.get("email")},getAccount:function(){return this._account},beforeRender:function(){var e=this;this.logViewEvent("verification.clicked");var t=this._verificationInfo;if(!t.isValid())return this.logError(i.a.toError("DAMAGED_VERIFICATION_LINK")),!0;var n=this.getAccount();n.populateFromStringifiedResumeToken(this.getSearchParam("resume"));var r=t.get("code"),o={primaryEmailVerified:this.getSearchParam("primary_email_verified")||null,reminder:t.get("reminder"),secondaryEmailVerified:this.getSearchParam("secondary_email_verified")||null,service:this.relier.get("service")||null,style:this.relier.get("style")||null,type:t.get("type")};return this.user.completeAccountSignUp(n,r,o).then(function(){return e._notifyBrokerAndComplete(n)}).catch(function(t){return e._handleVerificationErrors(t)})},setInitialContext:function(e){var t=this._verificationInfo;e.set({canResend:this._canResend(),error:this.model.get("error"),isLinkDamaged:!t.isValid(),isLinkExpired:t.isExpired(),isLinkUsed:t.isUsed(),isPrimaryEmailVerification:this.isPrimaryEmail()})},_notifyBrokerAndComplete:function(e){this.logViewEvent("verification.success"),this.notifier.trigger("verification.success"),this.isSignIn()&&this.logEvent("signin.success");var t=this._getBrokerMethod();return this.invokeBrokerMethod(t,e)},_getBrokerMethod:function(){var e;if(this.isPrimaryEmail())e="afterCompletePrimaryEmail";else if(this.isSecondaryEmail())e="afterCompleteSecondaryEmail";else if(this.isSignIn())e="afterCompleteSignIn";else{if(!this.isSignUp())throw Error("New broker method needed for ".concat(this.model.get("type")));e="afterCompleteSignUp"}return e},_handleVerificationErrors:function(e){var t=this._verificationInfo;i.a.is(e,"UNKNOWN_ACCOUNT")?(t.markExpired(),e=i.a.toError("UNKNOWN_ACCOUNT_VERIFICATION")):i.a.is(e,"INVALID_VERIFICATION_CODE")||i.a.is(e,"INVALID_PARAMETER")?this.isPrimaryEmail()?(t.markUsed(),e=i.a.toError("REUSED_PRIMARY_EMAIL_VERIFICATION_CODE")):this.isSignIn()?(t.markUsed(),e=i.a.toError("REUSED_SIGNIN_VERIFICATION_CODE")):(t.markDamaged(),e=i.a.toError("DAMAGED_VERIFICATION_LINK")):this.model.set("error",e),this.logError(e)},_canResend:function(){return!!this._hasResendSessionToken()&&this.isSignUp()},_hasResendSessionToken:function(){return!!this.user.getAccountByEmail(this._email).get("sessionToken")},resend:function(){var e=this,t=this.user.getAccountByEmail(this._email);return t.retrySignUp(this.relier,{resume:this.getStringifiedResumeToken(t)}).catch(function(t){if(i.a.is(t,"INVALID_TOKEN"))return e.navigate("signup",{error:t});throw t})}});o.a.mixin(f,c.default,Object(u.default)(),l.default);t.default=f},function(e,t,n){"use strict";function i(e){return u.a.reduce(e,function(e,t){return e.concat(u.a.map(t,function(e){return e}))},[])}function r(e){if(e&&e!==F)return e}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._speedTrap=new M,this._speedTrap.init(),this.timers=this._speedTrap.timers,this.events=this._speedTrap.events,this._window=e.window||window,this._activeExperiments={},this._brokerType=e.brokerType||F,this._clientHeight=e.clientHeight||F,this._clientWidth=e.clientWidth||F,this._collector=e.collector||"",this._context=e.context||h.a.CONTENT_SERVER_CONTEXT,this._devicePixelRatio=e.devicePixelRatio||F,this._emailDomain=F,this._entrypoint=e.entrypoint||F,this._entrypointExperiment=e.entrypointExperiment||F,this._entrypointVariation=e.entrypointVariation||F,this._env=e.environment||new _.a(this._window),this._eventMemory={},this._inactivityFlushMs=e.inactivityFlushMs||U,this._isSampledUser=e.isSampledUser||!1,this._lang=e.lang||"unknown",this._marketingImpressions={},this._migration=e.migration||F,this._numStoredAccounts=e.numStoredAccounts||"",this._referrer=this._window.document.referrer||F,this._screenHeight=e.screenHeight||F,this._screenWidth=e.screenWidth||F,this._sentryMetrics=e.sentryMetrics,this._service=e.service||F,this._startTime=e.startTime||this._speedTrap.baseTime,this._syncEngines=e.syncEngines||[],this._uid=e.uid||F,this._uniqueUserId=e.uniqueUserId||F,this._userPreferences={},this._utmCampaign=e.utmCampaign||F,this._utmContent=e.utmContent||F,this._utmMedium=e.utmMedium||F,this._utmSource=e.utmSource||F,this._utmTerm=e.utmTerm||F,this._xhr=e.xhr||D.a,this.initialize(e)}var s=n(5),a=n.n(s),c=n(0),u=n.n(c),l=n(4),d=n(2),h=n.n(d),f=n(6),p=n.n(f),m=n(50),g=n.n(m),v=n(61),_=n.n(v),y=n(1),w=n(74),b=n(57),E=n(58),S=n(3),A=n(17),I=n(149),C=n.n(I),T=p.a.Model.extend({initialize:function(e){this.sentryMetrics=(e=e||{}).sentryMetrics,this.window=e.window||window,this.metrics=e.metrics;var t=A.a.searchParams(this.window.location.search);this.populateFromStringifiedResumeToken(this.getSearchParam("resume")),this.has("flowId")?this.has("flowBegin")||this.logError(y.a.toMissingResumeTokenPropertyError("flowBegin")):this.has("flowBegin")?this.logError(y.a.toMissingResumeTokenPropertyError("flowId")):t.flow_begin_time&&t.flow_id?(this.set("flowId",t.flow_id),this.set("flowBegin",t.flow_begin_time),this.metrics.markEventLogged("flow.begin")):t.flowBeginTime&&t.flowId?(this.set("flowBegin",t.flowBeginTime),this.set("flowId",t.flowId),this.metrics.markEventLogged("flow.begin")):(this.populateFromDataAttribute("flowId"),this.populateFromDataAttribute("flowBegin")),this.has("deviceId")||this.set("deviceId",t.device_id?t.device_id:t.deviceId?t.deviceId:C.a.v4().replace(/-/g,""))},defaults:{deviceId:null,flowBegin:null,flowId:null},populateFromDataAttribute:function(e){var t=a()(this.window.document.body).data(e);if(t){var n=this.resumeTokenSchema[e].validate(t);n.error?this.logError(y.a.toInvalidDataAttributeError(e)):this.set(e,n.value)}else this.logError(y.a.toMissingDataAttributeError(e))},logError:function(e){return w.a.captureError(e,this.sentryMetrics)},resumeTokenFields:["deviceId","flowId","flowBegin"],resumeTokenSchema:{deviceId:S.a.hex().len(32),flowBegin:S.a.number().test(function(e){return e===Math.round(e)}),flowId:S.a.hex().len(64)}});l.a.mixin(T,b.a,E.a);var O=T,k=n(89),P=n(234),x=n.n(P),N=n(29),R=n(215),D=n(67),M=function(){};M.prototype=x.a;var L=/^(?:screen\..*|.*\.(?:complete|success))$/,V=["broker","context","deviceId","duration","emailDomain","entrypoint","entrypoint_experiment","entrypoint_variation","events","experiments","flowBeginTime","flowId","flushTime","initialView","isSampledUser","lang","marketing","migration","navigationTiming","numStoredAccounts","planId","productId","reason","referrer","screen","service","syncEngines","startTime","timers","uid","uniqueUserId","userPreferences","utm_campaign","utm_content","utm_medium","utm_source","utm_term"],U=new g.a("10s").milliseconds(),F="none";u.a.extend(o.prototype,p.a.Events,{ALLOWED_FIELDS:V,initialize:function(){var e=this;this._flush=function(){return e.flush(!0)},a()(this._window).on("unload",this._flush),a()(this._window).on("blur",this._flush),this._resetInactivityFlushTimeout(),this._initializeSubscriptionModel()},destroy:function(){a()(this._window).off("unload",this._flush),a()(this._window).off("blur",this._flush),this._clearInactivityFlushTimeout()},notifications:{"flow.initialize":"_initializeFlowModel","flow.event":"_logFlowEvent","set-email-domain":"_setEmailDomain","set-sync-engines":"_setSyncEngines","set-uid":"_setUid","clear-uid":"_clearUid","subscription.initialize":"_initializeSubscriptionModel","once!view-shown":"_setInitialView"},_initializeFlowModel:function(){if(!this._flowModel){var e=new O({metrics:this,sentryMetrics:this._sentryMetrics,window:this._window});e.has("flowId")&&(this._flowModel=e)}},_initializeSubscriptionModel:function(e){this._subscriptionModel=e&&e.has("productId")?e:new R.a({},{window:this._window})},_logFlowEvent:function(e){if(this._flowModel){var t=e.viewName&&this.addViewNamePrefix(e.viewName),n=function(e,t){return t?"flow.".concat(t.replace(/^oauth\./,""),".").concat(e):"flow.".concat(e)}(e.event,t);e.once?this.logEventOnce(n):this.logEvent(n)}},_setInitialView:function(e){this._initialViewName=e.viewName,this.logEventOnce("loaded")},flush:function(e){var t=this;this._clearInactivityFlushTimeout();var n=this.getFilteredData();if(!this._isFlushRequired(n,this._lastFlushedData))return Promise.resolve();this._lastFlushedData=n,this._speedTrap.events.clear(),this._speedTrap.timers.clear(),this._numStoredAccounts="";var i=function(){return t._send(n,e)};return i().then(function(e){return e||i()})},_isFlushRequired:function(e,t){return!t||u.a.any(e,function(e,n){return"duration"!==n&&"flushTime"!==n&&(!("events"===n&&!e.length)&&(!("timers"===n&&!e.length)&&!u.a.isEqual(t[n],e)))})},_clearInactivityFlushTimeout:function(){clearTimeout(this._inactivityFlushTimeout)},_resetInactivityFlushTimeout:function(){var e=this;this._clearInactivityFlushTimeout(),this._inactivityFlushTimeout=setTimeout(function(){e.logEvent("inactivity.flush"),e.flush()},this._inactivityFlushMs)},getAllData:function(){var e=this._speedTrap.getLoad(),t=this._speedTrap.getUnload(),n=this.getFlowEventMetadata(),r=u.a.extend({},e,t,{broker:this._brokerType,context:this._context,deviceId:n.deviceId||F,emailDomain:this._emailDomain,entrypoint:this._entrypoint,entrypoint_experiment:this._entrypointExperiment,entrypoint_variation:this._entrypointVariation,experiments:i(this._activeExperiments),flowBeginTime:n.flowBeginTime,flowId:n.flowId,flushTime:Date.now(),initialView:this._initialViewName,isSampledUser:this._isSampledUser,lang:this._lang,marketing:i(this._marketingImpressions),migration:this._migration,numStoredAccounts:this._numStoredAccounts,planId:this._subscriptionModel.get("planId")||void 0,productId:this._subscriptionModel.get("productId")||void 0,referrer:this._referrer,screen:{clientHeight:this._clientHeight,clientWidth:this._clientWidth,devicePixelRatio:this._devicePixelRatio,height:this._screenHeight,width:this._screenWidth},service:this._service,startTime:this._startTime,syncEngines:this._syncEngines,uid:this._uid,uniqueUserId:this._uniqueUserId,userPreferences:this._userPreferences,utm_campaign:this._utmCampaign,utm_content:this._utmContent,utm_medium:this._utmMedium,utm_source:this._utmSource,utm_term:this._utmTerm});return JSON.parse(JSON.stringify(r))},getFilteredData:function(){var e=this,t=u.a.pick(this.getAllData(),V);return u.a.pick(t,function(t,n){return(!e._lastFlushedData||"navigationTiming"!==n)&&(!u.a.isUndefined(t)&&""!==t)})},_send:function(e,t){var n=this,i="".concat(this._collector,"/metrics"),r=JSON.stringify(e);return this._env.hasSendBeacon()?Promise.resolve().then(function(){return n._window.navigator.sendBeacon(i,r)}):this._xhr.ajax({async:!t,contentType:"application/json",data:r,type:"POST",url:i}).then(function(){return!0},function(){return!1})},logEvent:function(e){this._resetInactivityFlushTimeout(),this.events.capture(e),L.test(e)&&this.flush()},logEventOnce:function(e){this._eventMemory[e]||(this.logEvent(e),this._eventMemory[e]=!0)},markEventLogged:function(e){this._eventMemory[e]=!0},startTimer:function(e){this._resetInactivityFlushTimeout(),this.timers.start(e)},stopTimer:function(e){this._resetInactivityFlushTimeout(),this.timers.stop(e)},logError:function(e){this.logEvent(this.errorToId(e))},errorToId:function(e){var t=e.context;return t||(t=e.viewName?this.addViewNamePrefix(e.viewName):"unknown context"),N.a.interpolate("error.%s.%s.%s",[t,e.namespace||"unknown namespace",e.errno||e+""])},setService:function(e){this._service=e||F},setViewNamePrefix:function(){this._viewNamePrefix=arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},addViewNamePrefix:function(e){return this._viewNamePrefix?"".concat(this._viewNamePrefix,".").concat(e):e},logView:function(e){this.logEvent("screen.".concat(this.addViewNamePrefix(e)))},logViewEvent:function(e,t){this.logEvent("".concat(this.addViewNamePrefix(e),".").concat(t))},logExperiment:function(e,t){if(this._logFlowEvent({event:"experiment.".concat(e,".").concat(t),once:!0}),e&&t){var n=this._activeExperiments;n[e]||(n[e]={}),n[e][t]={choice:e,group:t}}},logUserPreferences:function(e,t){this._userPreferences[e]=!!t},logMarketingImpression:function(e,t){var n=this._marketingImpressions;n[e=e||"unknown"]||(n[e]={}),n[e][t]={campaignId:e,clicked:!1,url:t}},logMarketingClick:function(e,t){var n=this.getMarketingImpression(e=e||"unknown",t);n&&(n.clicked=!0)},getMarketingImpression:function(e,t){var n=this._marketingImpressions;return n[e]&&n[e][t]},setBrokerType:function(e){this._brokerType=e},isCollectionEnabled:function(){return this._isSampledUser},getFlowEventMetadata:function(){var e=this._flowModel&&this._flowModel.attributes||{},t=this._subscriptionModel&&this._subscriptionModel.attributes||{};return{deviceId:e.deviceId,entrypoint:r(this._entrypoint),entrypointExperiment:r(this._entrypointExperiment),entrypointVariation:r(this._entrypointVariation),flowBeginTime:e.flowBegin,flowId:e.flowId,utmCampaign:r(this._utmCampaign),utmContent:r(this._utmContent),utmMedium:r(this._utmMedium),utmSource:r(this._utmSource),utmTerm:r(this._utmTerm),productId:t.productId||void 0,planId:t.planId||void 0}},getFlowModel:function(){return this._flowModel},getSubscriptionModel:function(){return this._subscriptionModel},logNumStoredAccounts:function(e){this._numStoredAccounts=e},_setEmailDomain:function(e){var t=function(e){if(e){var t=e.split("@")[1];return h.a.POPULAR_EMAIL_DOMAINS[t]?t:h.a.OTHER_EMAIL_DOMAIN}}(e);t&&(this._emailDomain=t)},_setSyncEngines:function(e){e&&(this._syncEngines=e)},_setUid:function(e){e&&(this._uid=e)},_setPlanProductId:function(e){var t=e.planId,n=e.productId;t&&(this._planId=t),n&&(this._productId=n)},_clearUid:function(){this._uid=F}}),l.a.mixin(o,k.a);t.a=o},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(1),s=n(6),a=n.n(s),c=n(4),u=n(2),l=n.n(u),d=a.a.Model.extend({defaults:{token:void 0},initialize:function(e){this._oAuthClient=(e=e||{}).oAuthClient,this.set("token",e.token)},destroy:function(){return this._oAuthClient.destroyToken(this.get("token"))}}),h=n(60),f=n(65),p=n(57),m=n(107),g=n(3),v={accountResetToken:void 0,displayName:void 0,email:void 0,grantedPermissions:void 0,hadProfileImageSetBefore:void 0,lastLogin:void 0,originalLoginEmail:void 0,permissions:void 0,profileImageId:void 0,profileImageUrl:void 0,profileImageUrlDefault:void 0,recoveryKeyId:void 0,sessionToken:void 0,sessionTokenContext:void 0,uid:void 0,verified:void 0},_=r.a.extend({accessToken:void 0,declinedSyncEngines:void 0,hasBounced:void 0,keyFetchToken:void 0,needsOptedInToMarketingEmail:void 0,newsletters:void 0,offeredSyncEngines:void 0,unwrapBKey:void 0,verificationMethod:void 0,verificationReason:void 0},v),y=Object.keys(_),w=Object.keys(v),b={"profile:avatar":"profileImageUrl","profile:display_name":"displayName","profile:email":"email","profile:uid":"uid"},E=a.a.Model.extend({defaults:_,initialize:function(){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._oAuthClientId=t.oAuthClientId,this._oAuthClient=t.oAuthClient,this._profileClient=t.profileClient,this._fxaClient=t.fxaClient,this._metrics=t.metrics,this._notifier=t.notifier,this._sentryMetrics=t.sentryMetrics,this._subscriptionsConfig=t.subscriptionsConfig,this._upgradeGrantedPermissions(),!this.get("sessionToken")&&this.get("sessionTokenContext")&&this.discardSessionToken(),this.on("change:sessionToken",function(){e.has("sessionToken")||e.discardSessionToken()}),this._boundOnChange=this.onChange.bind(this),this.on("change",this._boundOnChange),this.get("email")&&this._notifier&&this._notifier.trigger("set-email-domain",this.get("email"))},resumeTokenFields:["email","needsOptedInToMarketingEmail","newsletters"],resumeTokenSchema:{email:g.a.email(),needsOptedInToMarketingEmail:g.a.boolean(),newsletters:g.a.newslettersArray()},fetch:function(){var e=this;return!this.get("sessionToken")||this.get("verified")?Promise.resolve():this.sessionStatus().catch(function(t){!o.a.is(t,"UNAUTHORIZED")&&e._sentryMetrics&&e._sentryMetrics.captureException(Error(r.a.isEmpty(t)?"Something went wrong!":t))})},discardSessionToken:function(){this.unset("profileImageId"),this.unset("profileImageUrl"),this.unset("accessToken"),this.unset("sessionTokenContext"),this.unset("sessionToken")},_fetchProfileOAuthToken:function(){var e=this;return this.createOAuthToken(this._oAuthClientId,{scope:"profile profile:write clients:write",ttl:300}).then(function(t){e.set("accessToken",t.get("token"))})},profileClient:function(){var e=this;return this.fetch().then(function(){if(!e.get("verified"))throw o.a.toError("UNVERIFIED_ACCOUNT");if(e._needsAccessToken())return e._fetchProfileOAuthToken()}).then(function(){return e._profileClient})},isFromSync:function(){return this.get("sessionTokenContext")===l.a.SESSION_TOKEN_USED_FOR_SYNC},isDefault:function(){var e=this;return!r.a.find(y,function(t){return e.get(t)!==_[t]})},_needsAccessToken:function(){return this.get("verified")&&!this.get("accessToken")},createOAuthToken:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.get("sessionToken");return i?this._fxaClient.createOAuthToken(i,e,n).then(function(e){return new d({oAuthClient:t._oAuthClient,token:e.access_token})}):Promise.reject(o.a.toError("INVALID_TOKEN"))},createOAuthCode:function(e,t,n){var i=this.get("sessionToken");return i?this._fxaClient.createOAuthCode(i,e,t,n):Promise.reject(o.a.toError("INVALID_TOKEN"))},getOAuthScopedKeyData:function(e,t){var n=this.get("sessionToken");return n?this._fxaClient.getOAuthScopedKeyData(n,e,t):Promise.reject(o.a.toError("INVALID_TOKEN"))},sessionStatus:function(){var e=this;return Promise.resolve().then(function(){var t=e.get("sessionToken");if(!t)throw o.a.toError("INVALID_TOKEN");return e._fxaClient.recoveryEmailStatus(t)}).then(function(t){return e.set(t),t},function(t){throw o.a.is(t,"INVALID_TOKEN")&&e.discardSessionToken(),t})},accountProfile:function(){var e=this;return Promise.resolve().then(function(){var t=e.get("sessionToken");if(!t)throw o.a.toError("INVALID_TOKEN");return e._fxaClient.accountProfile(t)})},settingsData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Promise.resolve().then(function(){if(e._settingsData&&!t.force)return e._settingsData;var n=e.get("sessionToken");if(!n)throw o.a.toError("INVALID_TOKEN");return e._fxaClient.account(n).then(function(t){return e._settingsData=t})})},sessionVerificationStatus:function(){var e=this;return Promise.resolve().then(function(){var t=e.get("sessionToken");if(!t)throw o.a.toError("INVALID_TOKEN");return e._fxaClient.sessionVerificationStatus(t)}).then(null,function(t){throw o.a.is(t,"INVALID_TOKEN")&&e.discardSessionToken(),t})},isSignedIn:function(){return this._fxaClient.isSignedIn(this.get("sessionToken"))},toJSON:function(){throw Error("toJSON is explicitly disabled, use `.pick` instead")},toPersistentJSON:function(){return this.pick(w)},securityEvents:function(){var e=this;return Promise.resolve().then(function(){var t=e.get("sessionToken");if(!t)throw o.a.toError("INVALID_TOKEN");return e._fxaClient.securityEvents(t)})},deleteSecurityEvents:function(){var e=this;return Promise.resolve().then(function(){var t=e.get("sessionToken");if(!t)throw o.a.toError("INVALID_TOKEN");return e._fxaClient.deleteSecurityEvents(t)})},setProfileImage:function(e){this.set({profileImageId:e.get("id"),profileImageUrl:e.get("url"),profileImageUrlDefault:e.get("default")}),this.get("profileImageUrl")&&this.set("hadProfileImageSetBefore",!0)},onChange:function(){delete this._profileFetchPromise},_profileFetchPromise:null,fetchProfile:function(){var e=this;return this._profileFetchPromise?this._profileFetchPromise:(this.off("change",this._boundOnChange),this._profileFetchPromise=this.getProfile().then(function(t){var n=new f.a({default:t.avatarDefault,url:t.avatar});e.setProfileImage(n),e.set("displayName",t.displayName),e.on("change",e._boundOnChange)}),this._profileFetchPromise)},fetchCurrentProfileImage:function(){var e=this,t=new f.a;return this.getAvatar().then(function(n){return t=new f.a({default:n.avatarDefault,id:n.id,url:n.avatar}),e.setProfileImage(t),t.fetch()}).then(function(){return t})},signIn:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.get("email");return Promise.resolve().then(function(){var s=n.get("sessionToken");if(e){var a={metricsContext:n._metrics.getFlowEventMetadata(),reason:i.reason||m.a.SIGN_IN,resume:i.resume,skipCaseError:!0,unblockCode:i.unblockCode},c=n.get("originalLoginEmail");return c&&(a.originalLoginEmail=c),i.verificationMethod&&(a.verificationMethod=i.verificationMethod),s?n._fxaClient.sessionReauth(s,r,e,t,a).catch(function(i){if(!o.a.is(i,"INVALID_TOKEN"))throw i;return n.discardSessionToken(),n._fxaClient.signIn(r,e,t,a)}):n._fxaClient.signIn(r,e,t,a)}if(s)return n._fxaClient.recoveryEmailStatus(s);throw o.a.toError("UNEXPECTED_ERROR")}).then(function(e){return i.originalLoginEmail&&r.toLowerCase()!==i.originalLoginEmail.toLowerCase()&&(e.email=i.originalLoginEmail),n.set(e),n._notifier.trigger("set-uid",n.get("uid")),e}).catch(function(s){if(o.a.is(s,"INCORRECT_EMAIL_CASE"))return n.set("originalLoginEmail",r),n.set("email",s.email),n.signIn(e,t,i);if(o.a.is(s,"THROTTLED")||o.a.is(s,"REQUEST_BLOCKED")){var a=n.get("originalLoginEmail");a&&n.set("email",a)}throw s})},signUp:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._fxaClient.signUp(this.get("email"),e,t,{metricsContext:this._metrics.getFlowEventMetadata(),resume:i.resume,verificationMethod:i.verificationMethod}).then(function(e){n.set(e)})},retrySignUp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._fxaClient.signUpResend(e,this.get("sessionToken"),{resume:t.resume})},requestVerifySession:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._fxaClient.sessionVerifyResend(this.get("sessionToken"),{redirectTo:e.redirectTo})},verifySignUp:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.get("needsOptedInToMarketingEmail");i&&(this.unset("needsOptedInToMarketingEmail"),n.marketingOptIn=!0);var r=this.get("newsletters");return r&&r.length&&(this.unset("newsletters"),n.newsletters=r),this._fxaClient.verifyCode(this.get("uid"),e,n).then(function(){i&&(t._notifier.trigger("flow.initialize"),t._notifier.trigger("flow.event",{event:"newsletter.subscribed"}))})},verifySessionCode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.get("newsletters");return n&&n.length&&(this.unset("newsletters"),t.newsletters=n),this._fxaClient.sessionVerifyCode(this.get("sessionToken"),e,t)},verifySessionResendCode:function(){return this._fxaClient.sessionResendVerifyCode(this.get("sessionToken"))},verifyTokenCode:function(e){return this._fxaClient.verifyTokenCode(this.get("sessionToken"),this.get("uid"),e)},checkEmailExists:function(){return this._fxaClient.checkAccountExistsByEmail(this.get("email"))},checkUidExists:function(){return this._fxaClient.checkAccountExists(this.get("uid"))},signOut:function(){return this._notifier.trigger("clear-uid"),this._fxaClient.sessionDestroy(this.get("sessionToken"))},destroy:function(e){var t=this;return this._fxaClient.deleteAccount(this.get("email"),e,this.get("sessionToken")).then(function(){t._notifier.trigger("clear-uid"),t.trigger("destroy",t)})},_upgradeGrantedPermissions:function(){var e=this;if(this.has("grantedPermissions")){var t=this.get("grantedPermissions"),n=function(n){var i={};t[n].forEach(function(e){i[e]=!0}),e.setClientPermissions(n,i)};for(var i in t)n(i);this.unset("grantedPermissions")}},getClientPermissions:function(e){return(this.get("permissions")||{})[e]||{}},getClientPermission:function(e,t){return this.getClientPermissions(e)[t]},setClientPermissions:function(e,t){var n=this.get("permissions")||{};n[e]=t,this.set("permissions",n)},hasSeenPermissions:function(e,t){var n=Object.keys(this.getClientPermissions(e)),i=[t].concat(n);return 0===r.a.without.apply(r.a,i).length},getPermissionsWithValues:function(e){var t=this;return e.map(function(e){var n=b[e];return n&&t.has(n)?e:null}).filter(function(e){return null!==e})},changePassword:function(e,t,n){var i=this,r=this._fxaClient,s=this.get("email");return r.checkPassword(s,e,this.get("sessionToken")).then(function(){if(e===t)throw o.a.toError("PASSWORDS_MUST_BE_DIFFERENT");return r.changePassword(s,e,t,i.get("sessionToken"),i.get("sessionTokenContext"),n)}).then(this.set.bind(this))},set:r.a.wrap(a.a.Model.prototype.set,function(e,t,n,i){var o;for(var s in r.a.isObject(t)?o=t:(o={})[t]=n,o)if(!r.a.contains(y,s))throw Error(s+" cannot be set on an Account");return e.call(this,t,n,i)}),completePasswordReset:function(e,t,n,i,r){return this._fxaClient.completePasswordReset(this.get("email"),e,t,n,i,{emailToHashWith:r,metricsContext:this._metrics.getFlowEventMetadata()}).then(this.set.bind(this))},fetchAttachedClients:function(){return this._fxaClient.attachedClients(this.get("sessionToken"))},fetchSubscriptionPlans:function(){var e=this;return this._fetchShortLivedSubscriptionsOAuthToken().then(function(t){return e._fxaClient.getSubscriptionPlans(t.get("token"))})},getSubscriptions:function(){return this.settingsData().then(function(e){return Array.isArray(e.subscriptions)?e.subscriptions:[]})},hasSubscriptions:function(){return this.getSubscriptions().then(function(e){return e.length>0})},fetchActiveSubscriptions:function(){var e=this;return this._fetchShortLivedSubscriptionsOAuthToken().then(function(t){return e._fxaClient.getActiveSubscriptions(t.get("token"))})},createSupportTicket:function(e){var t=this;return this._fetchShortLivedSubscriptionsOAuthToken().then(function(n){return t._fxaClient.createSupportTicket(n.get("token"),e)})},_fetchShortLivedSubscriptionsOAuthToken:function(){return this.createOAuthToken(this._subscriptionsConfig.managementClientId,{scope:this._subscriptionsConfig.managementScopes,ttl:30})},destroyAttachedClient:function(e){var t=e.pick("deviceId","sessionTokenId","clientId","refreshTokenId"),n=this.get("sessionToken");return this._fxaClient.attachedClientDestroy(n,t).then(function(){e.destroy()})},resetPassword:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._fxaClient.passwordReset(this.get("email"),e,{metricsContext:this._metrics.getFlowEventMetadata(),resume:t.resume})},retryResetPassword:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._fxaClient.passwordResetResend(this.get("email"),e,t,{metricsContext:this._metrics.getFlowEventMetadata(),resume:n.resume})},canFetchKeys:function(){return this.has("keyFetchToken")&&this.has("unwrapBKey")},accountKeys:function(){return this.canFetchKeys()?this._fxaClient.accountKeys(this.get("keyFetchToken"),this.get("unwrapBKey")):Promise.resolve(null)},isPasswordResetComplete:function(e){return this._fxaClient.isPasswordResetComplete(e)},sendUnblockEmail:function(){return this._fxaClient.sendUnblockEmail(this.get("email"),{metricsContext:this._metrics.getFlowEventMetadata()})},rejectUnblockCode:function(e){return this._fxaClient.rejectUnblockCode(this.get("uid"),e)},sendSms:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._fxaClient.sendSms(this.get("sessionToken"),e,t,{features:n.features||[],metricsContext:this._metrics.getFlowEventMetadata()})},smsStatus:function(e){var t=this.get("sessionToken");return t?this._fxaClient.smsStatus(t,e):Promise.resolve({ok:!1})},recoveryEmails:function(){return this._fxaClient.recoveryEmails(this.get("sessionToken"))},recoveryEmailCreate:function(e){return this._fxaClient.recoveryEmailCreate(this.get("sessionToken"),e)},recoveryEmailDestroy:function(e){return this._fxaClient.recoveryEmailDestroy(this.get("sessionToken"),e)},resendEmailCode:function(e){return this._fxaClient.resendEmailCode(this.get("sessionToken"),e)},getEmails:function(){return this._fxaClient.getEmails(this.get("sessionToken"))},createEmail:function(e){return this._fxaClient.createEmail(this.get("sessionToken"),e)},deleteEmail:function(e){return this._fxaClient.deleteEmail(this.get("sessionToken"),e)},setPrimaryEmail:function(e){return this._fxaClient.recoveryEmailSetPrimaryEmail(this.get("sessionToken"),e)},createTotpToken:function(){return this._fxaClient.createTotpToken(this.get("sessionToken"),{metricsContext:this._metrics.getFlowEventMetadata()})},deleteTotpToken:function(){return this._fxaClient.deleteTotpToken(this.get("sessionToken"))},verifyTotpCode:function(e,t){var n={metricsContext:this._metrics.getFlowEventMetadata(),service:t};return this._fxaClient.verifyTotpCode(this.get("sessionToken"),e,n)},checkTotpTokenExists:function(){return this._fxaClient.checkTotpTokenExists(this.get("sessionToken"))},consumeRecoveryCode:function(e){return this._fxaClient.consumeRecoveryCode(this.get("sessionToken"),e,{metricsContext:this._metrics.getFlowEventMetadata()})},replaceRecoveryCodes:function(){return this._fxaClient.replaceRecoveryCodes(this.get("sessionToken"))},createRecoveryBundle:function(e){return this._fxaClient.createRecoveryBundle(this.get("email"),e,this.get("sessionToken"),this.get("uid"))},deleteRecoveryKey:function(){return this._fxaClient.deleteRecoveryKey(this.get("sessionToken"))},checkRecoveryKeyExists:function(){return this._fxaClient.recoveryKeyExists(this.get("sessionToken"))},checkRecoveryKeyExistsByEmail:function(){return this._fxaClient.recoveryKeyExists(void 0,this.get("email"))},passwordForgotVerifyCode:function(e,t,n){return this._fxaClient.passwordForgotVerifyCode(e,t,n)},getRecoveryBundle:function(e,t){return this._fxaClient.getRecoveryBundle(this.get("accountResetToken"),e,t)},resetPasswordWithRecoveryKey:function(e,t,n,i,r,o){return this._fxaClient.resetPasswordWithRecoveryKey(e,this.get("email"),t,n,i,r,{emailToHashWith:o,metricsContext:this._metrics.getFlowEventMetadata()}).then(this.set.bind(this))}},{ALLOWED_KEYS:y,PERMISSIONS_TO_KEYS:b});["getProfile","getAvatar","deleteAvatar","uploadAvatar","postDisplayName"].forEach(function(e){E.prototype[e]=function(){for(var t,n=this,i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];return this.profileClient().then(function(i){var o;t=i;var s=n.get("accessToken");return(o=t[e]).call.apply(o,[t,s].concat(r))}).catch(function(i){if(h.a.is(i,"INVALID_TOKEN"))n.discardSessionToken();else if(h.a.is(i,"UNAUTHORIZED"))return n._fetchProfileOAuthToken().then(function(){var i,o=n.get("accessToken");return(i=t[e]).call.apply(i,[t,o].concat(r))}).catch(function(e){throw h.a.is(e,"UNAUTHORIZED")&&n.discardSessionToken(),e});throw i})}}),c.a.mixin(E,p.a);t.a=E},function(e,t){"use strict";t.a={PASSWORD_CHANGE:"password_change",PASSWORD_CHECK:"password_check",PASSWORD_RESET:"password_reset",SIGN_IN:"signin"}},function(e,t,n){"use strict";function i(){}function r(e){this._window=e.window,this._sendTimeoutLength=e.sendTimeoutLength||f,this._requests={},this._logger=new h.a(this._window)}function o(){}var s=n(0),a=n.n(s),c=n(6);a.a.extend(i.prototype,n.n(c).a.Events,{initialize:function(){},teardown:function(){},send:function(e,t,n){n&&n()}});var u=i,l=n(50),d=n.n(l),h=n(32),f=new d.a("90s").milliseconds();r.prototype={add:function(e,t){this.remove(e),t.timeout=this._window.setTimeout(function(e){this._logger.error("Response not received for: "+e)}.bind(this,t.command),this._sendTimeoutLength),this._requests[e]=t},remove:function(e){var t=this.get(e);t&&(this._window.clearTimeout(t.timeout),delete this._requests[t.messageId])},get:function(e){return this._requests[e]},clear:function(){for(var e in this._requests)this.remove(this._requests[e])},each:function(e){a.a.each(this._requests,e)}};var p=0;a.a.extend(o.prototype,new u,{initialize:function(e){var t=this;if(this._sender=(e=e||{}).sender,!this._sender)throw Error("DuplexChannel must have a sender");if(this._receiver=e.receiver,!this._receiver)throw Error("DuplexChannel must have a receiver");this._receiver.on("error",function(e){return t.onErrorReceived(e)}),this._receiver.on("message",function(e){return t.onMessageReceived(e)}),this._outstandingRequests=new r({sendTimeoutLength:e.sendTimeoutLength,window:e.window})},teardown:function(){this._outstandingRequests.clear(),this._sender&&this._sender.teardown(),this._receiver&&this._receiver.teardown()},send:function(e,t){var n=this;return Promise.resolve().then(function(){return n._sender.send(e,t,null)})},request:function(e,t){var n=this,i=this.createMessageId(e,t);return new Promise(function(r,o){n._outstandingRequests.add(i,{command:e,data:t,messageId:i,reject:o,resolve:r}),n._sender.send(e,t,i)}).catch(function(e){throw n._outstandingRequests.remove(i),e})},createMessageId:function(){return"".concat(Date.now()).concat(++p)},onMessageReceived:function(e){var t=this.parseMessage(e),n=t.command,i=t.data,r=t.messageId;if(r){var o=this._outstandingRequests.get(r);o&&(this._outstandingRequests.remove(r),o.resolve(i))}this.trigger(n,i)},parseMessage:function(e){return a.a.pick(e,"command","data","messageId")},onErrorReceived:function(e){var t=this.parseError(e),n=t.error,i=t.messageId;if(i){var r=this._outstandingRequests.get(i);r&&(this._outstandingRequests.remove(i),r.reject(n))}this.trigger("error",n)},parseError:function(e){return a.a.pick(e,"error","messageId")},rejectAllOutstandingRequests:function(e){var t=this;this._outstandingRequests.each(function(n,i){t._outstandingRequests.remove(i),n.reject(e)})}});t.a=o},,function(e,t,n){"use strict";function i(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=n(248);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"hash",value:function(e){var t=r("".concat(this.name||"",":").concat(e)).substr(0,8);return parseInt(t,16)}},{key:"luckyNumber",value:function(e){return this.hash(e)/4294967295}},{key:"bernoulliTrial",value:function(e,t){return this.luckyNumber(t)<=e}},{key:"uniformChoice",value:function(e,t){return e[this.hash(t)%e.length]}},{key:"choose",value:function(){if(this.deprecated)throw Error("Experiment deprecated: ".concat(this.name));throw Error("choose must be overridden")}},{key:"isTestEmail",value:function(e){return/.+@softvision\.(com|ro)$/.test(e)||/.+@mozilla\.(com|org)$/.test(e)}}])&&i(t.prototype,n),o&&i(t,o),e}()},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(2),s=n.n(o),a=n(17),c=n(21);t.default={dependsOn:[c.a],_hasWebChannelSupport:function(){var e=this.getUserAgent(),t=e.browser.version;return e.isFirefoxDesktop()&&t>=40||e.isFirefoxAndroid()&&t>=43},isSyncAuthSupported:function(){return!!this._hasWebChannelSupport()},_getSyncContext:function(){var e=this.getUserAgent();return e.isFirefoxAndroid()?s.a.FX_FENNEC_V1_CONTEXT:e.isFirefoxDesktop()?s.a.FX_DESKTOP_V3_CONTEXT:void 0},getEscapedSyncUrl:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.window.location.origin,o=this.relier,c=r.a.extend({context:this._getSyncContext(),entrypoint:t,service:s.a.SYNC_SERVICE,utm_campaign:o.get("utmCampaign"),utm_content:o.get("utmContent"),utm_medium:o.get("utmMedium"),utm_source:o.get("utmSource"),utm_term:o.get("utmTerm")},n),u=a.a.objToSearchString(c);return"".concat(i,"/").concat(e).concat(u)}}},function(e,t,n){"use strict";n.r(t);var i=n(0);t.default={setTimeout:function(e,t){var n=this;this._timeouts||(this._timeouts=[]),this._isListeningForDestroy||(this._isListeningForDestroy=!0,this.on("destroy",function(){var e=this.window||window;Object(i.each)(this._timeouts,function(t){e.clearTimeout(t)}),this._timeouts=null}.bind(this)));var r=(this.window||window).setTimeout(function(){n.clearTimeout(r),e.call(n)},t);return this._timeouts.push(r),r},clearTimeout:function(e){e&&((this.window||window).clearTimeout(e),this._timeouts=Object(i.without)(this._timeouts,e))}}},,,function(e,t,n){"use strict";n.r(t);var i=n(5),r=n.n(i),o=n(6),s=n.n(o),a=n(4),c=n(112),u=s.a.View.extend({tagName:"div",className:"spinner",_count:0,start:function(e){var t=this;if(this._count++,1>=this._count)return this._removeIndicatorTimeout?(this.clearTimeout(this._removeIndicatorTimeout),void(this._removeIndicatorTimeout=null)):void(this._showIndicatorTimeout=setTimeout(function(){t._showIndicatorTimeout=null,t.showIndicator(e)},100))},destroy:function(){this.done(),this.trigger("destroy"),this.remove()},done:function(){var e=this;if(this._count&&(this._count--,!this._count))return this._showIndicatorTimeout?(this.clearTimeout(this._showIndicatorTimeout),this._showIndicatorTimeout=null,void this.removeIndicator()):void(this._removeIndicatorTimeout=this.setTimeout(function(){e._removeIndicatorTimeout=null,e.removeIndicator()},100))},showIndicator:function(e){(e=r()(e)).length&&(this._progressEl=e,this._progressHTML=e.html(),e.prop("disabled",!0).html(this.$el))},removeIndicator:function(e){(e=this._progressEl)&&e.length&&e.prop("disabled",!1).html(this._progressHTML)},isVisible:function(){return!!this._count}});a.a.mixin(u,c.default),t.default=u},function(e,t,n){"use strict";n.r(t);var i={};t.default=function(e){var t,n,r,o=e.hideMethod,s=e.viewType;return r=function(){var e=i[s];e&&e.view!==this&&e.view[e.hideMethod](),i[s]={hideMethod:o,view:this}},(n=e.showMethod)in(t={beforeDestroy:function(){var e=i[s];e&&e.view===this&&(i[s]=null,delete i[s])}})?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}},function(e,t,n){"use strict";n.r(t);var i,r=n(4),o=n(11),s=n(28),a=n(265),c=n.n(a),u=n(54),l=n(68),d=n(83),h=o.default.extend({template:c.a,className:"account-recovery",viewName:"settings.account-recovery",events:{"click .account-recovery-support-link":"_clickedSupportLink","click .confirm-password":"_confirmPassword","click .confirm-revoke":"_confirmRevoke","click .refresh-status":"refresh"},_clickedSupportLink:function(){this.logFlowEvent("clicked-support-link",this.viewName)},_confirmPassword:function(){this.navigate("settings/account_recovery/confirm_password")},_confirmRevoke:function(){this.navigate("settings/account_recovery/confirm_revoke")},initialize:function(){this.listenTo(this.model,"change:hasRecoveryKey",this.render)},beforeRender:function(){var e=this,t=this.getSignedInAccount();return this.setupSessionGateIfRequired().then(function(n){if(n)return t.checkRecoveryKeyExists().then(function(t){e.model.set("hasRecoveryKey",t.exists)})})},setInitialContext:function(e){var t=this.model.get("hasRecoveryKey");e.set({escapedLearnMoreLinkAttributes:'class="account-recovery-support-link" target="_blank" href="'.concat(encodeURI("https://support.mozilla.org/kb/reset-your-firefox-account-password-recovery-keys"),'"'),hasRecoveryKey:!!t,isPanelOpen:this.isPanelOpen()}),this.metrics.logUserPreferences(this.className,!!t)},refresh:Object(u.default)(function(){return this.setLastCheckedTime(),this.logFlowEvent("refresh",this.viewName),this.render()},"button.settings-button.refresh-status",350)});r.a.mixin(h,Object(d.default)({gatedHref:"settings/account_recovery",title:(i="Account Recovery",i)}),s.default,l.default),t.default=h},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(1),s=n(4),a=n(7),c=n(15),u=n(39),l=n(10),d=n(40),h=n(268),f=a.default.extend({template:n.n(h).a,className:"account-recovery-confirm-password",viewName:"settings.account-recovery.confirm-password",events:r.a.extend({},a.default.prototype.events,{"click .cancel-link":Object(l.default)("_cancelPasswordConfirm")}),_cancelPasswordConfirm:function(){this.logFlowEvent("cancel",this.viewName),this.navigate("settings/account_recovery",{hasRecoveryKey:!1})},setInitialContext:function(e){var t=this.getSignedInAccount().get("email");e.set({email:t})},submit:function(){var e=this,t=this.getSignedInAccount(),n=this.getElementValue("#password");return t.createRecoveryBundle(n).then(function(t){e.logFlowEvent("success",e.viewName),e.displaySuccess("Account recovery enabled"),e.model.set("recoveryKey",t.recoveryKey),e.showRecoveryKeyView=!0,e.navigate("settings/account_recovery/recovery_key",t)}).catch(function(t){if(o.a.is(t,"INCORRECT_PASSWORD"))return e.logFlowEvent("invalidPassword",e.viewName),e.showValidationError(e.$("#password"),t);throw t})}});s.a.mixin(f,c.default,d.default,u.default),t.default=f},function(e,t,n){"use strict";n.r(t);var i=n(5),r=n.n(i),o=n(23);t.default={isModal:!0,notifications:{navigate:"closePanel","navigate-back":"closePanel"},events:{keydown:"keyDownListener"},openPanel:function(){var e=this;this.$el.modal({clickClose:!1,escapeClose:!1,opacity:.75,showClose:!1,zIndex:999}),this.$el.on(r.a.modal.AFTER_CLOSE,function(){return e.onAfterClose()}),this._previousActiveElement=document.activeElement,this._boundBlockerClick=this.onBlockerClick.bind(this),r()(".blocker").on("click",this._boundBlockerClick);var t=this.$el[0];t.setAttribute("tabindex","1"),t.focus();var n=t.querySelectorAll('a[href], button, input[type="radio"]'),i=Array.prototype.slice.call(n);this._keyDownListener=this.keyDownListener.bind(null,i),t.addEventListener("keydown",this._keyDownListener)},keyDownListener:function(e,t){t.isComposing||t.keyCode===o.a.IME||(t.keyCode===o.a.TAB?(t.preventDefault(),t.shiftKey?function(){var t=e.indexOf(arguments.length>0&&void 0!==arguments[0]?arguments[0]:e[e.length-1])-1;return e[t]?e[t]:e[e.length-1]}(document.activeElement).focus():function(){var t=e.indexOf(arguments.length>0&&void 0!==arguments[0]?arguments[0]:e[0])+1;return e[t]?e[t]:e[0]}(document.activeElement).focus()):t.keyCode===o.a.ENTER&&"radio"===document.activeElement.getAttribute("type")&&!1===document.activeElement.checked&&(t.preventDefault(),document.activeElement.checked=!0))},closePanel:function(){r.a.modal.isActive()&&r.a.modal.close()},onBlockerClick:function(e){e.target===e.currentTarget&&(this.closePanel(),this.trigger("modal-cancel"))},onAfterClose:function(){this.destroy(!0),this.trigger("modal-cancel"),r()(".blocker").off("click",this._boundBlockerClick),this._previousActiveElement.focus()},destroy:function(){this.closePanel()}}},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(4),s=n(15),a=n(7),c=n(39),u=n(10),l=n(40),d=n(269),h=a.default.extend({template:n.n(d).a,className:"account-recovery-confirm-revoke",viewName:"settings.account-recovery.confirm-revoke",events:r.a.extend({},a.default.prototype.events,{"click .cancel-button":Object(u.default)("_returnToAccountRecovery")}),beforeRender:function(){var e=this;return this.getSignedInAccount().checkRecoveryKeyExists().then(function(t){t.exists||e.navigate("/settings/account_recovery")})},submit:function(){var e=this;return this.getSignedInAccount().deleteRecoveryKey().then(function(){e.displaySuccess("Account recovery revoked"),e.logFlowEvent("success",e.viewName),e.navigate("settings/account_recovery",{hasRecoveryKey:!1})})}});o.a.mixin(h,s.default,l.default,c.default),t.default=h},function(e,t,n){"use strict";n.r(t);var i=n(4),r=n(11),o=n(40),s=n(270),a=n.n(s),c=n(122),u=n(271),l=n.n(u),d=n(21),h=r.default.extend({template:l.a,className:"account-recovery-key",viewName:"settings.account-recovery.recovery-key",events:{"click .copy-option":"_copyKey","click .done-link":"_done","click .download-option":"_downloadKey","click .print-option":"_printKey"},_formatRecoveryKey:function(e){if(e)return e.replace(/(\w{4})/g,"$1 ").replace(/(^\s+|\s+$)/,"")},_getFormatedRecoveryKeyFilename:function(){var e=this.getSignedInAccount().get("email")+" "+"Firefox Recovery Key";return e.length>200&&(e=e.substring(0,196)),"".concat(e,".txt")},_copyKey:function(){return this.logFlowEvent("copy-option",this.viewName),this.copy(this.recoveryKey,"#account-recovery-key")},_downloadKey:function(){this.logFlowEvent("download-option",this.viewName),this.download(this.recoveryKey,this._getFormatedRecoveryKeyFilename(),"#account-recovery-key")},_printKey:function(){this.logFlowEvent("print-option",this.viewName),this.print(a()({recoveryKey:this.recoveryKey}))},_done:function(){this.navigate("settings/account_recovery",{hasRecoveryKey:!0})},setInitialContext:function(e){this.recoveryKey=this._formatRecoveryKey(e.get("recoveryKey")),e.set({isIos:this.getUserAgent().isIos(),recoveryKey:this.recoveryKey})},beforeRender:function(){var e=this;return this.getSignedInAccount().checkRecoveryKeyExists().then(function(t){t.exists?e.recoveryKey=e.model.get("recoveryKey"):e.navigate("/settings/account_recovery")})}});i.a.mixin(h,o.default,c.default,d.a),t.default=h},function(e,t,n){"use strict";n.r(t);var i=n(5),r=n.n(i),o=n(21),s=function(e){return e};t.default={dependsOn:[o.a],setInitialContext:function(){this.$(".modal-success").addClass("hidden")},copy:function(e,t){if(r()('<textArea id="temporary-copy-area" class="temporary-copy-text-area"></textArea>').appendTo(t),this.$("textArea.temporary-copy-text-area").text(e),this.getUserAgent().isIos()){var n=this.window.document.getElementById("temporary-copy-area");n.contentEditable=!0,n.readOnly=!0;var i=document.createRange();i.selectNodeContents(n);var o=this.window.getSelection();o.removeAllRanges(),o.addRange(i),n.setSelectionRange(0,999999)}else this.$("textArea.temporary-copy-text-area").select().focus();try{this.window.document.execCommand("copy"),this._displaySuccess(s("Copied"))}catch(e){this._displayError(s("Failed to copy. Please manually copy."))}this.$("textArea.temporary-copy-text-area").remove()},download:function(e,t,n){var i=new Blob([e],{type:"text/plain"}),o=URL.createObjectURL(i),a='\n      <a id="download-link" href="'.concat(o,'" download="').concat(t,'"></a>\n    ');r()(a).appendTo(n),this.window.document.getElementById("download-link").click(),this.$("download-link").remove(),this._displaySuccess(s("Downloaded"))},print:function(e){var t=this.window.open("","Print","height=600,width=800");t.document.write(e),t.document.close(),t.focus(),t.print(),t.close(),this._displaySuccess(s("Printed"))},_displaySuccess:function(e){this.$(".error").addClass("hidden"),this.$(".modal-success").removeClass("hidden"),this.$(".modal-success").addClass("success"),this.$(".modal-success").text(this.translate(e))},_displayError:function(e){this.$(".error").removeClass("hidden"),this.$(".modal-success").addClass("hidden"),this.$(".modal-success").removeClass("success"),this.$(".error").text(this.translate(e))}}},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(1),s=n(25),a=n(4),c=n(2),u=n.n(c),l=n(180),d=n(50),h=n.n(d),f=n(61),p=n.n(f),m=n(7),g=n(40),v=n(65),_=n(115),y=n(272),w=u.a.PROFILE_IMAGE_EXPORT_SIZE,b=u.a.PROFILE_IMAGE_DISPLAY_SIZE,E=u.a.PROFILE_IMAGE_JPEG_QUALITY,S=u.a.DEFAULT_PROFILE_IMAGE_MIME_TYPE,A=m.default.prototype,I=m.default.extend({template:n.n(y).a,className:"avatar-camera",viewName:"settings.avatar.camera",setInitialContext:function(e){e.set({streaming:this.streaming})},initialize:function(e){var t=this;if(this.exportLength=e.exportLength||w,this.displayLength=e.displayLength||b,this.streaming=!1,this.broker.isAutomatedBrowser()){var n=new h.a("3s").milliseconds();this.streaming=!0,this.startStream=function(){return t.enableForm()},this.stream={stop:function(){}},this.window.setTimeout(r.a.bind(this.onLoadedMetaData,this),n)}},startStream:function(){var e=this;return this.window.navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(t){e.stream=t,e.video.srcObject=t},function(){e._avatarProgressIndicator.done(),e.displayError(o.a.toError("NO_CAMERA"))})},stopAndDestroyStream:function(){if(this.stream){var e=this.stream,t=this.video;e.getTracks?e.getTracks().forEach(function(e){e.stop()}):e.stop?e.stop():t.pause&&"mozSrcObject"in t&&(t.pause(),t.mozSrcObject=null),delete this.stream}},beforeRender:function(){new p.a(this.window).hasGetUserMedia()||this.navigate("settings/avatar/change",{error:o.a.toError("NO_CAMERA")})},afterRender:function(){return this.startStream(),this._avatarProgressIndicator=new _.default,this.wrapper=this.$("#avatar-camera-wrapper"),this.video=this.$("#video")[0],this._avatarProgressIndicator.start(this.$(".progress-container")),this.canvas=this.$("#canvas")[0],this.video.addEventListener("loadedmetadata",r.a.bind(this.onLoadedMetaData,this),!1),A.afterRender.call(this)},onLoadedMetaData:function(){if(this.streaming)this._avatarProgressIndicator.done();else{this.video.play();var e=this.video.videoWidth,t=this.video.videoHeight;0!==t&&0!==e||this.logError(o.a.toError("INVALID_CAMERA_DIMENSIONS")),t>e?(this.width=this.displayLength,this.height=t/(e/this.width)):(this.height=this.displayLength,this.width=e/(t/this.height));var n=this.centeredPos(this.width,this.height,this.displayLength);this.wrapper.css({marginLeft:n.left,marginTop:n.top}),this.canvas.width=this.width,this.canvas.height=this.height,this._avatarProgressIndicator.done(),this.$(".progress-container").addClass("hidden"),this.$("#video").height(this.height).removeClass("hidden"),this.streaming=!0,this.enableForm()}},isValidEnd:function(){return this.streaming},submit:function(){var e,t=this,n=this.getSignedInAccount();return this.logAccountImageChange(n),this.takePicture().then(function(t){return e=Date.now(),n.uploadAvatar(t)}).then(function(i){return t.logFlowEvent("timing.avatar.upload.".concat(Date.now()-e)),t.stopAndDestroyStream(),t.updateProfileImage(new v.a(i),n),t.navigate("settings"),i})},beforeDestroy:function(){this.stopAndDestroyStream()},takePicture:function(){var e=this;return new Promise(function(t){var n=e.video.videoWidth,i=e.video.videoHeight,r=Math.min(i,n);e.canvas.width=e.exportLength,e.canvas.height=e.exportLength;var o=e.centeredPos(n,i,r),s=e.video;e.broker.isAutomatedBrowser()&&((s=new Image).src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAAAAAA6fptVAAAACklEQVQYV2P4DwABAQEAWk1v8QAAAABJRU5ErkJggg=="),e.canvas.getContext("2d").drawImage(s,Math.abs(o.left),Math.abs(o.top),r,r,0,0,e.exportLength,e.exportLength),e.canvas.toBlob(t,S,E)})},centeredPos:function(e,t,n){return e>t?{left:(n-e)/2,top:0}:{left:0,top:(n-t)/2}}});a.a.mixin(I,s.default,l.default,g.default),t.default=I},function(e,t,n){"use strict";n.r(t);var i=n(5),r=n.n(i),o=n(1),s=n(25),a=n(4),c=n(220),u=n(7),l=n(219),d=n(40),h=n(273),f=u.default.prototype,p=u.default.extend({template:n.n(h).a,className:"avatar-change",viewName:"settings.avatar.change",events:{"change #imageLoader":"fileSet","click #file":"filePicker","click .remove":"removeAvatar"},initialize:function(){this.FileReader=FileReader},getAccount:function(){return this._account||(this._account=this.getSignedInAccount()),this._account},beforeRender:function(){"avatar"===this.relier.get("setting")&&this.relier.unset("setting")},setInitialContext:function(e){var t=this.getSignedInAccount();e.set({avatarDefault:t.get("profileImageUrlDefault"),hasProfileImage:t.has("profileImageUrl")})},afterVisible:function(){var e=this;return f.afterVisible.call(this).then(function(){return e.displayAccountProfileImage(e.getAccount())})},afterRender:function(){var e=r()("<div/>").css({height:1,opacity:0,overflow:"hidden",width:1});return this.$(":file").wrap(e),f.afterRender.call(this)},removeAvatar:function(){var e=this,t=this.getAccount();return this.deleteDisplayedAccountProfileImage(t).then(function(){e.navigate("settings")},function(t){throw e.displayError(t),t})},filePicker:function(){this.$("#imageLoader").click()},fileSet:function(e){var t=this,i=Date.now();return new Promise(function(r,s){var a=e.target.files[0],u=t.getAccount();t.logAccountImageChange(u);var d=function(e){var n=o.a.toMessage(e&&e.errno?e:"UNUSABLE_IMAGE");t.displayError(n),s(n)};if(a.type.match("image.*")){var h=new t.FileReader;h.onload=function(e){var o=e.target.result;l.a.load(o).then(function(e){t.logFlowEvent("timing.avatar.load.".concat(Date.now()-i));var s=new c.a({height:e.height,src:o,type:a.type,width:e.width});return Promise.all([n.e(1).then(n.t.bind(null,367,7)),Promise.all([n.e(1),n.e(21)]).then(n.t.bind(null,369,7))]).then(function(){t.navigate("settings/avatar/crop",{cropImg:s}),r()})}).catch(d)},h.readAsDataURL(a)}else d()})}});a.a.mixin(p,s.default,d.default),t.default=p},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return C.a.createElement("div",{id:"change-password",className:"settings-unit"},C.a.createElement(m,null),C.a.createElement(x,{account:e.account,submit:e.submit,displayError:e.displayError,isPanelOpen:e.isPanelOpen,showValidationError:e.showValidationError}))}function m(){return C.a.createElement("div",{className:"settings-unit-stub"},C.a.createElement("header",{className:"settings-unit-summary"},C.a.createElement("h2",{className:"settings-unit-title"},P("Password"))),C.a.createElement("button",{className:"settings-button secondary-button settings-unit-toggle","data-href":"settings/change_password"},P("Change...")))}n.r(t),n.d(t,"ChangePasswordHeader",function(){return m}),n.d(t,"ChangePasswordForm",function(){return x});var g=n(1),v=n(27),_=n(4),y=n(7),w=n(45),b=n(39),E=n(88),S=n(22),A=n(28),I=n(14),C=n.n(I),T=n(221),O=n.n(T),k=new(n(90).a),P=function(e){return k.get(e)},x=function(){function e(t){var n;return o(this,e),f(l(n=c(this,u(e).call(this,t))),"setOldPassword",function(e){n.setState({oldPass:e.target.value})}),f(l(n),"setNewPassword",function(e){n.setState({newPass:e.target.value})}),f(l(n),"setNewVPassword",function(e){n.setState({newVPass:e.target.value})}),f(l(n),"resetInputValuesAndFocus",function(){n.setState({newPass:"",newVPass:"",oldPass:"",hasFocused:!1},function(){n.componentDidUpdate()})}),f(l(n),"handleSubmit",function(e){if(e.preventDefault(),!(n.validateFormField("#old_password")&&n.validateFormField("#new_password")&&n.validateFormField("#new_vpassword")))return e.stopPropagation(),!1;if(n.state.newPass!==n.state.newVPass){var t=g.a.toError("PASSWORDS_DO_NOT_MATCH");n.props.showValidationError("#new_vpassword",t)}else n.props.submit(n.state.oldPass,n.state.newPass).then(function(){n.resetInputValuesAndFocus()},function(e){if(g.a.is(e,"INCORRECT_PASSWORD"))return n.props.showValidationError("#old_password",e);if(g.a.is(e,"PASSWORDS_MUST_BE_DIFFERENT"))return n.props.showValidationError("#new_password",e);throw e})}),n.state={hasFocused:!1,mail:t.account.get("email")||"",newPass:"",newVPass:"",oldPass:""},n}return d(e,C.a.Component),a(e,[{key:"showValidationErrors",value:function(){if(this.state.newPass&&this.validateFormField("#new_password")&&this.state.newVPass&&this.state.newPass!==this.state.newVPass){var e=g.a.toError("PASSWORDS_DO_NOT_MATCH");this.props.showValidationError("#new_vpassword",e)}}},{key:"componentDidUpdate",value:function(){!this.state.hasFocused&&this.props.isPanelOpen&&(this._input.focus(),this.setState({hasFocused:!0})),this.showValidationErrors()}},{key:"validateFormField",value:function(e){try{$(e).validate()}catch(t){return this.props.showValidationError(e,t),!1}return!0}},{key:"render",value:function(){var e=this;return C.a.createElement("div",{className:"settings-unit-details"},C.a.createElement("div",{className:"error"}),C.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit},C.a.createElement("p",null,P("Once you're finished, use your new password to sign in on all of your devices.")),C.a.createElement("input",{type:"email",defaultValue:this.state.mail,className:"hidden"}),C.a.createElement("div",{className:"input-row password-row"},C.a.createElement("input",{type:"password",className:"password",id:"old_password",placeholder:P("Old password"),onChange:this.setOldPassword,required:!0,pattern:".{8,}",value:this.state.oldPass,ref:function(t){return e._input=t}}),C.a.createElement("div",{className:"input-help input-help-forgot-pw links centered"},C.a.createElement("a",{href:"/reset_password",className:"reset-password"},P("Forgot password?")))),C.a.createElement("div",{className:"input-row password-row"},C.a.createElement("input",{type:"password",className:"password check-password tooltip-below",id:"new_password",placeholder:P("New password"),required:!0,pattern:".{8,}","data-synchronize-show":"true",value:this.state.newPass,onChange:this.setNewPassword}),C.a.createElement("div",{className:"helper-balloon"})),C.a.createElement("div",{className:"input-row password-row"},C.a.createElement("input",{type:"password",className:"password check-password tooltip-below",id:"new_vpassword",placeholder:P("Re-enter password"),required:!0,pattern:".{8,}","data-synchronize-show":"true",value:this.state.newVPass,onChange:this.setNewVPassword})),C.a.createElement("div",{className:"button-row"},C.a.createElement("button",{type:"submit",className:"settings-button primary-button"},P("Change")),C.a.createElement("button",{className:"settings-button secondary-button cancel",onClick:this.resetInputValuesAndFocus},P("Cancel")))))}}]),e}(),N=function(){function e(){var t,n;o(this,e);for(var i=arguments.length,r=Array(i),s=0;i>s;s++)r[s]=arguments[s];return f(l(n=c(this,(t=u(e)).call.apply(t,[this].concat(r)))),"className","change-password"),f(l(n),"viewName","settings.change-password"),n}return d(e,y["default"]),a(e,[{key:"getAccount",value:function(){return this.getSignedInAccount()}},{key:"initialize",value:function(){for(var t,n=arguments.length,i=Array(n),o=0;n>o;o++)i[o]=arguments[o];(t=r(u(e.prototype),"initialize",this)).call.apply(t,[this].concat(i)),this.listenTo(this.model,"change",this.renderReactComponent)}},{key:"renderReactComponent",value:function(){var e=this;return k.fetch().then(function(){O.a.render(C.a.createElement(p,{account:e.getAccount(),submit:function(t,n){return e.submit(t,n)},displayError:function(t){return e.displayError(t)},isPanelOpen:e.isPanelOpen(),showValidationError:function(t,n){return e.showValidationError(e.$(t),n)}}),e.$el.get(0))})}},{key:"openPanel",value:function(){return this.renderReactComponent()}},{key:"onFormSubmit",value:function(){}},{key:"submit",value:function(e,t){var n=this,i=this.getSignedInAccount();return this.hideError(),this.user.changeAccountPassword(i,e,t,this.relier).then(function(){return n.logViewEvent("success"),n.invokeBrokerMethod("afterChangePassword",i)}).then(function(){return n.displaySuccess(P("Password changed successfully")),n.navigate("settings"),n.render()})}}]),e}();_.a.mixin(N,w.default,b.default,Object(E.default)({balloonEl:".helper-balloon",passwordEl:"#new_password"}),A.default,S.default,v.default),t.default=N},function(e,t,n){"use strict";n.r(t);var i=n(4),r=n(7),o=n(40),s=n(10),a=n(85),c=n(279),u=n.n(c),l=function(e){return e},d={lost:l("We're sorry to hear about this. You should change your Firefox Account password, and look for information from your device manufacturer about erasing your data remotely."),suspicious:l("We're sorry to hear about this. If this was a device you really don't trust, you should change your Firefox Account password, and change any passwords saved in Firefox.")},h=r.default.extend({template:u.a,className:"clients-disconnect",viewName:"settings.clients.disconnect",events:{click:"_returnToClientListAfterDisconnect","click .cancel-disconnect":Object(s.default)("_returnToClientList"),"click button[type=submit]":"_returnToConnectAnotherDevice"},initialize:function(){var e=this;this.hasDisconnected=!1,this.on("modal-cancel",function(){return e._returnToClientList()})},beforeRender:function(){var e=this.model.get("clients"),t=this.model.get("clientId");if(!e||!t)return this._returnToClientList();this.client=e.get(t)},setInitialContext:function(e){e.set({hasDisconnected:this.hasDisconnected,reasonHelp:this.reasonHelp}),this.hasDisconnected||e.set("deviceName",this.client.get("name"))},isValidStart:function(){return!!this.hasDisconnected||this.$("input[name=disconnect-reasons]:checked").length>0},submit:function(){var e=this,t=Date.now(),n=this.client,i=this.$("input[name=disconnect-reasons]:checked").val();return this.logViewEvent("submit."+i),this.user.destroyAccountAttachedClient(this.user.getSignedInAccount(),n).then(function(){e.logFlowEvent("timing.clients.disconnect.".concat(Date.now()-t)),e.hasDisconnected=!0,e.reasonHelp=d[i],n.get("isCurrentSession")?e.navigateToSignIn():e.reasonHelp?e.render():e._returnToClientListAfterDisconnect()})},_returnToClientListAfterDisconnect:function(){this.hasDisconnected&&this._returnToClientList()},_returnToClientList:function(){this.navigate("settings/clients")}});i.a.mixin(h,o.default,a.default),t.default=h},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(5),s=n.n(o),a=n(226),c=n(4),u=n(2),l=n.n(u),d=n(7),h=n(10),f=n(28),p=n(85),m=n(29),g=n(280),v=n.n(g),_=n(21),y=function(e){return e},w=m.a.interpolate(l.a.DOWNLOAD_LINK_TEMPLATE_ANDROID,{campaign:"fxa-devices-page",creative:"button"}),b=m.a.interpolate(l.a.DOWNLOAD_LINK_TEMPLATE_IOS,{campaign:"fxa-devices-page",creative:"button"}),E={device:{withoutLocation:{precise:y("Last seen %(translatedTimeAgo)s"),approximate:y("Last seen over %(translatedTimeAgo)s")},withCountry:{precise:y("Last seen %(translatedTimeAgo)s in %(translatedCountry)s"),approximate:y("Last seen over %(translatedTimeAgo)s in %(translatedCountry)s")},withCityStateCountry:{precise:y("Last seen %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s"),approximate:y("Last seen over %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s")}},oauth:{withoutLocation:{precise:y("Last active %(translatedTimeAgo)s"),approximate:y("Last active over %(translatedTimeAgo)s")},withCountry:{precise:y("Last active %(translatedTimeAgo)s in %(translatedCountry)s"),approximate:y("Last active over %(translatedTimeAgo)s in %(translatedCountry)s")},withCityStateCountry:{precise:y("Last active %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s"),approximate:y("Last active over %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s")}},web:{withoutLocation:{precise:y("%(translatedTimeAgo)s"),approximate:y("Over %(translatedTimeAgo)s")},withCountry:{precise:y("%(translatedTimeAgo)s in %(translatedCountry)s"),approximate:y("Over %(translatedTimeAgo)s in %(translatedCountry)s")},withCityStateCountry:{precise:y("%(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s"),approximate:y("Over %(translatedTimeAgo)s near %(translatedCity)s, %(translatedState)s, %(translatedCountry)s")}}},S=d.default.prototype,A=d.default.extend({template:v.a,className:"clients",viewName:"settings.clients",initialize:function(e){this._attachedClients=e.attachedClients,this._attachedClients||(this._attachedClients=new a.a([],{notifier:e.notifier})),this.listenTo(this._attachedClients,"remove",this._onItemRemoved)},_formatAccessTimeAndScope:function(e){var t=this;return r.a.map(e,function(e){return e.title=e.name,e.scope&&(e.title+=" - "+e.scope),e.lastAccessTimeFormatted?e.clientType===l.a.CLIENT_TYPE_WEB_SESSION?(e.title=e.userAgent?t.translate(y("Web Session, %(userAgent)s"),{userAgent:e.userAgent}):y("Web Session"),t._setLastAccessTimeFormatted(e,E.web)):e.clientType===l.a.CLIENT_TYPE_DEVICE?t._setLastAccessTimeFormatted(e,E.device):e.clientType===l.a.CLIENT_TYPE_OAUTH_APP&&t._setLastAccessTimeFormatted(e,E.oauth):e.lastAccessTimeFormatted=e.clientType===l.a.CLIENT_TYPE_DEVICE?y("Last seen time unknown"):"",e})},_setLastAccessTimeFormatted:function(e,t){var n,i,r,o=e.lastAccessTimeFormatted;e.location&&e.location.country?(i=e.location.country,e.location.city&&e.location.stateCode?(n=e.location.city,r=e.location.stateCode,t=t.withCityStateCountry):t=t.withCountry):t=t.withoutLocation,e.approximateLastAccessTime>e.lastAccessTime?(o=e.approximateLastAccessTimeFormatted,t=t.approximate):t=t.precise,e.lastAccessTimeFormatted=this.translate(t,{translatedCity:n,translatedCountry:i,translatedState:r,translatedTimeAgo:o})},setInitialContext:function(e){var t=this._attachedClients.toJSON();e.set({clients:this._formatAccessTimeAndScope(t),devicesSupportUrl:"https://support.mozilla.org/kb/fxa-managing-devices?utm_source=accounts.firefox.com&utm_medium=referral&utm_campaign=fxa-devices",isPanelOpen:this.isPanelOpen(),linkAndroid:w,linkIOS:b,showMobileApps:this._showMobileApps(t)})},events:{"click .client-disconnect":Object(h.default)("_onDisconnectClient"),"click .clients-refresh":"startRefresh","click [data-get-app]":"_onGetApp"},_showMobileApps:function(e){return!r.a.some(e,function(e){return"mobile"===e.deviceType||"tablet"===e.deviceType})},_onItemRemoved:function(e){var t=this,n=e.get("id");s()("#"+n).slideUp(150,function(){t.render()})},_onDisconnectClient:function(e){var t=this,n=this._attachedClients.get(s()(e.currentTarget).data("id")),i=n.get("clientType");this.logViewEvent(i+".disconnect"),i===l.a.CLIENT_TYPE_DEVICE?this.navigate("settings/clients/disconnect",{clientId:n.get("id"),clients:this._attachedClients}):this.user.destroyAccountAttachedClient(this.user.getSignedInAccount(),n).then(function(){if(i===l.a.CLIENT_TYPE_WEB_SESSION)return t.user.sessionStatus().then(null,function(){t.clearSessionAndNavigateToSignIn()})})},_onGetApp:function(e){var t=this.$el.find(e.currentTarget).data("get-app");this.logViewEvent("get.".concat(t))},openPanel:function(){return this.logViewEvent("open"),this.$el.find(".client-list-form").hide(),this.$el.find(".settings-button.settings-unit-loading").show(),this.validateAndSubmit(null,{artificialDelay:A.MIN_REFRESH_INDICATOR_MS})},_fetchAttachedClients:function(){var e=this,t=Date.now();return this._attachedClients.fetchClients(this.user).then(function(){e.logFlowEvent("timing.clients.fetch.".concat(Date.now()-t))})},startRefresh:function(){this.$(".clients-refresh").data("minProgressIndicatorMs",A.MIN_REFRESH_INDICATOR_MS),this.logViewEvent("refresh")},submit:function(){if(this.isPanelOpen())return this._fetchAttachedClients()},afterSubmit:function(){var e=this;return S.afterSubmit.call(this).then(function(){return e.render()})}},{MIN_REFRESH_INDICATOR_MS:1600});c.a.mixin(A,f.default,p.default,_.a),t.default=A},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=function(e){return e},s=[{buttonName:o("Open Gmail"),link:"https://mail.google.com/mail/u/?authuser=",regex:/@gmail\.com$/,webmailType:"gmail"},{buttonName:o("Open Hotmail"),link:"https://outlook.live.com/",regex:/@hotmail\.com$/,webmailType:"hotmail"},{buttonName:o("Open Yahoo"),link:"https://mail.yahoo.com",regex:/@yahoo\.com$/,webmailType:"yahoo"},{buttonName:o("Open Outlook"),link:"https://outlook.live.com/",regex:/@outlook\.com$/,webmailType:"outlook"},{buttonName:o("Open Restmail"),link:"http://restmail.net/mail/",regex:/@restmail\.net/,webmailType:"restmail"}];t.default={events:{"click #open-webmail":"_webmailTabOpened"},addUserInfo:function(e,t){var n=this.getWebmailType(t);return"gmail"===n?e=e.concat(encodeURIComponent(t)):"restmail"===n&&(e=e.concat(t)),e},_getService:function(e){return r.a.find(s,function(t){return t.regex.test(e)})},setInitialContext:function(e){var t=e.get("email"),n=this.isOpenWebmailButtonVisible(t);e.set("isOpenWebmailButtonVisible",n),t&&n&&e.set({escapedWebmailLink:encodeURI(this.getWebmailLink(t)),webmailButtonText:this.getWebmailButtonText.bind(this,t),webmailType:this.getWebmailType(t)})},getWebmailLink:function(e){var t=this._getService(e).link;return this.addUserInfo(t,e)},isOpenWebmailButtonVisible:function(e){return this.broker.hasCapability("openWebmailButtonVisible")&&!!this._getService(e)},getWebmailButtonText:function(e){return this.translate(this._getService(e).buttonName)},getWebmailType:function(e){return this._getService(e).webmailType},_webmailTabOpened:function(e){var t=this.$el.find(e.target).data("webmailType");this.logViewEvent(t+"_clicked")}}},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var r,o=n(0),s=n.n(o),a=n(5),c=n.n(a),u=n(11),l=n(4),d=n(2),h=n.n(d),f=n(29),p=n(287),m=n.n(p),g=n(21),v=n(38),_=["ca","cs","da","de","en","es","et","fr","hu","id","it","ja","ko","lt","nb-NO","nl","pl","pt-BR","pt","ru","sk","sl","sv","tr","uk","zh-CN","zh-TW"],y=u.default.extend({template:m.a,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._marketingId=e.marketingId||h.a.MARKETING_ID_SPRING_2015,this._service=e.service,this._which=e.which},events:{"click .marketing-link":"_onMarketingClick"},setInitialContext:function(e){var t=this._shouldShowSignUpMarketing(),n=this._isIos(),i=this._isAndroid(),r=this._isOther(),o=this._storeLink(h.a.DOWNLOAD_LINK_TEMPLATE_ANDROID),s=this._storeImage("google_play_store_button","png"),a=this._storeLink(h.a.DOWNLOAD_LINK_TEMPLATE_IOS),c=this._storeImage("apple_app_store_button","svg"),u=this._marketingId;e.set({appStoreImage:c,downloadLinkAndroid:o,downloadLinkIos:a,isAndroid:i,isAutumn2016:u===h.a.MARKETING_ID_AUTUMN_2016,isIos:n,isOther:r,isSpring2015:u===h.a.MARKETING_ID_SPRING_2015,marketingId:u,playStoreImage:s,showSignUpMarketing:t})},afterRender:function(){var e=this;this.$(".marketing-link").each(function(t,n){e._logMarketingImpression(n)}),this.$el.addClass(this._marketingId)},_shouldShowSignUpMarketing:function(){var e=this.broker.hasCapability("emailVerificationMarketingSnippet"),t=this._isFirefoxMobile(),n=this.isSignIn(),i=this.isSignUp();return!!this._which||e&&(i||n)&&this._service===h.a.SYNC_SERVICE&&!t},_isFirefoxMobile:function(){var e=this.getUserAgent();return e.isFirefoxIos()||e.isFirefoxAndroid()},_isIos:function(){return!this._which&&this.getUserAgent().isIos()||this._which===y.WHICH.IOS},_isAndroid:function(){return!this._which&&this.getUserAgent().isAndroid()||this._which===y.WHICH.ANDROID},_isOther:function(){return!this._isIos()&&!this._isAndroid()||this._which===y.WHICH.BOTH},_storeLink:function(e){return f.a.interpolate(e,{campaign:"fxa-conf-page",creative:y.BUTTON_IDS[this._marketingId]})},_storeImage:function(e,t){var n=s.a.contains(_,this.lang)?this.lang:"en";return this._isHighRes()&&"png"===t&&(n+="@2x"),"/images/"+e+"/"+n+"."+t},_isHighRes:function(){var e=this.window;return!(!e.matchMedia||!e.matchMedia("(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 1.5dppx), (min-resolution: 144dpi)"))},_logMarketingImpression:function(e){var t=this._getMarketingLinkInfo(e),n=t.id,i=t.type,r=t.url;this.metrics.logMarketingImpression(n,r),this.notifier.trigger("marketing.impression",{id:n,type:i,url:r})},_onMarketingClick:function(e){this._logMarketingClick(e.currentTarget)},_logMarketingClick:function(e){var t=this._getMarketingLinkInfo(e),n=t.id,i=t.type,r=t.url;this.metrics.logMarketingClick(n,r),this.notifier.trigger("marketing.clicked",{id:n,type:i,url:r})},_getMarketingLinkInfo:function(e){var t=c()(e);return{id:t.data("marketing-id"),type:t.data("marketing-type"),url:t.attr("href")}}},{BUTTON_IDS:(r={},i(r,h.a.MARKETING_ID_AUTUMN_2016,"button-autumn-2016-connect-another-device"),i(r,h.a.MARKETING_ID_SPRING_2015,"button"),r),WHICH:{ANDROID:"android",BOTH:"both",IOS:"ios"}});l.a.mixin(y,g.a,v.default),t.default=y},function(e,t,n){"use strict";function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);e.length>t;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.r(t);var r=n(1),o=n(4),s=n(7),a=n(39),c=n(28),u=n(33),l=n(22),d=n(290),h=n.n(d),f=n(226),p=n(2),m=s.default.extend({template:h.a,className:"delete-account",viewName:"settings.delete-account",initialize:function(e){this._attachedClients=e.attachedClients,this._attachedClients||(this._attachedClients=new f.a([],{notifier:e.notifier})),this._activeSubscriptions=[]||!1,this._uniqueBrowserNames=[],this._hasTwoColumnProductList=!1,this._hideProductContainer=!1},setInitialContext:function(e){e.set({email:this.getSignedInAccount().get("email"),clients:this._attachedClients.toJSON(),isPanelOpen:this.isPanelOpen(),subscriptions:this._activeSubscriptions,uniqueBrowserNames:this._uniqueBrowserNames,hasTwoColumnProductList:this._hasTwoColumnProductList,hideProductContainer:this._hideProductContainer})},events:{"click .delete-account-checkbox":"_toggleEnableSubmit"},openPanel:function(){var e=this;return this.logViewEvent("open"),this.$el.find(".settings-unit-details").hide(),this.$el.find(".settings-button.settings-unit-loading").show(),Promise.all([this._fetchAttachedClients(),this._fetchActiveSubscriptions()]).then(function(){e._uniqueBrowserNames=e._setuniqueBrowserNames();var t=e._getNumberOfProducts();0===t?e._hideProductContainer=!0:e._hasTwoColumnProductList=t>=4}).catch(function(t){e.model.set("error",t),e.logError(t),e._hideProductContainer=!0}).finally(function(){return e.render()})},_fetchActiveSubscriptions:function(){var e=this,t=this.getSignedInAccount(),n=Date.now();return t.settingsData().then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).subscriptions,i=void 0===t?[]:t;e.logFlowEvent("timing.settings.fetch.".concat(Date.now()-n)),e._activeSubscriptions=i.filter(function(e){return"active"===e.status})})},_fetchAttachedClients:function(){var e=this,t=Date.now();return this._attachedClients.fetchClients(this.user).then(function(){e.logFlowEvent("timing.clients.fetch.".concat(Date.now()-t))})},_setuniqueBrowserNames:function(){return i(new Set(this._attachedClients.toJSON().filter(function(e){return e.clientType&&e.clientType===p.CLIENT_TYPE_WEB_SESSION&&e.userAgent}).map(function(e){return e.userAgent.replace(/[0-9]+/g,"browser")}))).map(function(e){return{name:e}})},_getNumberOfProducts:function(){var e=this._uniqueBrowserNames.length,t=!0,n=!1,i=void 0;try{for(var r,o=this._attachedClients.toJSON()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){!0===r.value.isOAuthApp&&e++}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}var s=!0,a=!1,c=void 0;try{for(var u,l=this._activeSubscriptions[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var d=u.value;d.plan_id&&"active"===d.status&&e++}}catch(e){a=!0,c=e}finally{try{s||null==l.return||l.return()}finally{if(a)throw c}}return e},_toggleEnableSubmit:function(){this._allCheckboxesAreChecked()?this.$(".delete-account-button").attr("disabled",!1):this.$(".delete-account-button").attr("disabled",!0)},_allCheckboxesAreChecked:function(){return this.$("".concat(".delete-account-checkbox",":checked")).length===this.$(".delete-account-checkbox").length},submit:function(){var e=this,t=this.getSignedInAccount(),n=this.getElementValue(".password");return this.user.deleteAccount(t,n).then(function(){return u.a.clear(),e.invokeBrokerMethod("afterDeleteAccount",t)}).then(function(){var t;e.logViewEvent("deleted"),e.relier.unset("email"),e.relier.unset("uid"),e.relier.set("action","email"),e.navigate("/",{success:(t="Account deleted successfully",t)},{clearQueryParams:!0})}).catch(function(t){if(r.a.is(t,"INCORRECT_PASSWORD"))return e.showValidationError(e.$("#password"),t);throw t})}});o.a.mixin(m,a.default,l.default,c.default),t.default=m},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return v.a.createElement("div",{id:"display-name",className:"settings-unit"},v.a.createElement("div",{className:"settings-unit-stub"},v.a.createElement(l,null),v.a.createElement(d,{displayName:e.displayName})),v.a.createElement("div",{className:"settings-unit-details"},v.a.createElement("div",{className:"error"}),v.a.createElement(E,{account:e.account,submit:e.submit,displayName:e.displayName})))}function l(){return v.a.createElement("header",{className:"settings-unit-summary"},v.a.createElement("h2",{className:"settings-unit-title"},b("Display name")))}function d(e){return e.displayName?v.a.createElement("button",{className:"settings-button secondary-button settings-unit-toggle","data-href":"settings/display_name"},v.a.createElement("span",{className:"change-button"},b("Changeâ€¦"))):v.a.createElement("button",{className:"settings-button primary-button settings-unit-toggle","data-href":"settings/display_name"},v.a.createElement("span",{className:"add-button"},b("Addâ€¦")))}n.r(t),n.d(t,"DisplayNameComponent",function(){return l}),n.d(t,"ChangeorAddButtonComponent",function(){return d}),n.d(t,"DisplayNameFormComponent",function(){return E});var h=n(25),f=n(4),p=n(11),m=n(28),g=n(14),v=n.n(g),_=n(221),y=n.n(_),w=new(n(90).a),b=function(e){return w.get(e)},E=function(){function e(t){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,a=o(e).call(this,t),c(s(n=!a||"object"!==i(a)&&"function"!=typeof a?s(r):a),"handleChange",function(e){n.setState({displayName:e.target.value},function(){n.isValid()})}),c(s(n),"handleSubmit",function(e){e.preventDefault(),n.setState({disableChangeButton:1},function(){n.props.submit(n.state.displayName)})});var u=t.account.get("displayName")||"";return n.state={disableChangeButton:(t.displayName||"")===u,displayName:u},n}var t,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(e,v.a.Component),t=e,(n=[{key:"componentDidUpdate",value:function(){this._input.focus()}},{key:"isValid",value:function(){this.setState({disableChangeButton:(this.props.displayName||"")===this.state.displayName})}},{key:"render",value:function(){var e=this;return v.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit},v.a.createElement("p",null,b("Choose the name you would like to appear in Firefox and when managing your account.")),v.a.createElement("div",{className:"input-row"},v.a.createElement("input",{type:"text",className:"text display-name",placeholder:b("Display name"),value:this.state.displayName,onChange:this.handleChange,ref:function(t){return e._input=t},autoComplete:"off"})),v.a.createElement("div",{className:"button-row"},v.a.createElement("button",{type:"submit",id:"submit_display",className:"settings-button primary-button",disabled:this.state.disableChangeButton},b("Change")),v.a.createElement("button",{className:"settings-button secondary-button cancel"},b("Cancel"))))}}])&&r(t.prototype,n),u&&r(t,u),e}(),S=p.default.extend({template:function(){return"<div />"},className:"display-name",onProfileUpdate:function(){this.render()},openPanel:function(){return this.render()},submit:function(e){var t=this,n=Date.now(),i=this.getSignedInAccount();return e=e.trim(),i.postDisplayName(e).then(function(){t.logViewEvent("success"),t.updateDisplayName(e),t.displaySuccess(b("Display name updated")),t.logFlowEvent("timing.displayName.change.".concat(Date.now()-n)),t.navigate("settings")})},render:function(){var e=this,t=this.getSignedInAccount();return Promise.all([w.fetch(),t.fetchProfile()]).then(function(){return y.a.render(v.a.createElement(u,{account:t,submit:function(t){return e.submit(t)},displayName:t.get("displayName")}),e.$el.get(0)),!0})}});f.a.mixin(S,h.default,m.default),t.default=S},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(10),o=function(e){return e},s={initialize:function(e){this._session=(e=e||{}).session},events:{'click a[href="/confirm_reset_password"]':Object(r.default)("sendAccountResetEmail")},notifyOfResetAccount:function(e){this._resetAccount=e;var t=i.a.toError("ACCOUNT_RESET");return t.forceMessage=o("Your account has been locked for security reasons")+'<br><a href="/confirm_reset_password">'+o("Reset password")+"</a>",this.unsafeDisplayError(t)},sendAccountResetEmail:function(){var e=this;return this.resetPassword(this._resetAccount.get("email")).catch(function(t){e._session.clear("oauth"),e.displayError(t)})}};t.default=s},function(e,t,n){"use strict";n.r(t);var i=n(15);t.default={dependsOn:[i.default],afterRender:function(){this.logFlowEventOnce("begin")}}},function(e,t,n){"use strict";n.r(t);var i=n(25),r=n(293),o=n.n(r);t.default={dependsOn:[i.default],initialize:function(){var e=this,t=this.getAccount();this.listenTo(t,"change:accessToken",function(){if(!t.get("accessToken"))return e.rerender()})},afterVisible:function(){var e=this.getAccount();return this.displayAccountProfileImage(e,{spinner:!0})},setInitialContext:function(e){e.set({userCardHTML:this.renderTemplate(o.a,{email:this.getAccount().get("email")})})}}},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(44),o=n(56);t.default={dependsOn:[r.default,o.default],initialize:function(){var e=this,t=this.getAccount();this.listenTo(t,"change:sessionToken",function(){if(!t.get("sessionToken"))return e.rerender()})},getPrefillEmail:function(){return(this.formPrefill.get("email")||this.relier.get("email")||"").trim()},isPasswordNeededForAccount:function(e){if(!e.get("sessionToken"))return!0;if(!e.get("email"))return!0;if(this.relier.wantsKeys())return!0;var t=this.getPrefillEmail();return!(!t||t===e.get("email"))},useLoggedInAccount:function(e){var t=this;return this.formPrefill.set(e.pick("email")),this.signIn(e,null,{onSuccess:function(){return t.logEvent("cached.signin.success")}}).catch(function(e){if(!i.a.is(e,"INVALID_TOKEN"))throw e;t.model.set("error",i.a.toError("SESSION_EXPIRED"))})},suggestedAccount:function(){var e=this.user,t=e.getChooserAccount();return this.allowSuggestedAccount(t)?t:e.initAccount({})},allowSuggestedAccount:function(e){var t=(e.get("email")||"").trim();if(!t)return!1;var n=this.getPrefillEmail();return!n||n===t}}},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var r=n(44),o=n(23),s=n(294),a=n.n(s);t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{dependsOn:[r.default],initialize:function(e){this._isCoppaEnabled=!1!==e.isCoppaEnabled},events:(e={},i(e,"input #age","onCoppaInput"),i(e,"keydown #age","onCoppaKeyDown"),i(e,"keyup #age","onCoppaInput"),e),beforeRender:function(){this.isCoppaEnabled()&&this.window.document.cookie.indexOf("tooyoung")>-1&&this.navigate("cannot_create_account")},setInitialContext:function(e){if(this.isCoppaEnabled()){var n=this.renderTemplate(a.a,{required:t.required});e.set({coppaHTML:n})}},isCoppaEnabled:function(){return this.relier.has("isCoppaEnabled")?this.relier.get("isCoppaEnabled"):this._isCoppaEnabled},isUserOldEnough:function(){return!this.isCoppaEnabled()||this._getAge()>=13},tooYoung:function(){this.notifier.trigger("signup.tooyoung"),this.window.document.cookie="tooyoung=1;",this.navigate("cannot_create_account")},onCoppaInput:function(){var e=this.$("#age");e.val().length>3&&e.val(e.val().substr(0,3))},onCoppaKeyDown:function(e){var t;(t=e.which)!==o.a.BACKSPACE&&t!==o.a.TAB&&t!==o.a.LEFT_ARROW&&t!==o.a.RIGHT_ARROW&&t!==o.a.UP_ARROW&&t!==o.a.DOWN_ARROW&&t!==o.a.ENTER&&(o.a.NUM_0>t||t>o.a.NUM_9)&&(o.a.NUMPAD_0>t||t>o.a.NUMPAD_9)&&e.preventDefault()},coppaHasValue:function(){return!!this._getCoppaValue()},_getCoppaValue:function(){return this.getElementValue("#age")},_getAge:function(){return parseInt(this._getCoppaValue(),10)}}}},function(e,t,n){"use strict";n.r(t);var i=n(33);t.default={getUidAndSetSignedInAccount:function(){var e=this.relier.get("uid");this.notifier.trigger("set-uid",e),this.user.getAccountByUid(e).isDefault()?e&&(i.a.clear(),this.user.clearSignedInAccount(),this.logViewEvent("signout.forced")):this.user.setSignedInAccountByUid(e)}}},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(25),s=n(1),a=n(4),c=n(7),u=n(68),l=n(28),d=n(83),h=n(314),f=n.n(h),p=n(10),m=n(54),g=function(e){return e},v=c.default.extend({template:f.a,className:"two-step-authentication",viewName:"settings.two-step-authentication",events:{"click .replace-codes-link":Object(p.default)("_replaceRecoveryCodes"),"click .show-code-link":Object(p.default)("_showCode"),"click .totp-cancel":Object(p.default)("cancel"),"click .totp-create":Object(p.default)("createToken"),"click .totp-delete":Object(p.default)("deleteToken"),"click .totp-refresh":Object(p.default)("refresh")},_checkTokenExists:function(){var e=this;return this.getSignedInAccount().checkTotpTokenExists().then(function(t){e._hasToken=t.exists})},_showQrCode:function(){this.$("#totp").removeClass("hidden")},_hideStatus:function(){this.$(".totp-list").addClass("hidden")},_showCode:function(){this.$(".manual-code").removeClass("hidden"),this.$(".show-code-link").addClass("hidden")},_getFormattedCode:function(e){return e.replace(/(\w{4})/g,"$1 ")},_showRecoveryCodes:function(e){this.model.set("recoveryCodes",e),this.navigate("/settings/two_step_authentication/recovery_codes",{recoveryCodes:e})},_replaceRecoveryCodes:function(){var e=this;return this.getSignedInAccount().replaceRecoveryCodes().then(function(t){e._showRecoveryCodes(t.recoveryCodes)})},beforeRender:function(){var e=this;return this.setupSessionGateIfRequired().then(function(t){if(t)return e._checkTokenExists()})},initialize:function(){this._hasToken=!1,this._statusVisible=!0},setInitialContext:function(e){e.set({escapedTotpSupportAttributes:r.a.escape("class=totp-support-link target=_blank href=https://support.mozilla.org/kb/secure-firefox-account-two-step-authentication"),hasToken:this._hasToken,isPanelOpen:this.isPanelOpen(),statusVisible:this._statusVisible}),this.metrics.logUserPreferences(this.className,this._hasToken)},cancel:function(){var e=this;return this.render().then(function(){return e.navigate("/settings")})},createToken:function(){var e=this,t=this.getSignedInAccount();return this.$el.find(".settings-unit-details").hide(),this.$el.find(".settings-button.settings-unit-loading").show(),t.createTotpToken().then(function(t){e.$el.find(".settings-unit-details").show(),e.$el.find(".settings-button.settings-unit-loading").hide(),e.$(".qr-image").attr("src",t.qrCodeUrl);var n=g("Use the code %(code)s to set up two-step authentication in supported applications.");e.$(".qr-image").attr("alt",e.translate(n,{code:t.secret})),e.$(".code").text(e._getFormattedCode(t.secret)),e._showQrCode(),e._hideStatus()})},deleteToken:function(){var e=this;return this.getSignedInAccount().deleteTotpToken().then(function(){return e.displaySuccess(g("Two-step authentication removed"),{closePanel:!0}),e.render()}).then(function(){return e.navigate("/settings")})},submit:function(){var e=this,t=this.getSignedInAccount(),n=this.getElementValue("input.totp-code");return t.verifyTotpCode(n,this.relier.get("service")).then(function(t){if(!t.success)throw s.a.toError("INVALID_TOTP_CODE");e.displaySuccess(g("Two-step authentication enabled"),{}),e._showRecoveryCodes(t.recoveryCodes),e.render()}).catch(function(t){return s.a.is(t,"INVALID_PARAMETER")&&(t=s.a.toError("INVALID_TOTP_CODE")),e.showValidationError(e.$("input.totp-code"),t)})},refresh:Object(m.default)(function(){return this.setLastCheckedTime(),this.render()},"button.settings-button.totp-refresh",350)});a.a.mixin(v,Object(d.default)({gatedHref:"settings/two_step_authentication",title:g("Two-step Authentication")}),o.default,u.default,l.default),t.default=v},function(e,t,n){"use strict";n.r(t);var i=n(45);t.default={dependsOn:[i.default],getSmsFeatures:function(){return["signinCodes"]}}},function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var d,h,f=n(1),p=n(135),m=n(4),g=n(136),v=n(188),_=n(222),y=n.n(_),w=n(133),b=n(44),E=n(7),S=n(0),A=n.n(S),I=n(23),C=n(244),T=n.n(C),O=n(82),k=[],P=["gmail","qq","yandex","o2","rambler","googlemail","t-online","mail","web","sbcglobal","msn","hotmail","me","aol","seznam","comcast","orange","gmx","ymail","outlook","live","yahoo"],x=[],N=5,R="Did you mean <span %(escapedEmailSuggestionAttrs)s>%(escapedDomain)s</span>?",D=n(22),M=n(70),L=n(189),V=n(190),U=n(297),F=n.n(U),j=n(5),B=n.n(j),G=new Set(["126.com","163.com","21cn.com","abv.bg","alice.it","aliyun.com","aol.com","aol.it","arcor.de","arnet.com.ar","att.net","bell.net","bellsouth.net","bigpond.com","bk.ru","bluewin.ch","blueyonder.co.uk","bol.com.br","bt.com","btinternet.com","charter.net","comcast.net","cox.net","daum.net","earthlink.net","email.com","email.it","facebook.com","fastmail.fm","fibertel.com.ar","foxmail.com","free.fr","freemail.hu","freenet.de","freeserve.co.uk","games.com","globo.com","globomail.com","gmai.com","gmail.com","gmil.com","gmx.at","gmx.com","gmx.de","gmx.fr","gmx.net","google.com","googlemail.com","hanmail.net","hotmail.be","hotmail.ca","hotmail.co.uk","hotmail.com.ar","hotmail.com.br","hotmail.com.mx","hotmail.com","hotmail.de","hotmail.es","hotmail.fr","hotmail.it","hush.com","hushmail.com","icloud.com","ig.com.br","iname.com","inbox.com","inbox.ru","interia.pl","itelefonica.com.br","juno.com","keemail.me","laposte.net","lavabit.com","libero.it","list.ru","live.be","live.co.uk","live.com.ar","live.com.mx","live.com","live.de","live.fr","live.it","live.nl","love.com","mac.com","mail.com","mail.ru","me.com","mozilla.com","msn.com","nate.com","naver.com","neuf.fr","ntlworld.com","o2.co.uk","o2.pl","oi.com.br","online.de","op.pl","orange.fr","orange.net","outlook.com.br","outlook.com","outlook.de","outlook.es","outlook.fr","pobox.com","poste.it","prodigy.net.mx","protonmail.ch","protonmail.com","qq.com","r7.com","rambler.ru","rediffmail.com","restmail.net","rocketmail.com","rogers.com","safe-mail.net","sbcglobal.net","seznam.cz","sfr.fr","shaw.ca","sina.cn","sina.com","sky.com","skynet.be","speedy.com.ar","sympatico.ca","t-online.de","talktalk.co.uk","telenet.be","teletu.it","terra.com.br","tin.it","tiscali.co.uk","tiscali.it","tuta.io","tutamail.com","tutanota.com","tutanota.de","tvcablenet.be","ukr.net","uol.com.br","verizon.net","virgilio.it","virgin.net","virginmedia.com","voo.be","wanadoo.co.uk","wanadoo.fr","web.de","wow.com","wp.pl","ya.ru","yahoo.ca","yahoo.co.id","yahoo.co.in","yahoo.co.jp","yahoo.co.kr","yahoo.co.uk","yahoo.com.ar","yahoo.com.au","yahoo.com.br","yahoo.com.mx","yahoo.com.ph","yahoo.com.sg","yahoo.com.tw","yahoo.com","yahoo.de","yahoo.es","yahoo.fr","yahoo.gr","yahoo.it","yandex.com","yandex.ru","yeah.net","ygm.com","ymail.com","zipmail.com.br","zoho.com"]),H=n(67),W=function(e){return e}("Mistyped email?"),K=function(e,t){return new Promise(function(n,r){var o=i(e.val().split("@"),2)[1];return G.has(o)?(t.logFlowEvent("email-domain-validation.skipped"),n()):d===o?"A"===h?(t.logFlowEvent("email-domain-validation.ignored"),n()):r():(t.logFlowEvent("email-domain-validation.triggered"),t.logEvent("emailDomainValidation.triggered"),void function(e){return H.a.ajax({data:{domain:e},type:"GET",url:"/validate-email-domain"})}(o).then(function(i){var s=i.result;return d=o,h=s,"MX"===s?(t.logEvent("emailDomainValidation.success"),t.logFlowEvent("email-domain-validation.success"),n()):"A"===s?(B()(function(){var n=new O.default({dismissible:!0,extraClassNames:"tooltip-suggest tooltip-error",invalidEl:e,type:"emailDomainValidation",unsafeMessage:W});n.on("destroyed",function(){return t.logEvent("emailDomainValidation.dimissed")}),n.render()}),t.logEvent("emailDomainValidation.fallback"),t.logFlowEvent("email-domain-validation.warn"),r("__INVALID_EMAIL_DOMAIN__")):(function(n){var i=f.a.toInvalidEmailDomainError(n);B()(function(){return t.showValidationError(e,i)}),t.logEvent("emailDomainValidation.fail")}(o),t.logFlowEvent("email-domain-validation.block"),void r("__INVALID_EMAIL_DOMAIN__"))}).catch(function(e){"__INVALID_EMAIL_DOMAIN__"!==e&&n(),r()}))})},z=function(){function e(){var t,n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,u=Array(a),d=0;a>d;d++)u[d]=arguments[d];return i=this,l(s(n=!(o=(t=c(e)).call.apply(t,[this].concat(u)))||"object"!==r(o)&&"function"!=typeof o?s(i):o),"template",F.a),l(s(n),"partialTemplates",{unsafeFirefoxFamilyHTML:y.a}),n}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(e,E["default"]),t=e,(n=[{key:"getAccount",value:function(){return this.model.get("account")}},{key:"beforeRender",value:function(){var e=this.getAccount(),t=this.relier.get("email");e?this.formPrefill.set(e.pick("email")):t&&this.formPrefill.set("email",t)}},{key:"afterRender",value:function(){if(this._hasEmailBounced())return this.chooseEmailActionPage();var e=this.broker.getCapability("disableLegacySigninSignup"),t=this.relier.get("action");if(e&&"force_auth"!==t)return this.chooseEmailActionPage();if("force_auth"===t)this.replaceCurrentPage(t);else{if(t)return this.chooseEmailActionPage();if(!this.getSignedInAccount().get("sessionToken"))return this.chooseEmailActionPage();this.replaceCurrentPage("settings")}}},{key:"afterVisible",value:function(){a(c(e.prototype),"afterVisible",this).call(this),this._hasEmailBounced()&&this.showValidationError("input[type=email]",f.a.toError("SIGNUP_EMAIL_BOUNCE"))}},{key:"chooseEmailActionPage",value:function(){var e=this.relier.get("email"),t=this.getAccount(),n=this.suggestedAccount();if(this.notifier.trigger("email-first-flow"),t);else if("string"==typeof e){if(this.isValid())return this.checkEmail(e);this.showValidationErrors()}else this.allowSuggestedAccount(n)&&this.replaceCurrentPage("signin",{account:n})}},{key:"submit",value:function(){return this.checkEmail(this._getEmail())}},{key:"isValidEnd",value:function(){return!this._isEmailFirefoxDomain(this._getEmail())&&(!this._isCommonDomainMistake()&&(!this._isEmailSameAsBouncedEmail()&&a(c(e.prototype),"isValidEnd",this).call(this)))}},{key:"showValidationErrorsEnd",value:function(){this._isEmailSameAsBouncedEmail()?this.showValidationError("input[type=email]",f.a.toError("DIFFERENT_EMAIL_REQUIRED")):this._isEmailFirefoxDomain(this._getEmail())&&this.showValidationError("input[type=email]",f.a.toError("DIFFERENT_EMAIL_REQUIRED_FIREFOX_DOMAIN"))}},{key:"_getEmail",value:function(){return this.getElementValue("input[type=email]")}},{key:"_isEmailFirefoxDomain",value:function(e){return/@firefox(\.com)?$/.test(e)}},{key:"_hasEmailBounced",value:function(){var e=this.getAccount("account");return e&&e.get("hasBounced")}},{key:"_isEmailSameAsBouncedEmail",value:function(){if(!this._hasEmailBounced())return!1;var e=this.getAccount("account").get("email");return e&&e===this.getElementValue("input[type=email]")}},{key:"_isCommonDomainMistake",value:function(){return function(e,t){var n=t.$(e);if(!n.length||!t)return!1;var i=n.val();if(n.data("previousValue")===i||N>=i.length)return!1;t.logEvent("mailcheck.triggered");var r=T.a.run({email:i,domains:k,secondLevelDomains:P,topLevelDomains:x});if(!r||!r.full||!r.domain||-1===r.domain.indexOf("."))return!1;n.data("previousValue",i),t.logEvent("mailcheck.suggested");var o=t.unsafeTranslate(R,{escapedDomain:A.a.escape(r.domain),escapedEmailSuggestionAttrs:'id="email-suggestion" tabindex="1"'}),s=new O.default({dismissible:!0,extraClassNames:"tooltip-suggest tooltip-error",invalidEl:e,type:"mailcheck",unsafeMessage:o});return s.render(),n.data("mailcheckValue",r.full),s.$el.on("click keypress","span",function(e){"click"!==e.type&&e.which!==I.a.ENTER||(n.val(r.full),t.logEvent("mailcheck.clicked"),s._destroy(),s=null)}),!0}(this.$("input[type=email]"),this)}},{key:"_validateEmailDomain",value:function(){return K(this.$("input[type=email]"),this)}},{key:"checkEmail",value:function(e){var t=this,n=this.user.initAccount({email:e});return this.invokeBrokerMethod("beforeSignIn",n).then(function(){return t.user.checkAccountEmailExists(n)}).then(function(i){var r=i?"signin":"signup";if(i)(n=t.user.getAccountByEmail(e)).set("email",e),t.navigate(r,{account:n});else{if(t.isInEmailMxValidationExperimentTreatment())return t._validateEmailDomain().then(function(){return t.navigate(r,{account:n})}).catch(function(){});t.navigate(r,{account:n})}})}},{key:"viewName",get:function(){return"enter-email"}}])&&o(t.prototype,n),i&&o(t,i),e}();m.a.mixin(z,p.default,Object(g.default)({}),V.default,v.default,w.default,b.default,D.default,M.default,Object(L.default)({entrypoint:"fxa:enter_email",flowEvent:"link.signin"}));t.default=z},function(e,t,n){"use strict";function i(e){if(this.displayLength=e.displayLength||d,this.exportLength=e.exportLength||h,this.top=0,this.left=0,this.yCenter=0,this.xCenter=0,this.verticalGutter=l.a.result(e,"verticalGutter",f),this.horizontalGutter=l.a.result(e,"horizontalGutter",f),this.onRotate=e.onRotate||l.a.noop,this.onTranslate=e.onTranslate||l.a.noop,this.onZoomIn=e.onZoomIn||l.a.noop,this.onZoomOut=e.onZoomOut||l.a.noop,this.onZoomRangeChange=e.onZoomRangeChange||l.a.noop,!e.container)throw Error("A container element is required");if(this._setupElements(e.container),e.src){var t=e,n=2*this.exportLength;if(t.width>n||t.height>n)t=this.resize(t,n/Math.max(t.width,t.height));this.setImageSrc(t.src,t.width,t.height)}}n.r(t);var r=n(1),o=n(25),s=n(4),a=n(2),c=n.n(a),u=n(0),l=n.n(u),d=240,h=480,f=40;i.prototype._setupElements=function(e){var t=this;this.container=e,this.img=e.find("img"),this.wrapper=e.find(".wrapper"),this.canvas=e.find("canvas")[0],this.draggable=e.find(".drag-overlay"),this.draggable.draggable({drag:function(e,n){var i=t.getBoundedPosition(t.top+n.position.top,t.left+n.position.left);t.img.css(i)},stop:function(e,n){var i=t.img.position();t.updatePosition(i),n.helper.css({left:0,top:0}),t.onTranslate()}});var n=this.slider=e.find("[type=range]");n.on("input",function(){t.zoom(parseInt(n.val(),10))}),n.on("change",function(){t.onZoomRangeChange()}),this.scale=parseInt(n.val()||0,10),this.rotator=e.find(".rotate"),this.rotator.on("click",function(){var e=t.rotate(90);t.setImageSrc(e,t._originalHeight,t._originalWidth),t.onRotate()}),e.find(".zoom-out").on("click",function(){t.zoom(t.scale-10),n.val(t.scale),t.onZoomOut()}),e.find(".zoom-in").on("click",function(){t.zoom(t.scale+10),n.val(t.scale),t.onZoomIn()}),this._wrapperHeight=this.wrapper.height(),this._wrapperWidth=this.wrapper.width()},i.prototype.updatePosition=function(e){this.yCenter=e.top+this._height/2,this.xCenter=e.left+this._width/2,this.top=e.top,this.left=e.left},i.prototype.setImageSrc=function(e,t,n){var i=this.img;if(this.src=e,i.css({height:"",left:0,top:0,width:""}),this.slider.val(this.scale),i.attr("src",this.src),this.yCenter=this._wrapperHeight/2,this.xCenter=this._wrapperWidth/2,"number"!=typeof t||"number"!=typeof n||0>=t||0>=n)throw Error("Height and width must be > 0.");this._originalWidth=t,this._originalHeight=n,this.isLandscape=this._originalWidth>this._originalHeight,this.zoom(this.scale)},i.prototype.updateSize=function(e){this.isLandscape?(this._height=e,this._width=e*this._originalWidth/this._originalHeight):(this._width=e,this._height=e*this._originalHeight/this._originalWidth),this.img.height(this._height),this.img.width(this._width)},i.prototype.getBoundedPosition=function(e,t){var n=this._width,i=this._height,r=this._wrapperHeight,o=this._wrapperWidth;return t>this.horizontalGutter&&(t=this.horizontalGutter),o-this.horizontalGutter>t+n&&(t=o-this.horizontalGutter-n),e>this.verticalGutter&&(e=this.verticalGutter),r-this.verticalGutter>e+i&&(e=r-this.verticalGutter-i),{left:t,top:e}},i.prototype.resize=function(e,t){var n=this.canvas,i=n.getContext("2d");n.width=e.width*t,n.height=e.height*t,this.img.attr("src",e.src),i.drawImage(this.img[0],0,0,n.width,n.height);var r=n.toDataURL();return{height:n.height,src:r,width:n.width}},i.prototype.zoom=function(e){0>e&&(e=0),e>100&&(e=100);var t=this.displayLength*(1+e/100);this.scale=e,this.updateSize(t);var n=this.getBoundedPosition(this.yCenter-this._height/2,this.xCenter-this._width/2);this.updatePosition(n),this.img.css(n)},i.prototype.rotate=function(e){var t=this.canvas,n=t.getContext("2d");return t.width=this._originalHeight,t.height=this._originalWidth,n.translate(t.width/2,t.height/2),n.rotate(e*Math.PI/180),n.drawImage(this.img[0],-this._originalWidth/2,-this._originalHeight/2),t.toDataURL("image/png")},i.prototype.cropPosition=function(){var e=this.isLandscape?this._originalHeight/this.displayLength:this._originalWidth/this.displayLength,t=1+this.scale/100,n=this.displayLength/t*e;return{left:(-this.left+this.horizontalGutter)/t*e,length:n=Math.min(n,this.isLandscape?this._originalHeight:this._originalWidth),top:(-this.top+this.verticalGutter)/t*e}},i.prototype._export=function(){var e=this.canvas.getContext("2d"),t=this.cropPosition(),n=this.exportLength;this.canvas.width=n,this.canvas.height=n,e.drawImage(this.img[0],t.left,t.top,t.length,t.length,0,0,n,n)},i.prototype.toDataURL=function(e,t){return this._export(),this.canvas.toDataURL(e,t)},i.prototype.toBlob=function(e,t,n){return this._export(),this.canvas.toBlob(e,t,n)};var p=i,m=n(220),g=n(7),v=n(40),_=n(65),y=n(274),w=g.default.prototype,b=g.default.extend({template:n.n(y).a,className:"avatar-crop",viewName:"settings.avatar.crop",initialize:function(){this._cropImg=this.model.get("cropImg"),!this._cropImg&&this.broker.isAutomatedBrowser()&&(this._cropImg=new m.a)},beforeRender:function(){this._cropImg||this.navigate("settings/avatar/change",{error:r.a.toMessage("UNUSABLE_IMAGE")})},afterRender:function(){return this.canvas=this.$("canvas")[0],w.afterRender.call(this)},afterVisible:function(){var e=this._cropImg.get("width"),t=this._cropImg.get("height"),n=this._cropImg.get("src");try{this.cropper=new p({container:this.$(".cropper"),displayLength:c.a.PROFILE_IMAGE_DISPLAY_SIZE,exportLength:c.a.PROFILE_IMAGE_EXPORT_SIZE,height:t,horizontalGutter:90,onRotate:this._onRotate.bind(this),onTranslate:this._onTranslate.bind(this),onZoomIn:this._onZoomIn.bind(this),onZoomOut:this._onZoomOut.bind(this),onZoomRangeChange:this._onZoomRangeChange.bind(this),src:n,verticalGutter:0,width:e})}catch(e){if(this.broker.isAutomatedBrowser()&&-1!==e.message.indexOf("draggable"))return;this.navigate("settings/avatar/change",{error:r.a.toMessage("UNUSABLE_IMAGE")})}return w.afterVisible.call(this)},toBlob:function(){var e=this;return new Promise(function(t){e.cropper.toBlob(t,e._cropImg.get("type"),c.a.PROFILE_IMAGE_JPEG_QUALITY)})},submit:function(){var e,t=this,n=this.getSignedInAccount();return this.logAccountImageChange(n),this.toBlob().then(function(t){return e=Date.now(),n.uploadAvatar(t)}).then(function(i){return t.logFlowEvent("timing.avatar.upload.".concat(Date.now()-e)),t.updateProfileImage(new _.a(i),n),t.navigate("settings"),i})},_onRotate:function(){this.logViewEvent("rotate.cw")},_onTranslate:function(){this.logViewEvent("translate")},_onZoomIn:function(){this.logViewEvent("zoom.in")},_onZoomOut:function(){this.logViewEvent("zoom.out")},_onZoomRangeChange:function(){this.logViewEvent("zoom.range")}});s.a.mixin(b,o.default,v.default);t.default=b},function(e,t,n){"use strict";n.r(t);var i=n(4),r=n(7),o=n(40),s=n(305),a=n.n(s),c=n(306),u=n.n(c),l=n(6),d=n.n(l).a.Model.extend({defaults:{code:null}}),h=n(10),f=n(122),p=n(21),m=function(e){return e},g=r.default.extend({template:a.a,className:"recovery-codes",viewName:"settings.two-step-authentication.recovery-codes",events:{"click .copy-option":Object(h.default)("_copyCodes"),"click .download-option":"_downloadCodes","click .print-option":Object(h.default)("_printCodes"),"click .replace-codes-link":Object(h.default)("_replaceRecoveryCodes"),"click .two-step-authentication-done":Object(h.default)("_returnToTwoStepAuthentication")},_returnToTwoStepAuthentication:function(){if("sign_in_recovery_code"===this.model.get("previousViewName")){var e=this.getSignedInAccount();return this.invokeBrokerMethod("afterCompleteSignInWithCode",e)}this.navigate("settings/two_step_authentication")},_getFormatedRecoveryCodeFilename:function(){var e=this.getSignedInAccount().get("email")+" "+m("Firefox Recovery Codes");return e.length>200&&(e=e.substring(0,196)),"".concat(e,".txt")},_copyCodes:function(){return this.logFlowEvent("copy-option",this.viewName),this.copy(this.recoveryCodesText,"#recovery-codes")},_downloadCodes:function(){this.logFlowEvent("download-option",this.viewName),this.download(this.recoveryCodesText,this._getFormatedRecoveryCodeFilename(),"#recovery-codes")},_printCodes:function(){this.logFlowEvent("print-option",this.viewName);var e=this.recoveryCodes.map(function(e){return new d({code:e}).toJSON()});this.print(u()({recoveryCodes:e}))},_replaceRecoveryCodes:function(){var e=this;return this.getSignedInAccount().replaceRecoveryCodes().then(function(t){e._setupRecoveryCodes(t.recoveryCodes,m("New recovery codes generated"))})},_setupRecoveryCodes:function(e,t){this.recoveryCodesText="",e&&(this.recoveryCodes=e,this.recoveryCodesText=this.recoveryCodes.join(" \r\n"),this.model.set("recoveryCodes",e),t&&this.model.set("modalSuccessMsg",t))},beforeRender:function(){var e=this;return this.getSignedInAccount().checkTotpTokenExists().then(function(t){t.exists||e.navigate("settings/two_step_authentication")})},initialize:function(){this._setupRecoveryCodes(this.model.get("recoveryCodes")),this.listenTo(this.model,"change",this.render)},setInitialContext:function(e){var t=this.model.get("recoveryCodes");t=t?t.map(function(e){return new d({code:e}).toJSON()}):[];var n=this.model.get("modalSuccessMsg");n||t.length>0&&(n=m("Two-step authentication enabled")),e.set({isIos:this.getUserAgent().isIos(),modalSuccessMsg:n&&this.translate(n),recoveryCodes:t,showRecoveryCodes:t.length>0})}});i.a.mixin(g,o.default,f.default,p.a);t.default=g},function(e,t,n){"use strict";n.r(t);var i=n(5),r=n.n(i),o=n(25),s=n(4),a=n(6),c=n.n(a).a.Model.extend({defaults:{email:null,isPrimary:!1,verified:!1}}),u=n(7),l=n(68),d=n(10),h=n(28),f=n(83),p=n(29),m=n(54),g=n(291),v=function(e){return e},_=u.default.extend({template:n.n(g).a,className:"emails",viewName:"settings.emails",events:{"click .email-disconnect":Object(d.default)("_onDisconnectEmail"),"click .email-refresh.enabled":Object(d.default)("refresh"),"click .resend":Object(d.default)("resend"),"click .set-primary":Object(d.default)("setPrimary")},beforeRender:function(){var e=this;return this.setupSessionGateIfRequired().then(function(t){if(t)return e._fetchEmails()})},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._emails=e.emails?e.emails:[]},setInitialContext:function(e){e.set({buttonClass:this._hasSecondaryEmail()?"secondary-button":"primary-button",emails:this._emails,hasSecondaryEmail:this._hasSecondaryEmail(),hasSecondaryVerifiedEmail:this._hasSecondaryVerifiedEmail(),isPanelOpen:this.isPanelOpen(),lastCheckedTime:this.getLastCheckedTimeString(),newEmail:this.newEmail}),this.metrics.logUserPreferences(this.className,this._hasSecondaryVerifiedEmail())},afterRender:function(){this._hasSecondaryEmail()&&!this._hasSecondaryVerifiedEmail()&&this.openPanel()},_hasSecondaryEmail:function(){return this._emails.length>1},_hasSecondaryVerifiedEmail:function(){return!!this._hasSecondaryEmail()&&this._emails[1].verified},_onDisconnectEmail:function(e){var t=this,n=r()(e.currentTarget).data("id");return this.getSignedInAccount().recoveryEmailDestroy(n).then(function(){return t.render().then(function(){t.displaySuccess(v("Secondary email removed"),{closePanel:!0}),t.navigate("/settings")})})},_fetchEmails:function(){var e=this;return this.getSignedInAccount().recoveryEmails().then(function(t){e._emails=t.map(function(e){return new c(e).toJSON()})})},refresh:Object(m.default)(function(){return this.setLastCheckedTime(),this.render()},"button.settings-button.email-refresh",350),resend:function(e){var t=this,n=r()(e.currentTarget).data("id");return this.getSignedInAccount().resendEmailCode({email:n}).then(function(){t.displaySuccess(v("Verification email sent"),{closePanel:!1}),t.navigate("/settings/emails")})},submit:function(){var e=this,t=this.getElementValue("input.new-email");if(this.isPanelOpen()&&t)return this.getSignedInAccount().recoveryEmailCreate(t).then(function(){e.displaySuccess(v("Verification email sent"),{closePanel:!1}),e.render()}).catch(function(t){return e.showValidationError(e.$("input.new-email"),t)})},setPrimary:function(e){var t=this,n=r()(e.currentTarget).data("id");return this.getSignedInAccount().setPrimaryEmail(n).then(function(){t.updateDisplayEmail(n),t.displaySuccess(p.a.interpolate(v("Primary email set to %(email)s"),{email:n}),{closePanel:!1}),t.render()})}});s.a.mixin(_,Object(f.default)({gatedHref:"settings/emails",title:v("Secondary email")}),o.default,l.default,h.default);t.default=_},,function(e,t,n){"use strict";n.r(t);var i=n(27),r=n(11),o=n(4),s=n(119),a=n(325),c=r.default.extend({template:n.n(a).a,initialize:function(){var e=this;this.once("modal-cancel",function(){return e.back()})},afterRender:function(){this.openPanel()}});o.a.mixin(c,i.default,s.default),t.default=c},function(e,t){"use strict";var n=function(e){return e};t.a={CONSUMER_BETA:{label:n("Test new Firefox products"),slug:"test-pilot"},FIREFOX_ACCOUNTS_JOURNEY:{label:n("Get the latest news about Mozilla and Firefox"),slug:"firefox-accounts-journey"},HEALTHY_INTERNET:{label:n("Take action to keep the internet healthy"),slug:"take-action-for-the-internet"},ONLINE_SAFETY:{label:n("Be safer and smarter online"),slug:"knowledge-is-power"}}},function(e,t,n){"use strict";!function(e){function i(){return c}var r=n(228),o=n(245),s=n(246),a=n(30),c="A";t.a={generateRecoveryKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Promise.resolve().then(function(){if(27>e)throw Error("Recovery key length must be at least 27");return o.a.generate(e-1).then(function(e){return i()+e})})},getCurrentRecoveryKeyVersion:function(){return i()},getRecoveryJwk:function(t,n){return Promise.resolve().then(function(){return Object(a.a)(t,"uid"),Object(a.a)(n,"recoveryKey"),o.a.decode(n).then(function(n){var i=e.from(t,"hex"),o=e.from("fxa recovery encrypt key","utf8"),a=e.from("fxa recovery fingerprint","utf8");return Promise.all([Object(s.a)(n,i,o,32),Object(s.a)(n,i,a,16)]).then(function(e){return r.a.createJwkFromKey(e[0],e[1].toString("hex"))})})})},bundleRecoveryData:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Promise.resolve().then(function(){return Object(a.a)(e,"recoveryJwk"),r.a.encrypt(JSON.stringify(t),e,n)})},unbundleRecoveryData:function(e,t){return Promise.resolve().then(function(){return Object(a.a)(e,"recoveryJwk"),Object(a.a)(t,"recoveryBundle"),r.a.decrypt(t,e).then(function(e){return JSON.parse(e)}).catch(function(e){if("OperationError"===e.name)throw Error("Failed to unbundle recovery data");throw e})})}}}(n(250).Buffer)},function(e,t,n){"use strict";n.r(t);var i=n(5),r=n.n(i);t.default={afterRender:function(){this.$("a[href^=http]").each(function(e,t){r()(t).attr("rel","noopener noreferrer")})},events:{"click a[href^=http]":"_onExternalLinkClick"},_onExternalLinkClick:function(e){return this._shouldIgnoreClick(e)?Promise.resolve():(e.preventDefault(),this._flushMetricsThenRedirect(e.currentTarget.href))},_shouldIgnoreClick:function(e){return this._isEventModifiedOrPrevented(e)||this._doesLinkOpenInAnotherTab(r()(e.currentTarget))},_isEventModifiedOrPrevented:function(e){return!!(e.isDefaultPrevented()||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)},_doesLinkOpenInAnotherTab:function(e){return!!e.attr("target")},_flushMetricsThenRedirect:function(e){var t=this;return this.metrics.flush().then(function(){t.window.location=e})}}},,function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(1),s=n(27),a=n(11),c=n(4),u=n(62),l=n(128),d=n(86),h=n(31),f=n(48),p=n(22),m=n(71),g=n(285),v=a.default.prototype,_=a.default.extend({template:n.n(g).a,className:"confirm",initialize:function(){this._account=this.user.initAccount(this.model.get("account"))},getAccount:function(){return this._account},setInitialContext:function(e){var t=this.getAccount().get("email"),n=this.isSignIn(),i=this.isSignUp();e.set({canGoBack:n&&this.canGoBack(),email:t,escapedEmail:'<span class="email">'.concat(r.a.escape(t),"</span>"),isSignIn:n,isSignUp:i})},_getMissingSessionTokenScreen:function(){return this.isSignUp()?"signup":"signin"},beforeRender:function(){this.getAccount().get("sessionToken")||this.navigate(this._getMissingSessionTokenScreen())},afterVisible:function(){var e=this,t=this.getAccount();return v.afterVisible.call(this).then(function(){return e.broker.persistVerificationData(t)}).then(function(){return e.invokeBrokerMethod("beforeSignUpConfirmationPoll",t)}).then(function(){return e.waitForSessionVerification(t,function(){return e._gotoNextScreen()})})},_gotoNextScreen:function(){var e=this;return Promise.resolve().then(function(){var t=e.getAccount();e.logViewEvent("verification.success"),e.notifier.trigger("verification.success");var n=e.isSignUp()?"afterSignUpConfirmationPoll":"afterSignInConfirmationPoll";return e.invokeBrokerMethod(n,t)})},resend:function(){var e=this,t=this.getAccount();return t.retrySignUp(this.relier,{resume:this.getStringifiedResumeToken(t)}).catch(function(t){if(o.a.is(t,"INVALID_TOKEN"))return e.navigate("signup",{error:t});throw t})}});c.a.mixin(_,s.default,u.default,l.default,d.default,Object(h.default)(),f.default,p.default,m.default),t.default=_},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t);var u=n(4),l=n(62),d=n(45),h=n(15),f=n(7),p=n(87),m=n(79),g=n(2),v=n(69),_=n(129),y=n(111),w=n(288),b=n.n(w),E=n(21),S=n(38),A=function(){function e(){var t,n,r,s,c,u,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var d=arguments.length,h=Array(d),f=0;d>f;f++)h[f]=arguments[f];return r=this,n=!(s=(t=a(e)).call.apply(t,[this].concat(h)))||"object"!==i(s)&&"function"!=typeof s?o(r):s,c=o(n),l=b.a,(u="template")in c?Object.defineProperty(c,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):c[u]=l,n}var t,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(e,f["default"]),t=e,u=[{key:"ENTRYPOINT",get:function(){return"fxa:connect_another_device"}}],(n=[{key:"beforeRender",value:function(){var e=this,t=this.getAccount();return this.getEligibleSmsCountry(t).then(function(n){if(n)return e.replaceCurrentPageWithSmsScreen(t,n,e._showSuccessMessage())})}},{key:"afterRender",value:function(){var e={marketingId:g.MARKETING_ID_AUTUMN_2016};return(this._isSignedIn()&&this.getUserAgent().isFirefoxAndroid()||this.getUserAgent().isFirefoxIos())&&(e.which=_.default.WHICH.BOTH),this.createMarketingSnippet(e)}},{key:"afterVisible",value:function(){return this._logViewMetrics(),s(a(e.prototype),"afterVisible",this).call(this)}},{key:"getAccount",value:function(){return this.model.get("account")||this.model.set("account",this.user.getSignedInAccount()),this.model.get("account")}},{key:"_logViewMetrics",value:function(){var e=this._isSignedIn();this.logFlowEvent("signedin.".concat(e));var t,n=this.getContext(),i=n.isFirefoxAndroid,r=n.isFirefoxDesktop,o=n.isFirefoxIos,s=n.isOther,a=n.isOtherAndroid,c=n.isOtherIos;n.canSignIn?(this.logFlowEvent("signin.eligible"),i?t="signin_from.fx_android":r&&(t="signin_from.fx_desktop")):(this.logFlowEvent("signin.ineligible"),o?t="signin_from.fx_ios":i?t="install_from.fx_android":r?t="install_from.fx_desktop":a?t="install_from.other_android":c?t="install_from.other_ios":s&&(t="install_from.other")),t&&this.logFlowEvent(t)}},{key:"setInitialContext",value:function(e){var t=this._isSignedIn(),n=this._canSignIn(),i=this.getAccount().get("email"),r=this._getEscapedSignInUrl(i),o=this.getUserAgent(),s=this.getGraphicsId(),a=o.isAndroid(),c=o.isFirefoxAndroid(),u=o.isFirefoxDesktop(),l=o.isFirefoxIos(),d=o.isIos(),h=a&&!c,f=d&&!l,p=!a&&!d&&!u,m=this.isSignIn(),g=this.isSignUp(),v=this._showSuccessMessage();e.set({canSignIn:n,email:i,escapedSignInUrl:r,graphicId:s,isFirefoxAndroid:c,isFirefoxDesktop:u,isFirefoxIos:l,isOther:p,isOtherAndroid:h,isOtherIos:f,isSignedIn:t,isSignIn:m,isSignUp:g,showSuccessMessage:v})}},{key:"_isSignedIn",value:function(){return this.user.isSignedInAccount(this.getAccount())||this.broker.get("isVerificationSameBrowser")}},{key:"_canSignIn",value:function(){return!this._isSignedIn()&&this.isSyncAuthSupported()}},{key:"_showSuccessMessage",value:function(){return!!this.model.get("showSuccessMessage")||!!this.getSearchParam("showSuccessMessage")}},{key:"_getEscapedSignInUrl",value:function(t){return this.getEscapedSyncUrl("",e.ENTRYPOINT,{action:"email",email:t,utm_source:g.UTM_SOURCE_EMAIL})}}])&&r(t.prototype,n),u&&r(t,u),e}();u.a.mixin(A,l.default,d.default,h.default,p.default,m.default,Object(v.default)({autocreate:!1,service:g.SYNC_SERVICE}),y.default,E.a,S.default),t.default=A},function(e,t,n){"use strict";function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.r(t);var s=n(132),a=n(1),c=n(25),u=n(94),l=n(4),d=n(133),h=n(44),f=n(7),p=n(51),m=n(39),g=n(55),v=n(22),_=n(56),y=n(70),w=n(292),b=n.n(w),E=n(76),S=n(134),A=n(3),I={email:A.a.email().required(),uid:A.a.uid().allow(null)},C=f.default.extend({template:b.a,className:"force-auth",afterSignInBrokerMethod:"afterForceAuth",afterSignInNavigateData:{clearQueryParams:!0},_getAndValidateAccountData:function(){var e={},t=this.relier;return["email","uid"].forEach(function(n){t.has(n)&&(e[n]=t.get(n))}),E.a.transformUsingSchema(e,I,a.a)},beforeRender:function(){var e,t=this;try{e=this._getAndValidateAccountData()}catch(e){return this.fatalError(e),!1}var n=this.user.initAccount({email:e.email,uid:e.uid});return e.uid?Promise.all([this.user.checkAccountEmailExists(n),this.user.checkAccountUidExists(n)]).then(function(e){var i=o(e,2);return i[0]?i[1]?void 0:t._signInIfUidChangeSupported(n):t._signUpIfUidChangeSupported(n)}):this.user.checkAccountEmailExists(n).then(function(e){if(!e)return t._navigateToForceSignUp(n)})},_signUpIfUidChangeSupported:function(e){if(this.broker.hasCapability("allowUidChange"))return this._navigateToForceSignUp(e);this.model.set("error",a.a.toError("DELETED_ACCOUNT"))},_signInIfUidChangeSupported:function(){this.broker.hasCapability("allowUidChange")||this.model.set("error",a.a.toError("DELETED_ACCOUNT"))},_navigateToForceSignUp:function(e){return this.broker.setBehavior("beforeSignUpConfirmationPoll",new p.default),this.navigate("signup",{error:a.a.toError("DELETED_ACCOUNT"),account:e,forceEmail:e.get("email")})},_navigateToForceResetPassword:function(){return this.navigate("reset_password",{forceEmail:this.relier.get("email")})},setInitialContext:function(e){var t=this.translate("Sign in",{msgctxt:"submit button"});e.set({buttonSignInText:t,email:this.relier.get("email")})},events:function(e){for(var t=1;arguments.length>t;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},f.default.prototype.events,{'click a[href="/reset_password"]':Object(u.default)("_navigateToForceResetPassword")}),submit:function(){var e=this,t=this.getAccount(),n=this.getElementValue("input[type=password]");return this.signIn(t,n).catch(function(n){return e.onSignInError(t,n)})},onSignInError:function(e,t){var n=this;return Promise.resolve().then(function(){if(a.a.is(t,"UNKNOWN_ACCOUNT")){if(n.relier.has("uid")){if(n.broker.hasCapability("allowUidChange"))return n._navigateToForceSignUp(e);throw a.a.toError("DELETED_ACCOUNT")}return n._navigateToForceSignUp(e)}if(!a.a.is(t,"USER_CANCELED_LOGIN")){if(a.a.is(t,"ACCOUNT_RESET"))return n.notifyOfResetAccount(e);if(a.a.is(t,"INCORRECT_PASSWORD"))return n.showValidationError(n.$("#password"),t);throw t}n.logViewEvent("canceled")})},getAccount:function(){var e=this.relier.get("email"),t=this.user.getAccountByEmail(e);return t.isDefault()&&t.set({email:e,uid:this.relier.get("uid")}),t}});l.a.mixin(C,s.default,c.default,d.default,h.default,m.default,g.default,v.default,_.default,y.default,S.default),t.default=C},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(106),s=n(27),a=n(4),c=n(7),u=n(13),l=n(298),d=n.n(l),h=n(22),f=n(29),p=n(299),m=n.n(p),g=n(38),v=function(e){return e},_=v("%(permissionName)s (required)"),y=[{label:v("Email address"),name:"profile:email",required:!0},{label:v("Display name"),name:"profile:display_name"},{label:v("Account picture"),name:"profile:avatar",valueVisible:!1},{label:"uid",name:"profile:uid",required:!0,visible:!1}],w=c.default.extend({template:m.a,className:"permissions",initialize:function(e){this._account=this.user.initAccount(this.model.get("account")),this.type=e.type,this.onSubmitComplete=this.model.get("onSubmitComplete"),this._validatePermissions(this.relier.get("permissions")||[])},getAccount:function(){return this._account},setInitialContext:function(e){var t=this.getAccount(),n=this.relier.get("permissions"),i=this._getApplicablePermissions(t,n);e.set({unsafePermissionsHTML:this._getPermissionsHTML(t,i)})},_validatePermissions:function(e){e.forEach(function(e){this._getPermissionConfig(e)||this.logError(u.a.toError("INVALID_SCOPES",e))},this)},_getPermissionConfig:function(e){var t=r.a.findWhere(y,{name:e});return t?r.a.clone(t):null},_getApplicablePermissions:function(e,t){var n=this;return e.getPermissionsWithValues(t).map(function(e){return n._getPermissionConfig(e)?e:null}).filter(function(e){return null!==e})},_getPermissionIndex:function(e){return r.a.findIndex(y,function(t){return t.name===e})},_sortPermissions:function(e){var t=this;return[].concat(e).sort(function(e,n){return t._getPermissionIndex(e)-t._getPermissionIndex(n)})},_getPermissionsHTML:function(e,t){var n=this;return this._sortPermissions(t).map(function(t){var i=n._getPermissionConfig(t);return i.label=n.translate(i.label),!0!==i.required&&(i.required=!1),i.required&&(i.label=f.a.interpolate(n.translate(_),{permissionName:i.label})),!1!==i.valueVisible&&(i.valueVisible=!0),!1!==i.visible&&(i.visible=!0),i.value=e.get(o.a.PERMISSIONS_TO_KEYS[t]),i}).map(d.a).join("\n")},_getFormPermissions:function(){var e={};return this.$(".permission").each(function(t,n){e[n.name]=!!n.checked}),e},beforeRender:function(){if(this.getAccount().get("sessionToken")){var e=this.getAccount();return e.get("verified")?e.fetchProfile():void 0}this.navigate(this._previousView())},submit:function(){var e=this;return Promise.resolve().then(function(){var t=e.getAccount();return e.logViewEvent("accept"),t.setClientPermissions(e.relier.get("clientId"),e._getFormPermissions()),e.onSubmitComplete(t)})},_previousView:function(){return this.isSignUp()?"/signup":"/signin"}},{PERMISSIONS:y});a.a.mixin(w,s.default,h.default,g.default),t.default=w},function(e,t,n){"use strict";n.r(t);var i=n(4),r=n(7),o=n(28),s=n(312),a=n.n(s),c=n(96),u=r.default.extend({className:"subscription",viewName:"settings.subscription",template:a.a,events:{"click button":"submit"},initialize:function(e){this._subscriptionsConfig={},e&&e.config&&e.config.subscriptions&&(this._subscriptionsConfig=e.config.subscriptions)},afterRender:function(){return this.getSignedInAccount().hasSubscriptions()},submit:function(){return c.a.navigateToPaymentServer(this,this._subscriptionsConfig,"subscriptions")}});i.a.mixin(u,o.default),t.default=u},function(e,t,n){"use strict";n.r(t);var i=n(132),r=n(0),o=n(1),s=n(135),a=n(4),c=n(15),u=n(44),l=n(7),d=n(39),h=n(10),f=n(22),p=n(70),m=n(56),g=n(316),v=n.n(g),_=n(134),y=l.default.extend({template:v.a,events:Object(r.assign)({},l.default.prototype.events,{"click .use-different":Object(h.default)("useDifferentAccount")}),useDifferentAccount:function(){this.navigate("/",{account:this.getAccount()})},getAccount:function(){return this.model.get("account")},beforeRender:function(){var e=this.getAccount();e&&e.get("email")||this.navigate("/")},setInitialContext:function(e){var t=this.getAccount();e.set({email:t.get("email"),isPasswordNeeded:this.isPasswordNeededForAccount(t)})},submit:function(){var e=this,t=this.getAccount();if(this.isPasswordNeededForAccount(t)){var n=this.getElementValue("input[type=password]");return this.signIn(t,n).catch(function(i){return e.onSignInError(t,n,i)})}return this.useLoggedInAccount(t)},onSignInError:function(e,t,n){if(!o.a.is(n,"USER_CANCELED_LOGIN")){if(o.a.is(n,"ACCOUNT_RESET"))return this.notifyOfResetAccount(e);if(o.a.is(n,"INCORRECT_PASSWORD"))return this.showValidationError(this.$("input[type=password]"),n);throw n}this.logViewEvent("canceled")}});a.a.mixin(y,i.default,s.default,c.default,u.default,d.default,f.default,m.default,p.default,_.default),t.default=y},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(1),o=n(201),s=n(4),a=n(136),c=n(202),u=n(222),l=n.n(u),d=n(15),h=n(44),f=n(7),p=n(39),m=n(88),g=n(10),v=n(22),_=n(70),y=n(203),w=n(321),b=f.default.prototype,E=f.default.extend({template:n.n(w).a,partialTemplates:{unsafeFirefoxFamilyHTML:l.a},className:"sign-up",events:Object(i.assign)({},f.default.prototype.events,{"click .use-different":Object(g.default)("useDifferentAccount")}),useDifferentAccount:function(){this.navigate("/",{account:this.getAccount()})},getAccount:function(){return this.model.get("account")},beforeRender:function(){var e=this.getAccount();e&&e.get("email")||this.navigate("/");var t=this.model.get("error");return t&&r.a.is(t,"DELETED_ACCOUNT")&&(t.forceMessage="Account no longer exists. Recreate it?"),b.beforeRender.call(this)},setInitialContext:function(e){e.set({canChangeAccount:!this.model.get("forceEmail"),email:this.getAccount().get("email")}),this.checkPasswordsMatchDebounce=Object(i.debounce)(this._checkPasswordsMatch,1500)},isValidEnd:function(){return!!this._doPasswordsMatch()&&b.isValidEnd.call(this)},onFormChange:function(){return this.checkPasswordsMatchDebounce(),b.onFormChange.call(this)},showValidationErrorsEnd:function(){this._doPasswordsMatch()?this.$("#vpassword").change():this.showValidationError(this.$("#vpassword"),r.a.toError("PASSWORDS_DO_NOT_MATCH"),!1)},submit:function(){var e=this;return Promise.resolve().then(function(){if(!e.isUserOldEnough())return e.tooYoung();var t=e.getAccount();return e.isAnyNewsletterVisible()&&t.set({newsletters:e.getOptedIntoNewsletters()}),e.signUp(t,e._getPassword())})},_getPassword:function(){return this.getElementValue("#password")},_getVPassword:function(){return this.getElementValue("#vpassword")},_doPasswordsMatch:function(){return this._getPassword()===this._getVPassword()},_checkPasswordsMatch:function(){""!==this._getVPassword()&&""!==this._getPassword()&&this.showValidationErrorsEnd()}});s.a.mixin(E,Object(a.default)({required:!0}),o.default,c.default,d.default,h.default,p.default,Object(m.default)({balloonEl:".helper-balloon",passwordEl:"#password"}),v.default,_.default,y.default),t.default=E},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var u=n(1),l=n(4),d=n(63),h=n.n(d),f=n(224),p=n(15),m=n(44),g=n(7),v=n(87),_=n(79),y=n(2),w=n(69),b=n(86),E=n(139),S=n(322),A=n.n(S),I=n(38),C=f.a.FIREFOX_MOBILE_INSTALL,T=function(){function e(){var t,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var u=arguments.length,l=Array(u),d=0;u>d;d++)l[d]=arguments[d];return r=this,c(s(n=!(a=(t=o(e)).call.apply(t,[this].concat(l)))||"object"!==i(a)&&"function"!=typeof a?s(r):a),"mustAuth",!0),c(s(n),"template",A.a),n}var t,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(e,g["default"]),t=e,l=[{key:"LEARN_MORE_LINK",get:function(){return"https://www.mozilla.org/privacy/websites/#campaigns"}}],(n=[{key:"getAccount",value:function(){return this.model.get("account")||this.user.getSignedInAccount()}},{key:"setInitialContext",value:function(t){var n='id="learn-more" href="'.concat(encodeURI(e.LEARN_MORE_LINK),'" target="_learn-more" data-flow-event="link.learn_more"'),i=this._getCountry();h.a[i]||(i="US");var r=h.a[i].prefix,o=this.formPrefill.get("phoneNumber");o||r===h.a.US.prefix||(o=r);var s=this.isSignIn(),a=this.getGraphicsId();t.set({country:i,escapedLearnMoreAttributes:n,graphicId:a,isSignIn:s,phoneNumber:o,showSuccessMessage:this.model.get("showSuccessMessage")})}},{key:"submit",value:function(){return this._sendSms(this._getNormalizedPhoneNumber(),C)}},{key:"_getCountry",value:function(){return this.relier.get("country")||this.model.get("country")||"US"}},{key:"_sendSms",value:function(e,t){var n=this;return this.getAccount().sendSms(e,t,{features:this.getSmsFeatures()}).then(function(e){return n._onSendSmsSuccess(e.formattedPhoneNumber)}).catch(function(e){return n._onSendSmsError(e)})}},{key:"_formatServerPhoneNumber",value:function(e){var t=this._getCountry();return h.a[t].format(e)}},{key:"_getNormalizedPhoneNumber",value:function(){var e=this._getCountry(),t=this.getElementValue("input[type=tel]");return h.a[e].normalize(t)}},{key:"_onSendSmsSuccess",value:function(e){var t=this._getCountry();this.navigate("sms/sent",{account:this.getAccount(),country:t,formattedPhoneNumber:this._formatServerPhoneNumber(e),normalizedPhoneNumber:this._getNormalizedPhoneNumber()})}},{key:"_onSendSmsError",value:function(e){if(!u.a.is(e,"INVALID_PHONE_NUMBER"))throw e;this.showValidationError(this.$("input[type=tel]"),e)}}])&&r(t.prototype,n),l&&r(t,l),e}();l.a.mixin(T,p.default,m.default,v.default,_.default,Object(w.default)({marketingId:y.MARKETING_ID_AUTUMN_2016,service:y.SYNC_SERVICE}),b.default,E.default,I.default),t.default=T},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var u=n(0),l=n.n(u),d=n(27),h=n(11),f=n(4),p=n(224),m=n(15),g=n(87),v=n(2),_=n(79),y=n(69),w=n(31),b=n(139),E=n(323),S=n.n(E),A=p.a.FIREFOX_MOBILE_INSTALL,I=function(){function e(){var t,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var u=arguments.length,l=Array(u),d=0;u>d;d++)l[d]=arguments[d];return r=this,c(s(n=!(a=(t=o(e)).call.apply(t,[this].concat(l)))||"object"!==i(a)&&"function"!=typeof a?s(r):a),"template",S.a),c(s(n),"mustAuth",!0),n}var t,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(e,h["default"]),t=e,(n=[{key:"beforeRender",value:function(){var e;(e=this.model).has("normalizedPhoneNumber")&&e.has("formattedPhoneNumber")||this.navigate("sms")}},{key:"setInitialContext",value:function(e){var t=this.getGraphicsId();e.set({escapedBackLinkAttrs:l.a.escape("id=back href=#"),escapedPhoneNumber:l.a.escape(this.model.get("formattedPhoneNumber")),graphicId:t,isResend:this.model.get("isResend")})}},{key:"resend",value:function(){var e=this,t=this.model.get("account"),n=this.model.get("normalizedPhoneNumber");return t.sendSms(n,A,{features:this.getSmsFeatures()}).then(function(){return e.model.set("isResend",!0),e.render()})}}])&&r(t.prototype,n),u&&r(t,u),e}();f.a.mixin(I,d.default,m.default,g.default,_.default,Object(y.default)({marketingId:v.MARKETING_ID_AUTUMN_2016,service:v.SYNC_SERVICE}),Object(w.default)({successMessage:!1}),b.default),t.default=I},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(1),s=n(4),a=n(7),c=n(15),u=n(41),l=n(39),d=n(55),h=n(88),f=n(10),p=n(31),m=n(22),g=n(282),v=n.n(g),_=n(17),y=n(218),w=n(3),b=n(95).a.extend({defaults:{accountResetToken:null,kB:null,recoveryKeyId:null},validation:{accountResetToken:w.a.hex().required(),kB:w.a.hex().required(),recoveryKeyId:w.a.hex().required()}}),E=a.default.prototype,S=a.default.extend({template:v.a,className:"complete-reset-password",events:r.a.extend({},a.default.prototype.events,{"click .remember-password":Object(f.default)("_navigateToSignin")}),_navigateToSignin:function(){this.navigate("signin")},initialize:function(e){e=e||{};var t=_.a.searchParams(this.window.location.search);this._verificationInfo=new y.a(t);var n=e.model;this.lostRecoveryKey=n&&n.get("lostRecoveryKey"),this.lostRecoveryKey||n&&n.get("recoveryKeyId")&&(this._accountRecoveryVerficationInfo=new b(n.toJSON()))},getAccount:function(){var e=this._verificationInfo.get("email");return this.user.initAccount({email:e})},beforeRender:function(){var e=this;this.logViewEvent("verification.clicked");var t=this._verificationInfo;if(t.isValid()){var n=this.getAccount(),i=t.get("token");return n.isPasswordResetComplete(i).then(function(i){if(!e._accountRecoveryVerficationInfo&&!e.lostRecoveryKey)return i&&!e._accountRecoveryVerficationInfo?(t.markExpired(),void e.logError(o.a.toError("EXPIRED_VERIFICATION_LINK"))):n.checkRecoveryKeyExistsByEmail().then(function(t){if(t.exists)return e.navigate("account_recovery_confirm_key")})})}this.logError(o.a.toError("DAMAGED_VERIFICATION_LINK"))},afterVisible:function(){return this.notifier.triggerRemote(u.a.COMPLETE_RESET_PASSWORD_TAB_OPEN),E.afterVisible.call(this)},setInitialContext:function(e){var t=this._verificationInfo,n=t.isValid(),i=t.isExpired(),r=this.relier.get("resetPasswordConfirm"),o=!!this._accountRecoveryVerficationInfo;o&&(r=!1),e.set({email:t.get("email"),isLinkDamaged:!n,isLinkExpired:i,isLinkValid:n&&!i,showAccountRecoveryInfo:o,showSyncWarning:r})},isValidEnd:function(){return this._getPassword()===this._getVPassword()},showValidationErrorsEnd:function(){if(this._getPassword()!==this._getVPassword()){var e=o.a.toError("PASSWORDS_DO_NOT_MATCH");this.displayError(e)}},submit:function(){var e=this,t=this._verificationInfo,n=this._getPassword(),i=t.get("token"),r=t.get("code"),s=t.get("emailToHashWith"),a=this.getAccount();return Promise.resolve().then(function(){var t=e._accountRecoveryVerficationInfo;return t?e.user.completeAccountPasswordResetWithRecoveryKey(a,n,t.get("accountResetToken"),t.get("recoveryKeyId"),t.get("kB"),e.relier,s):e.user.completeAccountPasswordReset(a,n,i,r,e.relier,s)}).then(function(t){return e.relier.set("resetPasswordConfirm",!0),e.logViewEvent("verification.success"),e.invokeBrokerMethod("afterCompleteResetPassword",t)}).then(function(){e.navigate(e._accountRecoveryVerficationInfo?"reset_password_with_recovery_key_verified":"reset_password_verified")}).catch(function(t){if(o.a.is(t,"INVALID_TOKEN"))return e.logError(t),delete e._accountRecoveryVerficationInfo,e.render();throw t})},_getPassword:function(){return this.$("#password").val()},_getVPassword:function(){return this.$("#vpassword").val()},resend:function(){return this.resetPassword(this._verificationInfo.get("email"))}});s.a.mixin(S,c.default,l.default,d.default,Object(h.default)({balloonEl:".helper-balloon",passwordEl:"#password"}),Object(p.default)(),m.default);t.default=S},,,,,function(e,t,n){"use strict";n.r(t);var i=n(5),r=n.n(i),o=n(6),s=n.n(o),a=n(11),c=n(4),u=n(23),l=n(80),d=a.default.extend({initialize:function(e){this._environment=(e=e||{}).environment,this._createView=e.createView},notifications:{"show-child-view":"showChildView","show-view":"showView"},events:{'click a[href^="/"]':"onAnchorClick",keyup:"onKeyUp"},onKeyUp:function(e){e.which===u.a.ESCAPE&&(r.a.modal.isActive()?r.a.modal.close():0>e.currentTarget.className.indexOf("settings")||(r()(".settings-unit").removeClass("open"),this.navigate("settings")))},onAnchorClick:function(e){if(!(e.isDefaultPrevented()||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){e.preventDefault();var t=r()(e.currentTarget).attr("href").replace(/^\//,"");this.navigate(t)}},_currentView:null,showView:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.resolve().then(function(){n.model=n.model||new s.a.Model;var i=t._currentView;if(i instanceof e&&!0!==n.force)return i.model.set(n.model.toJSON()),t.notifier.trigger("navigate-from-child-view",n),t.setTitle(i.titleFromView()),i;i&&i.destroy();var r=t._createView(e,n);return t._currentView=r,r.render().then(function(e){return e?(t.setTitle(r.titleFromView()),t.writeToDOM(r.el),r.logView(),r.afterVisible(),t.notifier.trigger("view-shown",r),r):(r.destroy(),r===t._currentView&&(t._currentView=null),Promise.resolve(null))})}).catch(this.fatalError.bind(this))},showChildView:function(e,t,n){var i=this;return Promise.resolve().then(function(){if(!(i._currentView instanceof t))return i.showView(t,n)}).then(function(){return i._currentView.showChildView(e,n)}).then(function(e){var t=e.titleFromView(i._currentView.titleFromView());return i.setTitle(t),e.logView(),e.model.set(n.model.toJSON()),e.displayStatusMessages(),e})},setTitle:function(e){this.window.document.title=e}});c.a.mixin(d,l.default),t.default=d},,function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(1),s=n(4),a=n(7),c=n(15),u=n(10),l=n(55),d=n(31),h=n(264),f=n.n(h),p=n(17),m=n(218),g=a.default.extend({className:"recovery-key-confirm",template:f.a,viewName:"account-recovery-confirm-key",events:r.a.extend({},a.default.prototype.events,{"click .lost-recovery-key":Object(u.default)("_lostRecoveryKey")}),_lostRecoveryKey:function(){this.logFlowEvent("lost-recovery-key",this.viewName),this.navigate("/complete_reset_password",{lostRecoveryKey:!0})},initialize:function(){this._searchParams=p.a.searchParams(this.window.location.search),this._verificationInfo=new m.a(this._searchParams)},setInitialContext:function(e){var t=this._verificationInfo.isExpired();e.set({isLinkExpired:t})},submit:function(){var e=this,t=this.getSignedInAccount(),n=this._verificationInfo,i=n.get("email"),r=n.get("token"),s=n.get("code"),a=n.get("uid"),c=this.$("#recovery-key").val();return Promise.resolve().then(function(){var e=t.get("accountResetToken");return e||t.passwordForgotVerifyCode(s,r,{accountResetWithRecoveryKey:!0}).then(function(e){return t.set("accountResetToken",e.accountResetToken),e.accountResetToken})}).then(function(n){return t.getRecoveryBundle(a,c).then(function(t){e.logFlowEvent("success",e.viewName),e.navigate("/account_recovery_reset_password",{accountResetToken:n,email:i,kB:t.keys.kB,recoveryKeyId:t.recoveryKeyId})})}).catch(function(t){if(o.a.is(t,"INVALID_TOKEN"))return e._verificationInfo.markExpired(),e.render();if(o.a.is(t,"INVALID_RECOVERY_KEY"))return e.logFlowEvent("invalidRecoveryKey",e.viewName),e.showValidationError(e.$(".recovery-key"),t);throw t})},resend:function(){return this.resetPassword(this._verificationInfo.get("email"))}});s.a.mixin(g,c.default,l.default,d.default),t.default=g},function(e,t,n){"use strict";n.r(t),t.default={match:function(e){return"checkbox"===e.attr("type")},val:function(){return!!this.is(":checked")},validate:function(){}}},function(e,t,n){"use strict";n.r(t);var i=n(1);t.default={match:function(e){return"number"===e.attr("type")&&"age"===e.prop("id")},validate:function(){var e=void 0!==this.attr("required"),t=this.val();if(t>130)throw i.a.toError("INVALID_AGE");if(e&&!function(e){return e&&e.length&&!isNaN(parseInt(e,10))}(t))throw i.a.toError("AGE_REQUIRED")}}},function(e,t,n){"use strict";n.r(t),t.default={match:function(){return!0},validate:function(){}}},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(3);t.default={match:function(e){return"email"===e.attr("type")},val:function(e){return 1===arguments.length?this.__val(e):this.__val().trim()},validate:function(){var e=this.val();if(!e)throw i.a.toError("EMAIL_REQUIRED");if(r.a.email().validate(e).error)throw i.a.toError("INVALID_EMAIL")}}},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(3);t.default={match:function(e){var t=e.attr("type");return"password"===t||"text"===t&&e.hasClass("password")},validate:function(){var e=this.val();if(!e)throw i.a.toError("PASSWORD_REQUIRED");if(r.a.password().validate(e).error)throw i.a.toError("PASSWORD_TOO_SHORT")}}},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(43),o=n(3),s=Object.create(r.default);s.match=function(e){return"text"===e.attr("type")&&e.hasClass("recovery-code")},s.val=function(e){return 1===arguments.length?this.__val(e):this.__val().trim()},s.validate=function(){var e=this.val();if(!e.length)throw i.a.toError("RECOVERY_CODE_REQUIRED");if(o.a.recoveryCode().validate(e).error)throw i.a.toError("INVALID_RECOVERY_CODE")},t.default=s},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(43),o=n(3),s=Object.create(r.default);s.match=function(e){return"text"===e.attr("type")&&e.hasClass("recovery-key")},s.val=function(e){return 1===arguments.length?this.__val(e):this.__val().replace(/ /g,"").toUpperCase()},s.validate=function(){var e=this.val();if(!e.length)throw i.a.toError("RECOVERY_KEY_REQUIRED");if(o.a.base32().validate(e).error)throw i.a.toError("INVALID_RECOVERY_KEY")},t.default=s},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(63),o=n.n(r),s=n(43),a=Object.create(s.default);a.match=function(e){return"tel"===e.attr("type")},a.val=function(e){return 1===arguments.length?this.__val(e):this.__val().replace(/[.,()\s-]/g,"")},a.validate=function(){var e=void 0!==this.attr("required"),t=this.val(),n=t.length,r=this.data("country")||"US",s=o.a[r].pattern;if(!n&&e)throw i.a.toError("PHONE_NUMBER_REQUIRED");if(n&&!s.test(t))throw i.a.toError("INVALID_PHONE_NUMBER")},t.default=a},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(43),o=n(3),s=Object.create(r.default);s.match=function(e){return"number"===e.attr("type")&&e.hasClass("totp-code")},s.val=function(e){return 1===arguments.length?this.__val(e.replace(/[- ]*/g,"")):this.__val()},s.validate=function(){var e=this.val();if(!e.length)throw i.a.toError("TOTP_CODE_REQUIRED");if(o.a.totpCode().validate(e).error)throw i.a.toError("INVALID_TOTP_CODE")},t.default=s},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(43),o=n(3),s=Object.create(r.default);s.match=function(e){return"text"===e.attr("type")&&e.hasClass("otp-code")},s.val=function(e){return 1===arguments.length?this.__val(e.replace(/ /g,"")):this.__val().replace(/ /g,"")},s.validate=function(){var e=this.val();if(!e.length)throw i.a.toError("OTP_CODE_REQUIRED");if(o.a.totpCode().validate(e).error)throw i.a.toError("INVALID_OTP_CODE")},t.default=s},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(43),o=n(3),s=Object.create(r.default);s.match=function(e){return"text"===e.attr("type")&&e.hasClass("unblock-code")},s.val=function(e){return 1===arguments.length?this.__val(e):this.__val().trim()},s.validate=function(){var e=void 0!==this.attr("required"),t=this.val();if(e&&!t.length)throw i.a.toError("UNBLOCK_CODE_REQUIRED");if(o.a.unblockCode().validate(t).error)throw i.a.toError("INVALID_UNBLOCK_CODE")},t.default=s},function(e,t,n){"use strict";n.r(t);var i=n(1);t.default=function(e){return function(){var t,n=this,r=arguments;return this.clearTimeout(this._workingTimeout),this._workingTimeout=this.setTimeout(function(){var e=i.a.toError("WORKING");t=n.displayError(e)},this.LONGER_THAN_EXPECTED),Promise.resolve().then(function(){return n.invokeHandler(e,r)}).then(function(e){return n.clearTimeout(n._workingTimeout),t===n.$(".error").text()&&n.hideError(),e},function(e){throw n.clearTimeout(n._workingTimeout),e})}}},function(e,t,n){"use strict";n.r(t);var i,r,o,s=n(41),a={notifications:(i={},r=s.a.SESSION_VERIFIED,o="_render",r in i?Object.defineProperty(i,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[r]=o,i),_render:function(){this.render()}};t.default=a},function(e,t,n){"use strict";n.r(t);t.default={afterRender:function(){this.onFormChange()},onFormChange:function(){this.isValid()?this.enableForm():this.disableForm()},disableForm:function(){this.$("button[type=submit]").addClass("disabled")},enableForm:function(){this.$("button[type=submit]").removeClass("disabled")}}},function(e,t,n){"use strict";n.r(t);var i=n(11),r=n(275),o=i.default.extend({template:n.n(r).a,className:"cannot-create-account",setInitialContext:function(e){e.set("isSync",this.relier.isSync())}});t.default=o},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(0),o=n(7),s=n(211),a=o.default.extend({events:{change:"updateModelAfterDelay",focus:"createBalloonIfNeeded",keypress:"updateModelAfterDelay"},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.passwordHelperBalloon=t.passwordHelperBalloon,this.balloonEl=t.balloonEl,this.$el.data("validate",function(){return e.validate()}),this.listenTo(this.model,"invalid",function(){return e.createBalloonIfNeeded()});var n=t.delayBeforeUpdateModelMS||1e3;this.updateModelAfterDelay=Object(r.debounce)(function(){return e.updateModel()},n)},createBalloonIfNeeded:function(){this.shouldCreateBalloon()&&this.createBalloon()},shouldCreateBalloon:function(){if(this.passwordHelperBalloon)return!1;var e=this.$el.val();return!e||!!this.model.validate({password:e})},createBalloon:function(){var e=this,t=this.passwordHelperBalloon=new s.default({el:this.balloonEl,lang:this.lang,model:this.model,translator:this.translator});return this.trackChildView(t),this.listenTo(t,"rendered",function(){return e.updateStyles()}),t.render().then(function(){e.$el.attr("aria-described-by","password-strength-balloon"),e.$el.val()&&e.updateModel()})},updateModel:function(){this.model.set("password",this.$el.val())},updateStyles:function(){var e=this.model.validationError;if(e){var t=this._getDescribedById(e);this.markElementInvalid(this.$el,t)}else this.markElementValid(this.$el)},_getDescribedById:function(e){return i.a.is(e,"PASSWORD_REQUIRED")?"password-too-short":i.a.is(e,"PASSWORD_TOO_SHORT")?"password-too-short":i.a.is(e,"PASSWORD_SAME_AS_EMAIL")?"password-same-as-email":i.a.is(e,"PASSWORD_TOO_COMMON")?"password-too-common":void 0},validate:function(){this.updateModel();var e=this.model.validationError;if(e)throw e.describedById=this._getDescribedById(e),e}});t.default=a},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(5),s=n.n(o),a=n(27),c=n(4),u=n(84),l=n(15),d=n(7),h=n(71),f=n(277),p="screen-choose-what-to-sync",m=d.default.prototype,g=d.default.extend({template:n.n(f).a,className:"choose-what-to-sync",initialize:function(){this._account=this.user.initAccount(this.model.get("account")),this.onSubmitComplete=this.model.get("onSubmitComplete"),this.allowToDisableSync=this.model.get("allowToDisableSync"),this.pollVerification=this.model.get("pollVerification")},getAccount:function(){return this._account},beforeRender:function(){this.getAccount().get("sessionToken")||this.navigate("signup")},afterRender:function(){s()("body").addClass(p)},afterVisible:function(){var e=this,t=this.getAccount();return m.afterVisible.call(this).then(function(){return e.broker.persistVerificationData(t)}).then(function(){e.pollVerification&&e.waitForSessionVerification(t,function(){return e.validateAndSubmit()})})},destroy:function(){var e;s()("body").removeClass(p);for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];return(e=m.destroy).call.apply(e,[this].concat(n))},setInitialContext:function(e){var t=this.getAccount(),n=this._getOfferedEngines();e.set({email:t.get("email"),engines:n,showDoNotSyncButton:this.allowToDisableSync})},submit:function(){var e=this;return Promise.resolve().then(function(){var t=e.getAccount(),n=e._getDeclinedEngineIds(),i=e._getOfferedEngineIds();return e._trackDeclinedEngineIds(n),e.enableSync(),t.set({declinedSyncEngines:n,offeredSyncEngines:i}),e.notifier.trigger("set-sync-engines",i.filter(function(e){return-1===n.indexOf(e)})),e.onSubmitComplete(t)})},_getOfferedEngines:function(){var e=this;return this.broker.get("chooseWhatToSyncWebV1Engines").toJSON().map(function(t,n){var i=Object.create(t);return i.tabindex=5*(n+1),i.text=e.translate(i.text,{}),i})},_getOfferedEngineIds:function(){return this._getOfferedEngines().map(function(e){return e.id})},_getDeclinedEngineIds:function(){return this.$el.find("input[name=sync-content]").not(":checked").map(function(){return this.value}).get()},_trackDeclinedEngineIds:function(e){var t=this;r.a.isArray(e)&&e.forEach(function(e){t.logViewEvent("engine-unchecked.".concat(e))})}},{SCREEN_CLASS:p});c.a.mixin(g,a.default,l.default,h.default,u.default),t.default=g},function(e,t,n){"use strict";n.r(t);var i=n(11),r=n(278),o=i.default.extend({template:n.n(r).a,beforeRender:function(){try{localStorage.clear(),sessionStorage.clear(),document.cookie="tooyoung=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"}catch(e){}}});t.default=o},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(106),s=n(1),a=n(11),c=n(4),u=n(41),l=n(55),d=n(128),h=n(31),f=n(22),p=n(33),m=n(284),g=n.n(m),v=n(2),_=function(e){return e},y=a.default.extend({template:g.a,className:"confirm-reset-password",initialize:function(){this._verificationPollMS=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).verificationPollMS||v.VERIFICATION_POLL_IN_MS},setInitialContext:function(e){var t=this.model.get("email"),n=this.relier.get("resetPasswordConfirm");e.set({email:t,encodedEmail:encodeURIComponent(t),forceAuth:this.broker.isForceAuth(),isSignInEnabled:n})},getAccount:function(){return this._account||(this._account=this.user.initAccount({email:this.model.get("email")})),this._account},beforeRender:function(){var e=this;if(this.model.has("passwordForgotToken"))return this.getAccount().checkRecoveryKeyExistsByEmail().then(function(t){e.model.set("hasRecoveryKey",t.exists)});this.navigate("reset_password")},afterVisible:function(){var e=this,t=this.getAccount();return this.broker.persistVerificationData(t).then(function(){return e._waitForConfirmation().then(function(n){return e.logViewEvent("verification.success"),e.relier.set("resetPasswordConfirm",!0),!t.canFetchKeys()&&e.relier.wantsKeys()&&e.relier.isOAuth()?e._finishPasswordResetDifferentBrowser():n?e._finishPasswordResetSameBrowser(n):e._finishPasswordResetDifferentBrowser()}).catch(e.displayError.bind(e))})},_waitForConfirmation:function(){var e=this;return new Promise(function(t,n){var i=function(n){e._stopWaiting(),t(n)},r=function(t){e._stopWaiting(),n(t)};e.notifier.on(u.a.COMPLETE_RESET_PASSWORD_TAB_OPEN,function(){e._isWaitingForLoginMessage||(e._waitForLoginMessage().then(i,r),e._stopWaitingForServerConfirmation())}),e._waitForServerConfirmation().then(i,r)})},_finishPasswordResetSameBrowser:function(e){var t=this,n=this.user.getAccountByUid(e.uid);return n.set(r.a.pick(e,o.a.ALLOWED_KEYS)),n.isDefault()?Promise.reject(s.a.toError("UNEXPECTED_ERROR")):this.user.setSignedInAccount(n).then(function(){return t.displaySuccess(_("Password reset")),t.invokeBrokerMethod("afterResetPasswordConfirmationPoll",n)}).then(function(){t.navigate("reset_password_confirmed")})},_finishPasswordResetDifferentBrowser:function(){p.a.clear();var e={account:this.getAccount()};this.model.get("hasRecoveryKey")||(e.success=_("Password reset successfully. Sign in to continue.")),this.navigate("signin",e)},_isWaitingForServerConfirmation:!1,_waitForServerConfirmation:function(){var e=this;this._isWaitingForServerConfirmation=!0;var t=this.getAccount(),n=this.model.get("passwordForgotToken");return t.isPasswordResetComplete(n).then(function(t){return e._isWaitingForServerConfirmation?t?null:new Promise(function(t){e._waitForServerConfirmationTimeout=e.setTimeout(function(){e._isWaitingForServerConfirmation&&t(e._waitForServerConfirmation())},e._verificationPollMS)}):new Promise(function(){})})},_stopWaitingForServerConfirmation:function(){this._waitForServerConfirmationTimeout&&this.clearTimeout(this._waitForServerConfirmationTimeout),this._isWaitingForServerConfirmation=!1},_isWaitingForLoginMessage:!1,_waitForLoginMessage:function(){var e=this;return new Promise(function(t){e._isWaitingForLoginMessage=!0,e.notifier.on(u.a.SIGNED_IN,t)})},_stopListeningForInterTabMessages:function(){this._isWaitingForLoginMessage=!1,this.notifier.off()},_stopWaiting:function(){this._stopWaitingForServerConfirmation(),this._stopListeningForInterTabMessages()},resend:function(){var e=this;return this.retryResetPassword(this.model.get("email"),this.model.get("passwordForgotToken")).catch(function(t){if(s.a.is(t,"INVALID_TOKEN"))return e.navigate("reset_password",{error:t});throw t})}});c.a.mixin(y,l.default,d.default,Object(h.default)(),f.default),t.default=y},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var u=n(0),l=n.n(u),d=n(1),h=n(4),f=n(15),p=n(7),m=n(22),g=n(286),v=n.n(g),_=n(31),y=n(71),w=p.default.prototype,b=function(){function e(){var t,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var u=arguments.length,l=Array(u),d=0;u>d;d++)l[d]=arguments[d];return r=this,c(s(n=!(a=(t=o(e)).call.apply(t,[this].concat(l)))||"object"!==i(a)&&"function"!=typeof a?s(r):a),"template",v.a),c(s(n),"className","confirm-signup-code"),n}var t,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(e,p["default"]),t=e,(n=[{key:"afterVisible",value:function(){var e=this,t=this.getAccount();return w.afterVisible.call(this).then(function(){return e.broker.persistVerificationData(t)}).then(function(){return e.waitForSessionVerification(e.getAccount(),function(){}),e.invokeBrokerMethod("beforeSignUpConfirmationPoll",t)})}},{key:"getAccount",value:function(){return this.model.get("account")}},{key:"setInitialContext",value:function(e){var t=this.getAccount().get("email");e.set({email:t,escapedEmail:'<span class="email">'.concat(l.a.escape(t),"</span>")})}},{key:"beforeRender",value:function(){this.getAccount()||this.navigate("signup")}},{key:"resend",value:function(){return this.getAccount().verifySessionResendCode()}},{key:"submit",value:function(){var e=this,t=this.getAccount(),n=this.getElementValue("input.otp-code"),i=t.get("newsletters"),r={service:this.relier.get("service")||null};return this.user.verifyAccountSessionCode(t,n,r).then(function(){return e.logViewEvent("verification.success"),e.notifier.trigger("verification.success"),i&&e.notifier.trigger("flow.event",{event:"newsletter.subscribed"}),e.invokeBrokerMethod("afterSignUpConfirmationPoll",t)}).catch(function(t){if(d.a.is(t,"INVALID_EXPIRED_SIGNUP_CODE")||d.a.is(t,"OTP_CODE_REQUIRED")||d.a.is(t,"INVALID_OTP_CODE"))return e.showValidationError(e.$("input.otp-code"),t);throw t})}}])&&r(t.prototype,n),u&&r(t,u),e}();h.a.mixin(b,f.default,Object(_.default)(),m.default,y.default),t.default=b},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(27),o=n(11),s=n(4),a=n(37),c=n(289),u=o.default.extend({constructor:function(e){o.default.call(this,e),this._Storage=e.Storage||a.a},template:n.n(c).a,className:"cookies-disabled",events:{"click #submit-btn":"backIfLocalStorageEnabled"},backIfLocalStorageEnabled:function(){if(!this._Storage.isLocalStorageEnabled())return this.displayError(i.a.toError("COOKIES_STILL_DISABLED"));this.back()}});s.a.mixin(u,r.default),t.default=u},function(e,t,n){"use strict";n.r(t);var i=n(45);t.default={dependsOn:[i.default],isInEmailMxValidationExperimentTreatment:function(){return"treatment"===this.getAndReportExperimentGroup("emailMxValidation")}}},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o=n(15),s=n(30),a=n(111),c=n(295),u=n.n(c);t.default=function(e){return Object(s.a)(e.entrypoint,"entrypoint"),Object(s.a)(e.flowEvent,"flowEvent"),{dependsOn:[o.default,a.default],events:{"click #suggest-sync .dismiss":"onSuggestSyncDismiss"},afterVisible:function(){this.isSyncSuggestionEnabled()&&this.logViewEvent("sync-suggest.visible")},setInitialContext:function(t){var n;n=this.isSyncAuthSupported()?this.getEscapedSyncUrl("",e.entrypoint,{action:"email"}):encodeURI(r.a.MOZ_ORG_SYNC_GET_STARTED_LINK);var i='data-flow-event="'.concat(e.flowEvent,'" href="').concat(n,'"'),o=this.renderTemplate(u.a,{escapedSyncSuggestionAttrs:i,showSyncSuggestion:this.isSyncSuggestionEnabled()});t.set({syncSuggestionHTML:o})},isSyncSuggestionEnabled:function(){return!this.relier.get("service")&&"web"===this.relier.get("context")},onSuggestSyncDismiss:function(){this.$("#suggest-sync").hide()}}}},function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.r(t),n.d(t,"EMAIL_SELECTOR",function(){return l}),n.d(t,"DATALIST_OPTIONS_SELECTOR",function(){return d}),n.d(t,"FOCUS_HACK_SELECTOR",function(){return h}),n.d(t,"DOMAINS",function(){return f});var r,o,s,a=n(296),c=n.n(a),u=n(21),l="input[type=email]",d="#autocomplete-domain option",h="#focus-hack",f=["gmail.com","outlook.com","hotmail.com","yahoo.com","qq.com","web.de","aol.com","mail.ru","icloud.com","gmx.de","t-online.de","orange.fr","yandex.ru","yahoo.fr","live.com","163.com","msn.com","comcast.net","hotmail.co.uk","hotmail.fr"];t.default={events:(r={},o="keyup ".concat(l),s="_toggleDomainAutocomplete",o in r?Object.defineProperty(r,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[o]=s,r),dependsOn:[u.a],setInitialContext:function(e){var t=this.renderTemplate(c.a,{options:f});e.set({unsafeEmailAutocompleteDomainsHTML:t})},afterRender:function(){this.isAndroid=this.getUserAgent().isAndroid(),this.isChrome=this.getUserAgent().isChrome(),this.isEdge=this.getUserAgent().isEdge(),this.input=this.$(l),this.datalistOptions=this.$(d),this.focusHack=this.$(h),this.previousUsername=null},_focusHack:function(){this.focusHack.focus(),this.input.focus()},_toggleDomainAutocomplete:function(){var e=this.input.val(),t=i(e.split("@"),1)[0];2>e.length||!e.includes("@")||t===this.previousUsername&&this.input.attr("list")?!e.includes("@")&&this.input.attr("list")&&(this.input.removeAttr("list"),this.datalistOptions.each(function(e,t){t.removeAttribute("value")}),this._focusHack()):(this.isAndroid||this.isEdge)&&e.endsWith("@")||(!this.isAndroid&&this.isChrome&&this._focusHack(),this.input.attr("list","autocomplete-domain"),this.datalistOptions.each(function(e,n){n.setAttribute("value","".concat(t,"@").concat(f[e]))}),(!this.isAndroid||this.isAndroid&&!this.isChrome)&&this._focusHack()),this.previousUsername=t}}},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t);var c=n(1),u=n(11),l=n(4),d=n(13),h=n(103),f=n(56),p=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,s(e).apply(this,arguments))}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(e,u["default"]),t=e,(n=[{key:"beforeRender",value:function(){if(this.relier.get("prompt")===h.a.NONE)return this._doPromptNone().then(function(){return!1});var e=this.relier.get("action");e?this.replaceCurrentPage("email"===e?"/oauth/":e):this.replaceCurrentPage("/oauth/")}},{key:"_doPromptNone",value:function(){var e=this,t=this.getSignedInAccount();return this.relier.validatePromptNoneRequest(t).then(function(){return e.signIn(t,null)}).catch(function(t){var n=e._normalizePromptNoneError(t);return e._handlePromptNoneError(n)})}},{key:"_normalizePromptNoneError",value:function(e){return c.a.is(e,"INVALID_TOKEN")&&(e=d.a.toError("PROMPT_NONE_NOT_SIGNED_IN")),e}},{key:"_handlePromptNoneError",value:function(e){var t=this;return Promise.resolve().then(function(){if(t._shouldSendErrorToRP(e))return t.broker.sendOAuthResultToRelier({error:e.response_error_code,redirect:t.relier.get("redirectUri")});throw e})}},{key:"_shouldSendErrorToRP",value:function(e){return e.response_error_code&&!1!==this.relier.get("returnOnError")}}])&&r(t.prototype,n),i&&r(t,i),e}();l.a.mixin(p,f.default),t.default=p},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(27),o=n(4),s=n(15),a=n(7),c=n(55),u=n(10),l=n(22),d=n(33),h=n(308),f=n.n(h),p=a.default.extend({events:{"click .remember-password":Object(u.default)("_rememberPassword")},initialize:function(e){this.template=f.a,this.className="reset_password",this._formPrefill=e.formPrefill,a.default.prototype.initialize.call(this,e)},setInitialContext:function(e){e.set({forceEmail:this.model.get("forceEmail")}),a.default.prototype.setInitialContext.call(this,e)},beforeRender:function(){var e=this,t=this.relier.get("email");if(!1===this.relier.get("resetPasswordConfirm")&&t)return this._resetPassword(t).then(function(){return!1}).catch(function(t){e.model.set("error",t)});a.default.prototype.beforeRender.call(this)},beforeDestroy:function(){var e=this.getElementValue(".email");e&&this._formPrefill.set({email:e})},submit:function(){return this._resetPassword(this.getElementValue(".email"))},_rememberPassword:function(){this.model.get("forceEmail")?this.navigate("force_auth"):this.navigate("signin")},_resetPassword:function(e){var t=this;return this.resetPassword(e).catch(function(e){if(d.a.clear("oauth"),i.a.is(e,"UNKNOWN_ACCOUNT"))return e.forceMessage='Unknown account. <a href="/signup">Sign up</a>',t.unsafeDisplayError(e);if(!i.a.is(e,"USER_CANCELED_LOGIN"))throw e;t.logEvent("login.canceled")})}});o.a.mixin(p,r.default,s.default,c.default,l.default),t.default=p},function(e,t,n){"use strict";n.r(t);var i=n(25),r=n(4),o=n(7),s=n(28),a=n(310),c=o.default.extend({template:n.n(a).a,className:"avatar",viewName:"settings.avatar",beforeRender:function(){this.supportsAvatarUpload()||this.remove()},onProfileUpdate:function(){this.render()},setInitialContext:function(e){var t=this.getSignedInAccount();e.set("avatarDefault",t.get("profileImageUrlDefault"))}});r.a.mixin(c,i.default,s.default),t.default=c},function(e,t,n){"use strict";n.r(t);var i=n(6),r=n.n(i),o=n(11),s=n(32),a=n(311),c=o.default.prototype,u=o.default.extend({template:n.n(a).a,className:"sub-panels",initialize:function(e){this._panelViews=(e=e||{}).panelViews||[],this._parent=e.parent,this._createView=e.createView,this._logger=new s.a},showChildView:function(e,t){var n=this;return-1===this._panelViews.indexOf(e)?(this._logger.warn("Tried to show a view that is not a subpanel"),Promise.resolve(null)):this._createChildViewIfNeeded(e,t).then(function(e){if(e)return n._currentChildView=e,e.openPanel(),e})},_childViewInstanceFromClass:function(e){return this.childViews.filter(function(t){if(t instanceof e)return!0})[0]},_isModalView:function(e){return!!e.prototype.isModal},_childViewClassName:function(e){return e.prototype.className},_createChildViewIfNeeded:function(e,t){t=t||{};var n=this._childViewInstanceFromClass(e);if(n)return Promise.resolve(n);var i=this._childViewClassName(e),o="."+i;this.$(".child-views").append('<div class="settings-child-view '+i+'"></div>');var s=new r.a.Model;t.model&&s.set(t.model.toJSON());var a=this._createView(e,{el:this.$(o),model:s,parentView:this._parent});return this.trackChildView(a),this.renderChildView(a)},renderChildView:function(e){return e.render().then(function(t){if(t)return e.afterVisible(),e;e.destroy(!0)})},afterRender:function(){var e=this,t=this._panelViews.filter(function(t){return!e._isModalView(t)});return Promise.all(t.map(function(t){return e._createChildViewIfNeeded(t)})).then(c.afterRender.bind(this))}});t.default=u},function(e,t,n){"use strict";n.r(t);var i=n(27),r=n(11),o=n(4),s=n(15),a=n(10),c=n(33),u=n(315),l=r.default.extend({events:{"click #create-account":"_createAccount"},template:n.n(u).a,initialize:function(e){this._formPrefill=e.formPrefill},beforeRender:function(){this.model.has("email")||this.navigate("signin")},setInitialContext:function(e){e.set({email:this.model.get("email"),escapedSupportLinkAttrs:'id="support" href="https://support.mozilla.org/" target="_blank" data-flow-event="link.support"'})},_createAccount:Object(a.default)(function(){this.user.removeAllAccounts(),c.a.clear(),this._formPrefill.clear(),this.navigate("signup")})});o.a.mixin(l,i.default,s.default),t.default=l},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(1),s=n(4),a=n(7),c=n(22),u=n(317),l=a.default.extend({className:"sign-in-recovery-code",template:n.n(u).a,viewName:"sign_in_recovery_code",beforeRender:function(){var e=this.getSignedInAccount();e&&e.get("sessionToken")||this.navigate(this._getAuthPage())},setInitialContext:function(e){e.set({escapedLockedOutSupportLink:r.a.escape("https://support.mozilla.org/kb/what-if-im-locked-out-two-step-authentication")})},submit:function(){var e=this,t=this.getSignedInAccount(),n=this.getElementValue("input.recovery-code").toLowerCase();return t.consumeRecoveryCode(n).then(function(n){return 2>n.remaining?e.navigate("/settings/two_step_authentication/recovery_codes",{previousViewName:e.viewName}):(e.logViewEvent("success"),e.invokeBrokerMethod("afterCompleteSignInWithCode",t))}).catch(function(t){o.a.is(t,"INVALID_PARAMETER")&&(t=o.a.toError("INVALID_RECOVERY_CODE")),e.showValidationError(e.$("input.recovery-code"),t)})},_getAuthPage:function(){return"force_auth"===this.model.get("lastPage")?"force_auth":"signin"}});s.a.mixin(l,c.default),t.default=l},function(e,t,n){"use strict";n.r(t);var i=n(11),r=n(318);t.default=i.default.extend({template:n.n(r).a})},function(e,t,n){"use strict";n.r(t);var i=n(4),r=n(2),o=n.n(r),s=n(7),a=n(319),c=n.n(a),u=n(31),l=n(71),d=s.default.extend({className:"sign-in-token-code",template:c.a,getAccount:function(){return this.model.get("account")},beforeRender:function(){this.model.get("account")||this.navigate(this._getAuthPage())},afterVisible:function(){this.waitForSessionVerification(this.getAccount(),function(){})},setInitialContext:function(e){var t=this.getAccount().get("email"),n=o.a.BLOCKED_SIGNIN_SUPPORT_URL;e.set({email:t,escapedSupportLink:encodeURI(n),hasSupportLink:!!n})},submit:function(){var e=this,t=this.getAccount(),n=this.getElementValue("input.otp-code");return this.user.verifyAccountSessionCode(t,n).then(function(){return e.logViewEvent("success"),e.invokeBrokerMethod("afterCompleteSignInWithCode",t)}).catch(function(t){return e.showValidationError(e.$("input.otp-code"),t)})},resend:function(){return this.getAccount().verifySessionResendCode()},_getAuthPage:function(){return"force_auth"===this.model.get("lastPage")?"force_auth":"signin"}});i.a.mixin(d,Object(u.default)(),l.default),t.default=d},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(4),o=n(7),s=n(22),a=n(256),c=n.n(a),u=n(38),l=n(15),d=o.default.extend({className:"sign-in-totp-code",template:c.a,getAccount:function(){return this.model.get("account")||this.getSignedInAccount()},beforeRender:function(){var e=this.getAccount();e&&e.get("sessionToken")||this.navigate(this._getAuthPage())},submit:function(){var e=this,t=this.getAccount(),n=this.getElementValue("input.totp-code");return t.verifyTotpCode(n,this.relier.get("service")).then(function(n){if(n.success)return e.logFlowEvent("success",e.viewName),e.invokeBrokerMethod("afterCompleteSignInWithCode",t);throw i.a.toError("INVALID_TOTP_CODE")}).catch(function(t){return e.showValidationError(e.$("input.totp-code"),t)})},_getAuthPage:function(){return"force_auth"===this.model.get("lastPage")?"force_auth":"signin"}});r.a.mixin(d,l.default,s.default,u.default),t.default=d},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(4),o=n(2),s=n.n(o),a=n(7),c=n(31),u=n(48),l=n(56),d=n(320),h=a.default.extend({template:n.n(d).a,className:"sign-in-unblock",getAccount:function(){return this.model.get("account")},beforeRender:function(){this.model.get("account")||this.navigate(this._getAuthPage())},setInitialContext:function(e){var t=this.getAccount().get("email"),n=this._getSupportLink();e.set({email:t,escapedSupportLink:encodeURI(n),hasSupportLink:!!n,unblockCodeLength:s.a.UNBLOCK_CODE_LENGTH})},submit:function(){var e=this,t=this.getAccount(),n=this.model.get("password"),i=this.getElementValue("#unblock_code");return this.signIn(t,n,{unblockCode:i}).catch(function(i){return e.onSignInError(t,n,i)})},onSignInError:function(e,t,n){if(!i.a.is(n,"INCORRECT_PASSWORD"))throw n;this.navigate(this._getAuthPage(),{account:this.getAccount(),email:e.get("email"),error:n})},resend:function(){return this._sendUnblockEmail()},_sendUnblockEmail:function(){var e=this;return this.getAccount().sendUnblockEmail().catch(function(t){return e.displayError(t)})},_getAuthPage:function(){return"force_auth"===this.model.get("lastPage")?"force_auth":"signin"},_getSupportLink:function(){return s.a.BLOCKED_SIGNIN_SUPPORT_URL}});r.a.mixin(h,Object(c.default)(),u.default,l.default),t.default=h},function(e,t,n){"use strict";n.r(t);var i=n(45),r=n(84);t.default={dependsOn:[i.default,r.default],setInitialContext:function(e){this.isCWTSOnSignupPasswordEnabled()&&e.set({engines:this._getOfferedEngines(),isCWTSOnSignupPasswordEnabled:!0})},isCWTSOnSignupPasswordEnabled:function(){return"treatment"===this.chooseCWTSOnSignupPasswordExperimentGroup()},chooseCWTSOnSignupPasswordExperimentGroup:function(){return this.getAndReportExperimentGroup("signupPasswordCWTS",{email:this.getAccount().get("email"),multiService:this.relier.get("multiService"),service:this.relier.get("service")})},_getOfferedEngines:function(){var e=this;return this.broker.get("chooseWhatToSyncWebV1Engines").toJSON().map(function(t,n){var i=Object.create(t);return i.tabindex=5*(n+1),i.text=e.translate(i.text,{}),i})},_getOfferedEngineIds:function(){return this._getOfferedEngines().map(function(e){return e.id})},_getDeclinedEngineIds:function(){return this.$el.find("input[name=sync-content]").not(":checked").map(function(){return this.value}).get()},_trackDeclinedEngineIds:function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){t.logViewEvent("engine-unchecked.".concat(e))})},beforeSubmit:function(){if(this.isCWTSOnSignupPasswordEnabled()){var e=this._getOfferedEngineIds(),t=this._getDeclinedEngineIds(),n=e.filter(function(e){return-1===t.indexOf(e)});t.length===e.length?this.disableSync():this.enableSync(),this.getAccount().set({declinedSyncEngines:t,offeredSyncEngines:e}),this._trackDeclinedEngineIds(t),this.notifier.trigger("set-sync-engines",n)}}}},function(e,t,n){"use strict";n.r(t);var i=n(146),r=[i.a.ONLINE_SAFETY,i.a.CONSUMER_BETA,i.a.HEALTHY_INTERNET];t.default={initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._experimentGroupingRules=e.experimentGroupingRules,this._marketingEmailEnabled=!1!==e.marketingEmailEnabled},setInitialContext:function(e){var t=this;if(this.isEmailOptInEnabled()){var n=this._getNewsletters().map(function(e){return{label:t.translate(e.label),slug:e.slug}});e.set({isAnyNewsletterEnabled:!!n.length,newsletters:n})}else e.set({isAnyNewsletterEnabled:!1,newsletters:[]})},isEmailOptInEnabled:function(){return!!this._marketingEmailEnabled&&!!this._experimentGroupingRules.choose("communicationPrefsVisible",{lang:this.navigator.language})},isAnyNewsletterVisible:function(){return!!this.$("input.marketing-email-optin").length},getOptedIntoNewsletters:function(){var e=this;return this._getNewsletters().filter(function(t){return e._hasOptedIntoNewsletter(t)}).map(function(e){return e.slug})},_hasOptedIntoNewsletter:function(e){return!!this.$(this._newsletterTypeToSelector(e)).is(":checked")},_newsletterTypeToSelector:function(e){return'input[value="'.concat(e.slug,'"]')},_getNewsletters:function(){return r}}},function(e,t,n){"use strict";n.r(t);var i=n(48);t.default={dependsOn:[i.default],events:{"click #suggest-sync a":"onSuggestSyncClick"},signUp:function(e,t){var n=this;return this.invokeBrokerMethod("beforeSignIn",e).then(function(){n.logFlowEvent("attempt","signup");var i={resume:n.getStringifiedResumeToken(e),verificationMethod:"email-otp"};return n.user.signUpAccount(e,t,n.relier,i)}).then(function(e){n.formPrefill&&n.formPrefill.clear(),n.notifier.trigger("account.created");var t=n.onSignUpSuccess.bind(n);return n.relier.accountNeedsPermissions(e)?n.navigate("signup_permissions",{account:e,onSubmitComplete:t}):!n.broker.get("chooseWhatToSyncWebV1Engines")||n.isCWTSOnSignupPasswordEnabled&&n.isCWTSOnSignupPasswordEnabled()?n.onSignUpSuccess(e):n.navigate("choose_what_to_sync",{account:e,allowToDisableSync:n.broker.hasCapability("syncOptional"),pollVerification:"sync"===n.relier.get("service"),onSubmitComplete:t})})},onSignUpSuccess:function(e){this.logViewEvent("success"),this.logViewEvent("signup.success"),"email-otp"===e.get("verificationMethod")?this.navigate("/confirm_signup_code",{account:e}):this.invokeBrokerMethod("afterSignUp",e)},onSuggestSyncClick:function(){this.logViewEvent("sync-suggest.clicked")}}},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var u=n(4),l=n(15),d=n(7),h=n(225),f=n.n(h),p=n(96),m=n(17),g=function(){function e(){var t,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var u=arguments.length,l=Array(u),d=0;u>d;d++)l[d]=arguments[d];return r=this,c(s(n=!(a=(t=o(e)).call.apply(t,[this].concat(l)))||"object"!==i(a)&&"function"!=typeof a?s(r):a),"mustAuth",!0),c(s(n),"template",f.a),n}var t,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(e,d["default"]),t=e,(n=[{key:"initialize",value:function(e){this._currentPage=e.currentPage,this._subscriptionsConfig={},e&&e.config&&e.config.subscriptions&&(this._subscriptionsConfig=e.config.subscriptions),this.initializeFlowEvents()}},{key:"afterRender",value:function(){var e=m.a.searchParams(this.window.location.search),t=this._currentPage.split("/").pop();return p.a.navigateToPaymentServer(this,this._subscriptionsConfig,"products/".concat(t),e)}}])&&r(t.prototype,n),u&&r(t,u),e}();u.a.mixin(g,l.default),t.default=g},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var u=n(4),l=n(15),d=n(7),h=n(225),f=n.n(h),p=n(96),m=function(){function e(){var t,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var u=arguments.length,l=Array(u),d=0;u>d;d++)l[d]=arguments[d];return r=this,c(s(n=!(a=(t=o(e)).call.apply(t,[this].concat(l)))||"object"!==i(a)&&"function"!=typeof a?s(r):a),"mustAuth",!0),c(s(n),"template",f.a),n}var t,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(e,d["default"]),t=e,(n=[{key:"initialize",value:function(e){this._subscriptionsConfig={},e&&e.config&&e.config.subscriptions&&(this._subscriptionsConfig=e.config.subscriptions),this.initializeFlowEvents()}},{key:"afterRender",value:function(){return p.a.navigateToPaymentServer(this,this._subscriptionsConfig,"subscriptions")}}])&&r(t.prototype,n),u&&r(t,u),e}();u.a.mixin(m,l.default),t.default=m},function(e,t,n){"use strict";n.r(t);var i=n(27),r=n(4),o=n(84),s=n(15),a=n(7),c=n(324),u=a.default.extend({template:n.n(c).a,className:"would-you-like-to-sync",initialize:function(){this._account=this.user.initAccount(this.model.get("account")),this.skipCWTS=this.model.get("skipCWTS"),this.onSubmitComplete=this.model.get("onSubmitComplete")},getAccount:function(){return this._account},beforeRender:function(){this.getAccount().get("sessionToken")||this.navigate("signup")},submit:function(){var e=this;return Promise.resolve().then(function(){var t=e.getAccount();return e.skipCWTS?(e.enableSync(),e.onSubmitComplete(t)):e.replaceCurrentPage("choose_what_to_sync",{account:t,onSubmitComplete:e.onSubmitComplete,allowToDisableSync:!1})})}},{SCREEN_CLASS:"screen-would-you-like-to-sync"});r.a.mixin(u,i.default,s.default,o.default),t.default=u},function(e,t,n){"use strict";n.r(t);n(163);var i,r=n(11),o=n(6),s=n.n(o).a.Model.extend({defaults:{name:null,verified:!1,createdAt:null}}),a=n(309),c=r.default.extend({template:n.n(a).a,className:"security-events",viewName:"security_events",mustVerify:!0,events:{"click #delete-events":"_deleteSecurityEvents"},beforeRender:function(){return(i=this.getSignedInAccount())||this.navigate("/signin"),this._fetchSecurityEvents()},setInitialContext:function(e){e.set({securityEvents:this._securityEvents})},_fetchSecurityEvents:function(){var e=this;return i.securityEvents().then(function(t){e._securityEvents=t.map(function(e){var t,n,i,r;return e.createdAt=(n=(t=new Date(e.createdAt)).toDateString(),i=t.toTimeString(),r=i.indexOf(" "),i=i.substring(0,r),"".concat(n," ").concat(i)),new s(e).toJSON()})})},_deleteSecurityEvents:function(){var e=this;return i.deleteSecurityEvents().then(function(){return e._securityEvents=[],e.render()})}});t.default=c},function(e,t,n){"use strict";n.r(t);var i=n(5),r=n.n(i),o=n(0),s=n.n(o),a=n(81),c=n(137),u=n(25),l=n(11),d=(n(255),n(4)),h=n(15),f=n(23),p=n(80),m=(n(163),n(96)),g=n(10),v=n(223),_=n.n(v),y=n(29),w=n(215),b=n(300),E=n.n(b),S=n(6),A=n.n(S),I=function(e){return e},C=[I("General inquiries"),I("Payment & billing"),I("Connection issues"),I("Getting started"),I("Account issues")],T=C.map(function(e){return e.toLocaleLowerCase()}),O=E.a.zipWith(["General inquiries","Payment & billing","Connection issues","Getting started","Account issues"],C,T,function(e,t,n){return{topic:e,translated:t,lowered:n}}),k=A.a.Model.extend({validate:function(e){if(""===e.message||""===e.plan||!e.productName||""===e.topic)return"Missing required field."},topicOptions:O,getTranslatedTopic:function(e){var t=O.find(function(t){return t.topic===e});return t?t.translated:e},getLoweredTopic:function(e){var t=O.find(function(t){return t.topic===e});return t?t.lowered:e}}),P=n(301),x=n.n(P),N=n(302),R=n.n(N),D=n(303),M=function(e){return e},L=l.default.prototype,V=l.default.extend({template:n.n(D).a,className:"settings",layoutClassName:"settings",viewName:"support",mustVerify:!0,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getUidAndSetSignedInAccount(),this.supportForm=new k,this._subscriptionsConfig={},e&&e.config&&e.config.subscriptions&&(this._subscriptionsConfig=e.config.subscriptions)},setInitialContext:function(e){var t=this.getSignedInAccount();e.set({unsafeHeaderHTML:this._getHeaderHTML(t),optionPlaceholder:M("Please Select One"),topicOptions:this.supportForm.topicOptions})},events:{"change #plan":"onFormChange","change #topic":"onFormChange","keyup #message":"onFormChange","click button[type=submit]":"submitSupportForm","click button.cancel":"navigateToSubscriptions",keyup:"onKeyUp"},onKeyUp:function(e){e.which===f.a.ESCAPE&&e.stopPropagation()},beforeRender:function(){var e=this,t=this.getSignedInAccount();return t.getSubscriptions().then(function(n){if(n.length){e.model.set("subscriptions",n);var i=t.fetchSubscriptionPlans().then(function(t){e.model.set("plans",t)}).catch(function(){});return Promise.all([t.fetchProfile(),i])}return e.navigateToSubscriptionsManagement(),!1})},_getHeaderHTML:function(e){return _()(e.pick("displayName","email"))},afterVisible:function(){return this.planEl=this.$("#plan"),this.topicEl=this.$("#topic"),this.submitBtn=this.$('button[type="submit"]'),this.submitText=this.$(".submit-content"),this.submitSpinner=this.$(".spinner"),this.cancelBtn=this.$("button.cancel"),this.subjectEl=this.$("#subject"),this.messageEl=this.$("#message"),this.planEl.chosen({disable_search:!0,width:"100%"}),this.topicEl.chosen({disable_search:!0,width:"100%"}),r()("div.chosen-drop ul").each(function(){r()(this).attr("aria-labelledby",r()(this).closest(".support-field").find("label").attr("id"))}),L.afterVisible.call(this).then(this._showAvatar.bind(this))},_showAvatar:function(){var e=this.getSignedInAccount();return this.displayAccountProfileImage(e)},onFormChange:function(e){e.stopPropagation();var t=this.planEl.val(),n=this.findPlan(t),i="Other";n&&(i=n.product_name,this.notifier.trigger("subscription.initialize",new w.a({planId:n.plan_id,productId:n.product_id},{window:this.window}))),this.supportForm.set({plan:t,productName:this.formatProductName(i),topic:this.topicEl.val(),subject:this.subjectEl.val().trim(),message:this.messageEl.val().trim()}),this.supportForm.isValid()?this.submitBtn.removeClass("disabled"):this.submitBtn.addClass("disabled")},findPlan:function(e){return this.model.get("plans").find(function(t){return t.plan_name===e})},formatProductName:function(e){return"".concat("FxA - ").concat(e)},submitButtonUIToggle:function(){this.submitBtn.toggleClass("disabled"),this.cancelBtn.toggleClass("disabled"),this.submitText.toggleClass("hidden"),this.submitSpinner.toggleClass("hidden")},submitSupportForm:Object(g.default)(Object(a.default)(function(){var e=this.getSignedInAccount(),t=s.a.clone(this.supportForm.attributes);return this.submitButtonUIToggle(),this.logFlowEvent("submit",this.viewName),e.createSupportTicket(t).then(this.handleFormResponse.bind(this)).then(this.submitButtonUIToggle.bind(this)).catch(this.displayErrorMessage.bind(this))})),handleFormResponse:function(e){!0===e.success?(this.logFlowEvent("success",this.viewName),this.displaySuccessMessage(),this.logFlowEvent("complete",this.viewName)):this.displayErrorMessage()},displaySuccessMessage:function(){var e,t=s.a.escape(this.supportForm.getLoweredTopic(this.supportForm.attributes.topic)),n=s.a.escape(this.supportForm.attributes.plan);e=this.supportForm.attributes.plan===M("Other")?M("Thank you for reaching out to Mozilla Support about <b>%(escapedLowercaseTopic)s</b>. We'll contact you via email as soon as possible."):M("Thank you for reaching out to Mozilla Support about <b>%(escapedLowercaseTopic)s</b> for <b>%(escapedSelectedPlan)s</b>. We'll contact you via email as soon as possible."),e=y.a.interpolate(this.unsafeTranslate(e),{escapedSelectedPlan:n,escapedLowercaseTopic:t});var i=this.renderTemplate(R.a,{message:e});r()("body").append(i),r()(".modal.dialog-success").modal({escapeClose:!1,clickClose:!1,showClose:!1}),r()(".modal.dialog-success").find("button").on("click",this.navigateToSubscriptions.bind(this))},displayErrorMessage:function(){this.logFlowEvent("fail",this.viewName);if(!r()(".modal.dialog-error").length){var e=this.renderTemplate(x.a);r()("body").append(e)}r()(".modal.dialog-error").modal({closeText:""})},navigateToSubscriptions:function(e){e.preventDefault(),this.navigateToSubscriptionsManagement()},navigateToSubscriptionsManagement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.initializeFlowEvents(),m.a.navigateToPaymentServer(this,this._subscriptionsConfig,"subscriptions",e)}});d.a.mixin(V,c.default,u.default,h.default,p.default);t.default=V},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(2),o=n.n(r),s=n(7),a=n(307),c=n.n(a),u=n(3),l=n(95).a.extend({defaults:{uid:null,unblockCode:null},validation:{uid:u.a.uid().required(),unblockCode:u.a.unblockCode().required()}}),d=s.default.extend({className:"report-sign-in",template:c.a,initialize:function(){this._signInToReport=new l(this.getSearchParams())},beforeRender:function(){this._signInToReport.isValid()||this.logError(i.a.toError("DAMAGED_REJECT_UNBLOCK_LINK"))},submit:function(){var e=this,t=this._signInToReport,n=this.user.initAccount({uid:t.get("uid")}),i=t.get("unblockCode");return this.user.rejectAccountUnblockCode(n,i).then(function(){return e.navigate("signin_reported")})},setInitialContext:function(e){var t=!this._signInToReport.isValid(),n=!t,i=this._getSupportLink();e.set({escapedSupportLink:encodeURI(i),hasSupportLink:!!i,isLinkDamaged:t,isLinkValid:n})},_getSupportLink:function(){return o.a.BLOCKED_SIGNIN_SUPPORT_URL}});t.default=d},,function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t);var c=n(1),u=n(11),l=n(4),d=n(116),h=n(276),f=n.n(h),p=n(0),m=n.n(p),g=n(2),v=n.n(g),_=function(e){if(m.a.isString(e)&&/^https?:\/\//.test(e)){var t=encodeURI(e);if(v.a.URL_MAX_LENGTH>=t.length)return t}}("https://support.mozilla.org/kb/password-strength"),y=function(){function e(){var t,n,r,a,c,u,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var d=arguments.length,h=Array(d),p=0;d>p;p++)h[p]=arguments[p];return r=this,n=!(a=(t=o(e)).call.apply(t,[this].concat(h)))||"object"!==i(a)&&"function"!=typeof a?s(r):a,c=s(n),l=f.a,(u="template")in c?Object.defineProperty(c,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):c[u]=l,n}var t,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(e,u["default"]),t=e,(n=[{key:"initialize",value:function(){this.delayBeforeHideMS=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).delayBeforeHideMS||750,this.listenTo(this.model,"change:password",this.update)}},{key:"setInitialContext",value:function(e){var t=this.model.validationError;e.set({escapedCommonPasswordLinkAttrs:'href="'.concat(_,'" target="_blank" tabindex="-1"'),isCommon:t&&c.a.is(t,"PASSWORD_TOO_COMMON"),isSameAsEmail:t&&c.a.is(t,"PASSWORD_SAME_AS_EMAIL"),isTooShort:t&&(c.a.is(t,"PASSWORD_REQUIRED")||c.a.is(t,"PASSWORD_TOO_SHORT"))})}},{key:"afterRender",value:function(){this.model.validationError&&this.show()}},{key:"update",value:function(){var e=this;return this.clearTimeouts(),this.render().then(function(){if(!e.model.validationError)return e.hideAfterDelay()})}},{key:"clearTimeouts",value:function(){this.clearTimeout(this._hideTimeout),this.clearTimeout(this._hideBalloonElTimeout)}},{key:"show",value:function(){this.$(".password-strength-balloon").show().css("opacity","1")}},{key:"hide",value:function(){var e=this.$(".password-strength-balloon");e.css("opacity","0"),this._hideBalloonElTimeout=this.setTimeout(function(){e.hide()},500)}},{key:"hideAfterDelay",value:function(){var e=this;this._hideTimeout=this.setTimeout(function(){e.hide()},this.delayBeforeHideMS)}}])&&r(t.prototype,n),l&&r(t,l),e}();l.a.mixin(y,Object(d.default)({hideMethod:"hide",showMethod:"show",viewType:"tooltip"}));t.default=y},,function(e,t,n){"use strict";var i=n(5),r=n.n(i);t.a={write:function(e,t){r()("#loading-spinner").hide(),r()("#stage").html(t).addClass("fade-in-forward").css("opacity",1),e.scrollTo(0,0),r()("#fox-logo").addClass("fade-in-forward").css("opacity",1)}}},function(e,t,n){"use strict";function i(e){try{return JSON.parse(atob(e))}catch(e){}}function r(e){return btoa(JSON.stringify(e))}var o=n(0),s=n.n(o),a=n(6),c=["deviceId","email","entrypoint","entrypointExperiment","entrypointVariation","flowBegin","flowId","needsOptedInToMarketingEmail","newsletters","planId","productId","resetPasswordConfirm","style","uniqueUserId","utmCampaign","utmContent","utmMedium","utmSource","utmTerm"],u=n.n(a).a.Model.extend({defaults:{utmCampaign:null,utmContent:null,utmMedium:null,utmSource:null,utmTerm:null},initialize:function(e){this.clear();var t=s.a.pick(e,c);this.set(t)},stringify:function(){return r(this.pick(c))}},{ALLOWED_KEYS:c,createFromStringifiedResumeToken:function(e){var t=i(e);return new u(t)},parse:i,stringify:r});t.a=u},function(e,t,n){"use strict";var i,r=n(6),o=n.n(r),s=n(4),a=n(57),c=n(58),u=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;i>n;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},d=/^\/subscriptions\/products\/(\w+)/,h=["planId","productId"],f=function(e){function t(t,n){return void 0===t&&(t={}),e.call(this,l({planId:null,productId:null},t),n)||this}return u(t,e),t.prototype.initialize=function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.get("planId")&&this.get("productId")||(this.window=t.window||window,this.resumeTokenFields=h,this._setSubscriptionInfoFromUrl(),this.get("productId")||this._setSubscriptionInfoFromResumeToken())},t.prototype._setSubscriptionInfoFromUrl=function(){var e=this._getProductIdFromPathname(this.getPathname());if(e){this.set("productId",e);var t=this.getSearchParam("plan");t&&this.set("planId",t)}},t.prototype._getProductIdFromPathname=function(e){var t=d.exec(e);if(t)return t[1]},t.prototype._setSubscriptionInfoFromResumeToken=function(){var e=this.getSearchParam("resume");e&&this.populateFromStringifiedResumeToken(e)},t}(o.a.Model);s.a.mixin(f,a.a,c.a),t.a=f},,function(e,t){"use strict";var n="none";t.a=function(e){var t=e.document.documentElement||{},i=e.screen||{};this.clientHeight=t.clientHeight||n,this.clientWidth=t.clientWidth||n,this.devicePixelRatio=e.devicePixelRatio||n,this.screenHeight=i.height||n,this.screenWidth=i.width||n}},function(e,t,n){"use strict";var i=n(3),r=n(95);t.a=r.a.extend({defaults:{code:null,email:null,token:null},validation:{code:i.a.verificationCode().required(),email:i.a.email().required(),emailToHashWith:i.a.email().optional(),token:i.a.token().required(),uid:i.a.hex().optional()}})},function(e,t,n){"use strict";var i=n(0),r=n.n(i);t.a={load:function(e){return new Promise(function(t,n){var i=new Image;i.onerror=n,i.onload=r.a.partial(t,i),i.src=e})}}},function(e,t,n){"use strict";var i=n(1),r=n(6),o=n.n(r),s=n(2),a=n.n(s),c=o.a.Model.extend({defaults:{height:1,src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAABAAEDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9/KKKKAP/2Q==",type:"image/jpeg",width:1},initialize:function(e){if(e&&(a.a.PROFILE_IMAGE_MIN_HEIGHT>e.width||a.a.PROFILE_IMAGE_MIN_WIDTH>e.height))throw i.a.toError("INVALID_IMAGE_SIZE")}});t.a=c},,function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<aside class="firefox-family-services">\n  <h2>{{#t}}Sign up to get more features:{{/t}}</h2>\n  <ul>\n    <li class="firefox-service">\n      <span class="logo logo-firefox-browser">{{#t}}Firefox browser{{/t}}</span>\n      {{#t}}Sync your bookmarks, passwords, and more on every device.{{/t}}\n    </li>\n    <li class="firefox-service service-lockwise">\n      <span class="logo logo-lockwise">{{#t}}Firefox Lockwise{{/t}}</span>\n      {{#unsafeTranslate}}Securely access passwords saved in Firefox anywhere &mdash; even outside of the browser.{{/unsafeTranslate}}\n    </li>\n    <li class="firefox-service">\n      <span class="logo logo-monitor">{{#t}}Firefox Monitor{{/t}}</span>\n      {{#t}}Get a lookout for data breaches.{{/t}}\n    </li>\n    <li class="firefox-service">\n      <span class="logo logo-send">{{#t}}Firefox Send{{/t}}</span>\n      {{#t}}Send larger files securely and privately.{{/t}}\n    </li>\n  </ul>\n</aside>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('{{#displayName}}\n  <h1 class="card-header">{{displayName}}</h1>\n  <h2 class="card-subheader">{{email}}</h2>\n{{/displayName}}\n{{^displayName}}\n  <h1 class="card-header">{{email}}</h1>\n  <h2 class="card-subheader"></h2>\n{{/displayName}}\n',e,t=t||{})}},function(e,t){"use strict";t.a={FIREFOX_MOBILE_INSTALL:1}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card loading subscriptions-redirect">\n  <section>\n    <div class="spinner"></div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(6),o=n.n(r),s=n(2),a=n.n(s),c=n(92),u=o.a.Model.extend({defaults:{approximateLastAccessTime:null,approximateLastAccessTimeFormatted:null,clientId:null,clientType:null,createdTime:null,createdTimeFormatted:null,deviceId:null,deviceType:null,genericOS:null,id:null,isCurrentSession:!1,isDevice:!1,isOAuthApp:!1,isWebSession:!1,lastAccessTime:null,lastAccessTimeFormatted:null,location:null,name:"Firefox",refreshTokenId:null,scope:null,sessionTokenId:null,userAgent:null},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.a.Model.prototype.initialize.call(this,e,arguments.length>1?arguments[1]:void 0),this.set("id","".concat(e.clientId||"","-").concat(e.deviceId||"","-").concat(e.refreshTokenId||"","-").concat(e.sessionTokenId||"")),this.set("genericOS",c.a.toGenericOSName(e.os)),this.set(e.deviceId?{clientType:a.a.CLIENT_TYPE_DEVICE,isDevice:!0}:e.clientId?{clientType:a.a.CLIENT_TYPE_OAUTH_APP,isOAuthApp:!0}:{clientType:a.a.CLIENT_TYPE_WEB_SESSION,isWebSession:!0})},destroy:function(){this.trigger("destroy",this)}}),l=o.a.Collection.extend({model:function(e,t){return new u(e,t)},fetchClients:function(e){var t=this,n=e.getSignedInAccount();return e.fetchAccountAttachedClients(n).then(function(e){t.reset(e)})},comparator:function(e,t){var n;if(e.get("isCurrentSession"))return-1;if(t.get("isCurrentSession"))return 1;var r=(i(n={},a.a.CLIENT_TYPE_DEVICE,0),i(n,a.a.CLIENT_TYPE_OAUTH_APP,1),i(n,a.a.CLIENT_TYPE_WEB_SESSION,2),n),o=e.get("clientType"),s=t.get("clientType");if(o!==s)return r[o]-r[s];var c=e.get("lastAccessTime"),u=t.get("lastAccessTime");if(c!==u)return u-c;if(c&&!u)return-1;if(!c&&u)return 1;var l=(e.get("name")||"").trim().toLowerCase(),d=(t.get("name")||"").trim().toLowerCase();return d>l?-1:l>d?1:0}});t.a=l},,function(e,t,n){"use strict";var i=n(64),r=n(30);t.a={createJwkFromKey:function(e,t){return Object(i.a)().then(function(n){var i=n.jose;Object(r.a)(e,"key");var o={alg:"A256GCM",k:e,kty:"oct"};return void 0!==t&&(o.kid=t),i.JWK.asKey(o)})},encrypt:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(i.a)().then(function(i){var o=i.jose;Object(r.a)(e,"plaintext"),Object(r.a)(t,"keysJwk");var s={header:{alg:"dir",enc:"A256GCM"},key:t},a={contentAlg:"A256GCM",format:"compact"};return n.unsafeExplicitIV&&(a.iv=o.util.base64url.encode(n.unsafeExplicitIV,"hex")),o.JWE.createEncrypt(a,s).update(e).final()})},decrypt:function(e,t){return Object(i.a)().then(function(n){var i=n.jose;return Object(r.a)(e,"ciphertext"),Object(r.a)(t,"keysJwk"),i.JWE.createDecrypt(t,{algorithms:["dir","A256GCM"]}).decrypt(e).then(function(e){return""+e.plaintext})})}}},,,,,function(e,t,n){"use strict";function i(e){return a.a.find(w,function(t){return t.match(e)})}n.r(t);var r=n(5),o=n.n(r),s=n(0),a=n.n(s),c=n(167),u=n(168),l=n(169),d=n(170),h=n(171),f=n(172),p=n(173),m=n(174),g=n(43),v=n(175),_=n(176),y=n(177),w=[v.default,_.default,f.default,p.default,c.default,u.default,d.default,h.default,y.default,m.default,g.default,l.default];o.a.fn.validate=function(){return this.data("validate")?this.data("validate")():i(this).validate.call(this)},o.a.fn.__val=o.a.fn.val,o.a.fn.val=function(){var e=i(this);return e.val?e.val.apply(this,arguments):o.a.fn.__val.apply(this,arguments)}},,,,,,,,,,,,function(e,t,n){"use strict";var i=n(263),r=n.n(i),o=n(64);t.a={generate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(o.a)().then(function(t){for(var n=t.jose.util.randomBytes(e),i=[],r=0;e>r;r++)i.push("0123456789ABCDEFGHJKMNPQRSTVWXYZ"[31&n[r]]);return i.join("")})},decode:function(e){return Promise.resolve(r()(e,"Crockford"))}}},function(e,t,n){"use strict";var i=n(64),r=n(30);t.a=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32;return Object(i.a)().then(function(i){var s=i.jose;return Object(r.a)(e,"ikmBuffer"),s.JWA.derive("HKDF-SHA-256",e,{info:n,length:o,salt:t})})}},,,,,,,,,,function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-totp-code-header">{{#t}}Enter security code{{/t}}\n        {{#serviceName}}\n            <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n        {{/serviceName}}\n    </h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <div class="graphic graphic-two-factor-auth"></div>\n\n    <p class="verification-totp-message">\n    {{#t}}Open your authentication app and enter the security code it provides.{{/t}}\n    </p>\n\n    <form novalidate>\n      <div class="input-row otp-code-row">\n        <input type="number" pattern="\\d*" class="tooltip-below totp-code" placeholder="{{#t}}Enter 6-digit code{{/t}}" required autofocus />\n      </div>\n\n      <div class="button-row">\n        <button type="submit" class="use-logged-in">{{#t}}Verify{{/t}}</button>\n      </div>\n\n    </form>\n\n    {{^hideTotpAlternatives}}\n    <div class="links">\n      <a class="different-account-link left" href="/signin">{{#t}}Use a different account{{/t}}</a>\n      <a id="use-recovery-code-link" class="right" href="/signin_recovery_code">{{#t}}Trouble entering code?{{/t}}</a>\n    </div>\n    {{/hideTotpAlternatives}}\n\n  </section>\n</div>\n',e,t=t||{})}},,function(e,t,n){"use strict";function i(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=n(0),o=[n(344),n(345),n(346),n(347),n(348),n(349)].map(function(e){return new e}),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._env=t.env,this._experimentGroupingRules=t.experimentGroupingRules||o,this._featureFlags=t.featureFlags}var t,n,s;return t=e,(n=[{key:"choose",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.find(this._experimentGroupingRules,function(t){return t.name===e});if(n){if(!function(e,t){return!t.forceExperiment||function(e,t){return t===e.name||t===e.forceExperimentAllow}(e,t.forceExperiment)}(n,t))return!1;if(function(e,t){return t.forceExperiment&&t.forceExperimentGroup&&t.forceExperiment===e.name}(n,t))return t.forceExperimentGroup;var i=Object.create(t);return i.env=t.env||this._env,i.experimentGroupingRules=this,i.featureFlags=t.featureFlags||this._featureFlags,n.choose(i)}}}])&&i(t.prototype,n),s&&i(t,s),e}();s.EXPERIMENT_NAMES=o.map(function(e){return e.name}),e.exports=s},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-500-header">{{#t}}500 Error{{/t}}</h1>\n  </header>\n\n  <section>\n    {{#t}}Oh dear, something went wrong there. We\'ve been notified and will get working on a fix.{{/t}}\n  </section>\n</div>\n\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-400-header">{{#t}}Bad Request{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error visible">{{message}}</div>\n  </section>\n</div>\n\n',e,t=t||{})}},,function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="loading-template">\n  <div class="error"></div>\n  <div class="spinner"></div>\n</div>\n',e,t=t||{})}},,function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card account-recovery-confirm-key">\n    {{#isLinkExpired}}\n        <header>\n            <h1 id="fxa-reset-link-expired-header">{{#t}}Reset password link expired{{/t}}</h1>\n        </header>\n\n        <section>\n            <div class="error"></div>\n            <div class="success"></div>\n\n            <p>\n                {{#t}}The link you clicked to reset your password is expired.{{/t}}\n            </p>\n\n            <div class="links">\n                <a id="resend" class="resend-email" href="#">{{#t}}Receive new link{{/t}}</a>\n            </div>\n        </section>\n    {{/isLinkExpired}}\n\n    {{^isLinkExpired}}\n        <header>\n            <h1 id="fxa-recovery-key-confirm">\n                {{#serviceName}}\n                    \x3c!-- L10N: For languages structured like English, the second phrase can read "to continue to %(serviceName)s" --\x3e\n                    {{#t}}Reset password with recovery key{{/t}} <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n                {{/serviceName}}\n                {{^serviceName}}\n                    {{#t}}Reset password with recovery key{{/t}}\n                {{/serviceName}}\n            </h1>\n        </header>\n\n        <section id="account-recovery-confirm-password">\n            <div class="error"></div>\n\n            <form novalidate>\n                <p class="description">\n                    {{#t}}Please enter the one time use recovery key you stored in a safe place to regain access to your Firefox Account.{{/t}}\n                </p>\n                <p class="description">\n                    {{#unsafeTranslate}}<span class="note">NOTE:</span> If you reset your password and don\'t have account recovery key saved, some of your data will be erased (including synced server data like history and bookmarks).{{/unsafeTranslate}}\n                </p>\n                <div class="input-row">\n                    <input id="recovery-key" type="text" class="text recovery-key" placeholder="{{#t}}Enter recovery key{{/t}}" value="{{ recoveryKey }}" autofocus  autocomplete="off"/>\n                </div>\n\n                <div class="button-row">\n                    <button id="submit-btn" type="submit" class="primary-button">{{#t}}Confirm recovery key{{/t}}</button>\n                    <button class="button-link lost-recovery-key">{{#t}}Don\'t have a recovery key?{{/t}}</button>\n                </div>\n            </form>\n        </section>\n    {{/isLinkExpired}}\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="account-recovery-section" class="settings-unit {{#isPanelOpen}}open{{/isPanelOpen}} account-recovery-panel">\n    <div class="settings-unit-stub">\n        <header class="settings-unit-summary">\n            <h2 class="settings-unit-title">{{#t}}Account recovery{{/t}}</h2>\n        </header>\n\n        {{^hasRecoveryKey}}\n            <button class="settings-button primary-button settings-unit-toggle" data-href="settings/account_recovery">\n                {{#t}}Enableâ€¦{{/t}}\n            </button>\n        {{/hasRecoveryKey}}\n\n        {{#hasRecoveryKey}}\n            <button class="settings-button secondary-button settings-unit-toggle" data-href="settings/account_recovery">\n                {{#t}}Changeâ€¦{{/t}}\n            </button>\n        {{/hasRecoveryKey}}\n    </div>\n\n\n    <div class="settings-unit-details">\n        <p>{{#t}}Generate a recovery key to regain access to your Firefox bookmarks, passwords, and synced data if you forget your password.{{/t}}</p>\n\n        <div class="list">\n            <ul id="status">\n                <li class="type">\n                    <div class="recovery-key-icon">\n                        <div class="name">{{#t}}Recovery key{{/t}}</div>\n                        <div class="details">\n                            {{#hasRecoveryKey}}\n                                <div class="enabled">{{#t}}Enabled{{/t}}</div>\n                            {{/hasRecoveryKey}}\n                            {{^hasRecoveryKey}}\n                                <div class="disabled">{{#t}}Not set{{/t}}</div>\n                            {{/hasRecoveryKey}}\n                        </div>\n                    </div>\n\n                    <div class="panel-settings-button-group">\n                        {{#hasRecoveryKey}}\n                            <button class="settings-button warning-button confirm-revoke">{{#t}}Revoke{{/t}}</button>\n                        {{/hasRecoveryKey}}\n                        {{^hasRecoveryKey}}\n                            <button class="settings-button primary-button confirm-password">{{#t}}Generate{{/t}}</button>\n                        {{/hasRecoveryKey}}\n                    </div>\n                </li>\n            </ul>\n\n            <p>{{#unsafeTranslate}}<span class="note">NOTE: </span>Your Firefox Account password encrypts your Firefox data. Only your password or recovery key can access your data. <a %(escapedLearnMoreLinkAttributes)s>Learn more</a>{{/unsafeTranslate}}</p>\n\n            <div class="button-row">\n                <button class="settings-button primary-button refresh-status">{{#t}}Refresh status{{/t}}</button>\n                <button class="settings-button cancel secondary-button enabled">{{#t}}Done{{/t}}</button>\n            </div>\n        </div>\n    </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="upgrade-session" class="settings-unit {{#isPanelOpen}}open{{/isPanelOpen}}">\n    <div class="settings-unit-stub">\n        <header class="settings-unit-summary">\n            <h2 class="settings-unit-title">{{ title }}</h2>\n        </header>\n        <button class="settings-button settings-unit-toggle secondary-button" data-href="{{ gatedHref }}">\n            <span class="unlock-button">{{#t}}Show{{/t}}</span>\n        </button>\n    </div>\n\n    <div class="settings-unit-details">\n        <div class="error"></div>\n\n        <form novalidate>\n            <p>\n                <span class="note">\n                    {{#t}}NOTE:{{/t}}\n                </span>\n                {{#t}}Before you can view or make changes to this section, you will need to verify your email address.{{/t}}\n            </p>\n            <ul class="email-list button-row">\n                <li class="email-address">\n                    <div class="address">{{ email }}</div>\n                    <div class="details">\n                        <div>{{#t}}Primary email{{/t}}</div>\n                    </div>\n                </li>\n                {{#emailSent }}\n                    <a class="resend" data-id="{{ email }}">{{#t}}Not in inbox or spam folder? Resend{{/t}}</a>\n                {{/emailSent }}\n            </ul>\n            {{#emailSent }}\n                <div class="button-row email-sent-options">\n                    <button type="submit" class="settings-button primary-button refresh-verification-state"\n                            data-id="{{ email }}"\n                            title="{{ lastCheckedTime }}">{{#t}}Refresh status{{/t}}</button>\n                    <button class="settings-button secondary-button cancel">{{#t}}Done{{/t}}</button>\n                </div>\n            {{/emailSent }}\n\n            {{^emailSent }}\n                <div class="button-row">\n                    <button type="submit" class="settings-button primary-button send-verification-email"\n                            data-id="{{ email }}">{{#t}}Verify{{/t}}</button>\n                    <button class="settings-button secondary-button cancel">{{#t}}Cancel{{/t}}</button>\n                </div>\n            {{/emailSent}}\n        </form>\n    </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<input id="{{ id }}" type="checkbox" class="show-password" aria-controls="{{ targetId }}" tabindex="-1" data-novalue data-synchronize-show="{{ synchronizeShow }}"/>\n<label for="{{ id }}" class="show-password-label" title="{{#t}}Show password{{/t}}">{{#t}}Show password{{/t}}</label>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="account-recovery-confirm-password">\n    <section class="modal-panel">\n        <div class="error"></div>\n\n        <h2>{{#t}}Step 1 of 2: Re-enter password{{/t}}</h2>\n\n        <form novalidate>\n            <p class="description">\n                {{#t}}Enter your password to view your recovery key.{{/t}}\n            </p>\n\n            <div class="email">{{email}}</div>\n            <input type="email" class="email hidden" value="{{email}}" disabled />\n            <div class="input-row password-row">\n                <input type="password" class="password tooltip-below" id="password" placeholder="{{#t}}Enter Password{{/t}}" required pattern=".{8,}" autofocus/>\n            </div>\n\n            <div class="button-row">\n                <button class="primary-button generate-key-link">{{#t}}Continue{{/t}}</button>\n                <button class="button-link cancel-link">{{#t}}Cancel{{/t}}</button>\n            </div>\n        </form>\n    </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="account-recovery-confirm-revoke">\n    <section class="modal-panel">\n        <div class="error"></div>\n\n        <form novalidate>\n            <h3>{{#t}}Are you sure you want to revoke?{{/t}}</h3>\n            <p class="revoke-description">{{#t}}You will be unable to use your recovery key to access your data in the event you reset your password.{{/t}}</p>\n\n            <div class="button-row">\n                <button action="submit" class="settings-button warning-button revoke">{{#t}}Revoke{{/t}}</button>\n                <button class="settings-button secondary-button cancel-button">{{#t}}Cancel{{/t}}</button>\n            </div>\n        </form>\n    </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render("<html>\n<head><title></title>\n</head>\n<body>\n    <p>{{recoveryKey}}</p>\n</body>\n</html>\n",e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="account-recovery-key">\n    <section class="modal-panel">\n        <p class="modal-success"></p>\n        <div class="error"></div>\n\n        <h2>{{#t}}Step 2 of 2: Save Recovery key{{/t}}</h2>\n\n        <p class="description">{{#unsafeTranslate}}<span class="note">NOTE: </span>If you forget your password, this key is required to regain access to your data. Save your recovery key in a safe location, where you can find it easily later.{{/unsafeTranslate}}</p>\n\n        <div class="recovery-key-container">\n            <div class="recovery-key">{{recoveryKey}}</div>\n        </div>\n\n        {{^isIos}}\n            <div class="button-row save-options">\n                <a href="#" class="save-option download-option">\n                    <div class="graphic graphic-download-option"></div>\n                    <p class="name">{{#t}}Download{{/t}}</p>\n                </a>\n                <a href="#" class="save-option copy-option">\n                    <div class="graphic graphic-copy-option"></div>\n                    <p class="name">{{#t}}Copy{{/t}}</p>\n                </a>\n                <a href="#" class="save-option print-option">\n                    <div class="graphic graphic-print-option"></div>\n                    <p class="name">{{#t}}Print{{/t}}</p>\n                </a>\n            </div>\n        {{/isIos}}\n\n        {{#isIos}}\n            <div class="button-row">\n                <a href="#" class="save-option copy-option">\n                    <div class="graphic graphic-copy-option"></div>\n                    <p class="name">{{#t}}Copy{{/t}}</p>\n                </a>\n            </div>\n        {{/isIos}}\n\n        <div class="button-row">\n            <button class="primary-button done-link">{{#t}}Done, Recovery key saved{{/t}}</button>\n        </div>\n    </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="avatar-camera">\n  <section class="modal-panel">\n    <div class="avatar-wrapper">\n      <div class="progress-container">\n      </div>\n      <div id="avatar-camera-wrapper">\n        <video id="video" class="hidden"></video>\n      </div>\n    </div>\n\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <canvas id="canvas"></canvas>\n\n    <form novalidate>\n      <div class="button-row">\n        <button type="submit" id="submit-btn" class="settings-button primary-button">{{#t}}Take picture{{/t}}</button>\n        <button class="settings-button secondary-button" id="back">{{#t}}Cancel{{/t}}</button>\n      </div>\n    </form>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="avatar-change">\n  <section class="modal-panel">\n    <div class="main-avatar">\n      <div id="loading-avatar-spinner"></div>\n      <p id="image-holder" class="avatar-wrapper"></p>\n    </div>\n\n    <div class="error"></div>\n\n    <nav id="avatar-options">\n      <input type="file" id="imageLoader" name="imageLoader" accept="image/png, image/jpeg"/>\n      <a href="#" id="file">{{#t}}Upload{{/t}}</a>\n      <a href="/settings/avatar/camera" id="camera">{{#t}}Camera{{/t}}</a>\n      {{^avatarDefault}}\n      <a href="#" class="remove">{{#t}}Clear{{/t}}</a>\n      {{/avatarDefault}}\n    </nav>\n\n    <div class="button-row">\n      <button id="done" class="settings-button secondary-button cancel">{{#t}}Done{{/t}}</button>\n    </div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="avatar-crop">\n  <section class="modal-panel">\n    <div class="error"></div>\n\n    <div class="cropper">\n      <div class="wrapper">\n        <div class="mask"></div>\n        <div class="drag-overlay"></div>\n        <img src="" class="avatar" alt="{{#t}}Avatar{{/t}}" />\n      </div>\n\n      <p class="notice">{{#t}}Position and rotate your picture as needed{{/t}}</p>\n\n      <div class="controls">\n        <button class="zoom-out icon-zoom-out"></button>\n        <input class="slider" type="range" min="0" max="100" step="1" value="0" />\n        <button class="zoom-in icon-zoom-in"></button>\n        <button class="rotate icon-cw"></button>\n      </div>\n\n      <canvas id="imageCanvas"></canvas>\n    </div>\n\n    <form novalidate>\n      <div class="button-row">\n        <button type="submit" id="submit-btn" class="settings-button primary-button">{{#t}}Change{{/t}}</button>\n        <button class="settings-button secondary-button" id="back">{{#t}}Cancel{{/t}}</button>\n      </div>\n    </form>\n\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-cannot-create-account-header">{{#t}}Cannot create account{{/t}}</h1>\n  </header>\n\n  <section class="cannot-create-account-content">\n    <p>\n      {{#unsafeTranslate}}You must meet certain age requirements to create a Firefox&nbsp;Account.{{/unsafeTranslate}}\n    </p>\n    <p class="links">\n      <a class="ftc" href="https://www.ftc.gov/tips-advice/business-center/privacy-and-security/children%27s-privacy" {{#isSync}} target="_blank"{{/isSync}}>{{#t}}Learn more{{/t}}</a>\n    </p>\n\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<aside id="password-strength-balloon" class="input-help input-help-balloon password-strength-balloon">\n  <ul>\n    <li class="lock big-only">{{#unsafeTranslate}}Stay safe &mdash; don\'t reuse passwords.{{/unsafeTranslate}}</li>\n    <br class="big-only">\n    <li id="password-too-short"\n      {{^hasUserTakenAction}}class="min-length unmet"{{/hasUserTakenAction}}\n      {{#isTooShort}}class="min-length fail"{{/isTooShort}}\n      {{^isTooShort}}class="min-length met"{{/isTooShort}}\n    >{{#t}}Must be at least 8 characters{{/t}}</li>\n    <li id="password-same-as-email"\n      {{^hasUserTakenAction}}class="not-email unmet"{{/hasUserTakenAction}}\n      {{#isTooShort}}class="not-email unmet"{{/isTooShort}}\n      {{#isSameAsEmail}}class="not-email fail"{{/isSameAsEmail}}\n      {{^isSameAsEmail}}class="not-email met"{{/isSameAsEmail}}\n    >{{#t}}Must not be your email address{{/t}}</li>\n    <li id="password-too-common"\n      {{^hasUserTakenAction}}class="not-common unmet"{{/hasUserTakenAction}}\n      {{#isTooShort}}class="not-common unmet"{{/isTooShort}}\n      {{#isSameAsEmail}}class="not-common unmet"{{/isSameAsEmail}}\n      {{#isCommon}}class="not-common fail"{{/isCommon}}\n      {{^isCommon}}class="not-common met"{{/isCommon}}\n      >{{#unsafeTranslate}}Must not match this <a %(escapedCommonPasswordLinkAttrs)s>list of common passwords</a>{{/unsafeTranslate}}</li>\n  </ul>\n</aside>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card choose-what-to-sync">\n  <div class="error"></div>\n  <div class="graphic graphic-choose-what-to-sync"></div>\n\n  <section>\n    <form id="choose-what-to-sync" novalidate>\n      <header>\n        <h1 id="fxa-choose-what-to-sync-header">\n          {{#t}}Sync these everywhere you sign in:{{/t}}\n        </h1>\n      </header>\n      <div class="two-col-items">\n        {{#engines}}\n          <div class="input-row choose-what-to-sync-row">\n            <input name="sync-content" id="sync-engine-{{id}}" type="checkbox" class="customize-sync" {{#checked}}checked="checked"{{/checked}} value="{{id}}" tabindex="{{tabindex}}" /><label class="fxa-checkbox__label" for="sync-engine-{{id}}">{{text}}</label>\n          </div>\n        {{/engines}}\n      </div>\n      <div class="button-row">\n        <button id="submit-btn" type="submit" tabindex="1" autofocus>{{#t}}Sync selections{{/t}}</button>\n      </div>\n      {{#showDoNotSyncButton}}\n        <div class="links centered">\n          <a id="do-not-sync-device" href="#" class="button-link">{{#t}}Donâ€™t sync this device{{/t}}</a>\n        </div>\n      {{/showDoNotSyncButton}}\n    </form>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    \x3c!-- this is only shown for selenium tests \n         and does not need to be localized --\x3e\n    <h1 id="fxa-clear-storage-header">Browser storage is cleared</h1>\n  </header>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="client-disconnect">\n  <section class="modal-panel">\n    {{^hasDisconnected}}\n      <h2>{{#t}}Disconnect from Sync{{/t}}</h2>\n      <div class="error"></div>\n\n      <p class="intro">\n      {{#t}}Your browsing data will remain on %(deviceName)s, but it will no longer sync with your account.{{/t}}\n      </p>\n\n      <form novalidate>\n        <div role="radiogroup" aria-labelledby="radio-header">\n          <h3 id="radio-header" class="radio-header">{{#t}}You are disconnecting %(deviceName)s from Sync because this device is:{{/t}}</h3>\n          <p class="disconnect-reasons fxa-radio">\n            <label>\n              <input type="radio" name="disconnect-reasons" value="suspicious"/>\n              {{#t}}Suspicious{{/t}}\n            </label>\n            <label>\n              <input type="radio" name="disconnect-reasons" value="lost"/>\n              {{#t}}Lost or stolen{{/t}}\n            </label>\n            <label>\n              <input type="radio" name="disconnect-reasons" value="old"/>\n              {{#t}}Old or replaced{{/t}}\n            </label>\n            <label>\n              <input type="radio" name="disconnect-reasons" value="duplicate"/>\n              {{#t}}Duplicate{{/t}}\n            </label>\n            <label>\n              <input type="radio" name="disconnect-reasons" value="no" checked="checked"/>\n              {{#t}}Rather not say{{/t}}\n            </label>\n          </p>\n\n        <div class="button-row">\n          <button type="submit" id="submit-btn" class="settings-button warning-button">{{#t}}Disconnect{{/t}}</button>\n          <button class="settings-button secondary-button cancel-disconnect">{{#t}}Cancel{{/t}}</button>\n        </div>\n      </form>\n\n    {{/hasDisconnected}}\n    {{#hasDisconnected}}\n      <h2>{{#t}}Disconnection Successful{{/t}}</h2>\n      <p class=\'reason-help\'>\n      {{reasonHelp}}\n      </p>\n      <div class="button-row">\n        <button id="submit-btn" type="submit">{{#t}}Got it{{/t}}</button>\n      </div>\n    {{/hasDisconnected}}\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="clients" class="settings-unit {{#isPanelOpen}}open{{/isPanelOpen}}">\n  <div class="settings-unit-stub">\n    <header class="settings-unit-summary">\n      <h2 class="settings-unit-title">{{#t}}Devices & apps{{/t}}</h2>\n    </header>\n    <button class="settings-button secondary-button settings-unit-loading" disabled>\n      <div class="spinner spinner-settings-fetch"></div>\n    </button>\n    <button class="settings-button secondary-button settings-unit-toggle" data-href="settings/clients">\n      {{#t}}Show{{/t}}\n    </button>\n  </div>\n\n  <div class="settings-unit-details">\n    <div class="error"></div>\n\n    <form novalidate class="client-list-form">\n      <ul class="client-list button-row">\n        {{#clients}}\n\n            {{#isDevice}}\n              <li class="client {{deviceType}} client-device {{#isCurrentSession}}client-current{{/isCurrentSession}}"\n                {{#genericOS}}data-os="{{genericOS}}"{{/genericOS}}\n                data-name="{{name}}"\n                title="{{title}}"\n                id="{{id}}">\n                <div class="client-name">{{name}}</div>\n                {{#isCurrentSession}}\n                    <div class="device-current">{{#t}}Current device{{/t}}</div>\n                {{/isCurrentSession}}\n                {{^isCurrentSession}}\n                    <div class="last-connected">{{lastAccessTimeFormatted}}</div>\n                {{/isCurrentSession}}\n                <button class="settings-button warning-button client-disconnect" data-id="{{id}}" data-type="{{clientType}}">{{#t}}Disconnectâ€¦{{/t}}</button>\n              </li>\n            {{/isDevice}}\n\n            {{#isWebSession}}\n                <li class="client {{deviceType}} client-webSession"\n                    {{#genericOS}}data-os="{{genericOS}}"{{/genericOS}}\n                    data-name="{{name}}"\n                    id="{{id}}">\n                    <div class="client-name" title="{{title}}">{{title}}</div>\n                  {{#isCurrentSession}}\n                    <div class="device-current">{{#t}}Current session{{/t}}</div>\n                  {{/isCurrentSession}}\n                  {{^isCurrentSession}}\n                    <div class="last-connected">{{lastAccessTimeFormatted}}</div>\n                  {{/isCurrentSession}}\n                    <button class="settings-button warning-button client-disconnect" data-id="{{id}}" data-type="{{clientType}}">{{#t}}Disconnect{{/t}}</button>\n                </li>\n            {{/isWebSession}}\n\n            {{#isOAuthApp}}\n                <li class="client {{deviceType}} client-oAuthApp" data-name="{{name}}" id="{{id}}">\n                  <div class="client-name" title="{{title}}">{{name}}</div>\n                    <div class="last-connected">{{userAgent}} {{lastAccessTimeFormatted}}</div>\n                  <button class="settings-button warning-button client-disconnect" data-id="{{id}}" data-type="{{clientType}}">{{#t}}Revoke{{/t}}</button>\n                </li>\n            {{/isOAuthApp}}\n\n        {{/clients}}\n        {{#showMobileApps}}\n          <li class="client mobile" data-os="iOS">\n            <div class="client-name">{{#t}}Firefox for iOS{{/t}}</div>\n            <div class="last-connected">{{#t}}None connected{{/t}}</div>\n            <a target="_blank" href="{{ linkIOS }}" class="button settings-button secondary-button" data-get-app="ios">{{#t}}Download{{/t}}</a>\n          </li>\n          <li class="client mobile" data-os="Android">\n            <div class="client-name">{{#t}}Firefox for Android{{/t}}</div>\n            <div class="last-connected">{{#t}}None connected{{/t}}</div>\n            <a target="_blank" href="{{ linkAndroid }}" class="button settings-button secondary-button" data-get-app="android">{{#t}}Download{{/t}}</a>\n          </li>\n        {{/showMobileApps}}\n        <a href="{{devicesSupportUrl}}" target="_blank" class="device-support">{{#t}}Missing or duplicate items?{{/t}}</a>\n      </ul>\n\n      <div class="button-row">\n        <button type="submit" class="settings-button primary-button clients-refresh">{{#t}}Refresh status{{/t}}</button>\n        <button class="settings-button secondary-button cancel clients-done">{{#t}}Done{{/t}}</button>\n      </div>\n    </form>\n  </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="communication-preferences" class="settings-unit">\n    <div class="settings-unit-stub">\n        <header class="settings-unit-summary">\n            <h2 class="settings-unit-title">\n                <a class="open-email-preferences" href="{{{ escapedEmailPreferencesLink }}}" target="_blank" data-flow-event="link.email-preferences">{{#t}}Email preferences{{/t}}</a>\n            </h2>\n        </header>\n    </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card account-recovery-create-password">\n  {{#isLinkExpired}}\n  <header>\n    <h1 id="fxa-reset-link-expired-header">{{#t}}Reset password link expired{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <p>\n      {{#t}}The link you clicked to reset your password is expired.{{/t}}\n    </p>\n\n    <div class="links">\n      <a id="resend" class="resend-email" href="#">{{#t}}Receive new link{{/t}}</a>\n    </div>\n  </section>\n  {{/isLinkExpired}}\n\n  {{#isLinkDamaged}}\n  <header>\n    <h1 id="fxa-reset-link-damaged-header">{{#t}}Reset password link damaged{{/t}}</h1>\n  </header>\n\n  <section>\n    <p>\n      {{#t}}The link you clicked was missing characters, and may have been broken by your email client. Copy the address carefully, and try again.{{/t}}\n    </p>\n  </section>\n  {{/isLinkDamaged}}\n\n  {{#isLinkValid}}\n  <header>\n    <h1 id="fxa-complete-reset-password-header">{{#t}}Create new password{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n\n    <form novalidate>\n        {{#showSyncWarning}}\n            <p class="reset-warning">\n                {{#unsafeTranslate}}<span>REMEMBER:</span> When you reset your password, you reset your account. You may lose some of your personal information (including history, bookmarks, and passwords). Thatâ€™s because we encrypt your data with your password to protect your privacy.{{/unsafeTranslate}}\n            </p>\n        {{/showSyncWarning}}\n\n        {{#showAccountRecoveryInfo}}\n            <p class="description">\n                {{#t}}You have successfully restored your account using your recovery key. Create a new password to secure your data, and store it in a safe location.{{/t}}\n            </p>\n        {{/showAccountRecoveryInfo}}\n\n      \x3c!-- hidden email field is to allow Fx password manager\n           to correctly save the updated password. Without it,\n           the password manager tries to save the old password\n           as the username. --\x3e\n      <input type="email" value="{{email}}" class="hidden" />\n\n      <div class="input-row password-row">\n        <input type="password" class="password check-password tooltip-below" id="password" placeholder="{{#t}}New password{{/t}}" pattern=".{8,}" required autofocus data-synchronize-show="true"/>\n        <div class="helper-balloon" tabindex="-1"></div>\n      </div>\n\n\n      <div class="input-row password-row">\n        <input type="password" class="password tooltip-below" id="vpassword" placeholder="{{#t}}Re-enter password{{/t}}" required pattern=".{8,}" data-synchronize-show="true"/>\n      </div>\n\n      <div class="button-row ">\n          <button type="submit" class="{{^showAccountRecoveryInfo}}warning-button{{/showAccountRecoveryInfo}} {{#showAccountRecoveryInfo}}primary-button{{/showAccountRecoveryInfo}}">{{#t}}Reset password{{/t}}</button>\n          <button class="button-link remember-password">{{#t}}Remember password? Sign in{{/t}}</button>\n      </div>\n    </form>\n  </section>\n  {{/isLinkValid}}\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  {{#isLinkUsed}}\n  <header>\n      <h1 id="fxa-verification-link-reused-header">\n          {{#isPrimaryEmailVerification}}{{#t}}Primary email already confirmed{{/t}}{{/isPrimaryEmailVerification}}\n          {{^isPrimaryEmailVerification}}{{#t}}Sign-in already confirmed{{/t}}{{/isPrimaryEmailVerification}}\n      </h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <p>\n      {{#t}}That confirmation link was already used, and can only be used once.{{/t}}\n    </p>\n\n  </section>\n  {{/isLinkUsed}}\n\n  {{#isLinkExpired}}\n  <header>\n    <h1 id="fxa-verification-link-expired-header">{{#t}}Verification link expired{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <p>\n      {{#t}}The link you clicked to verify your email is expired.{{/t}}\n    </p>\n\n    {{#canResend}}\n    <div class="links">\n      <a id="resend" class="resend-email" href="#">{{#t}}Click here to receive a new verification link{{/t}}</a>\n    </div>\n    {{/canResend}}\n  </section>\n  {{/isLinkExpired}}\n\n  {{#isLinkDamaged}}\n  <header>\n    <h1 id="fxa-verification-link-damaged-header">{{#t}}Verification link damaged{{/t}}</h1>\n  </header>\n\n  <section>\n    <p>\n      {{#t}}The link you clicked was missing characters, and may have been broken by your email client. Copy the address carefully, and try again.{{/t}}\n    </p>\n  </section>\n  {{/isLinkDamaged}}\n\n  {{#error}}\n  <header>\n    <h1 id="fxa-verification-error-header">{{#t}}Verification error{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n  </section>\n  {{/error}}\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-confirm-reset-password-header">{{#t}}Reset email sent{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <div class="graphic graphic-mail"></div>\n\n    <p class="verification-email-message">{{#t}}Click the link emailed to %(email)s within the next hour to create a new password.{{/t}}</p>\n\n    {{#isOpenWebmailButtonVisible}}\n      <div class="button-row">\n        <a href="{{{ escapedWebmailLink }}}" data-webmail-type="{{webmailType}}" class="button" target="_blank" id="open-webmail" type="button">{{webmailButtonText}}</a>\n      </div>\n    {{/isOpenWebmailButtonVisible}}\n\n    <div class="links centered">\n      <a id="resend" class="resend-email" href="#">{{#t}}Not in inbox or spam folder? Resend{{/t}}</a>\n\n      {{#isSignInEnabled}}\n        {{#forceAuth}}\n          <a href="/force_auth?email={{ encodedEmail }}" class="sign-in">{{#t}}Remember password? Sign in{{/t}}</a>\n        {{/forceAuth}}\n\n        {{^forceAuth}}\n          <a href="/signin" class="sign-in">{{#t}}Remember password? Sign in{{/t}}</a>\n        {{/forceAuth}}\n      {{/isSignInEnabled}}\n    </div>\n\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card confirm-{{#isSignUp}}signup{{/isSignUp}}{{#isSignIn}}signin{{/isSignIn}}">\n  <header>\n    {{#isSignUp}}\n        <h1 id="fxa-confirm-header">{{#t}}Confirm your account{{/t}}</h1>\n      {{/isSignUp}}\n    {{#isSignIn}}\n    <h1 id="fxa-confirm-signin-header">{{#t}}Confirm this sign-in{{/t}}</h1>\n    {{/isSignIn}}\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <div class="graphic graphic-mail"></div>\n\n    {{#isSignUp}}\n      <p class="verification-email-message">{{#unsafeTranslate}}Check your email for the verification link sent&nbsp;to %(escapedEmail)s{{/unsafeTranslate}}</p>\n    {{/isSignUp}}\n    {{#isSignIn}}\n    <p class="verification-email-message">{{#unsafeTranslate}}Check your email for the sign-in confirmation link sent to %(escapedEmail)s{{/unsafeTranslate}}</p>\n    {{/isSignIn}}\n\n    {{#isOpenWebmailButtonVisible}}\n      <div class="button-row">\n        <a href="{{{ escapedWebmailLink }}}" data-webmail-type="{{webmailType}}" class="button primary-button" target="_blank" id="open-webmail" type="button">{{webmailButtonText}}</a>\n      </div>\n    {{/isOpenWebmailButtonVisible}}\n\n    <div class="links">\n      {{^canGoBack}}\n        <a id="resend" class="delayed-fadein" href="#">{{#t}}Not in inbox or spam folder? Resend{{/t}}</a>\n      {{/canGoBack}}\n      {{#canGoBack}}\n        <a id="resend" class="left delayed-fadein" href="#">{{#t}}Not in inbox or spam folder? Resend{{/t}}</a>\n        <a id="back" class="right delayed-fadein" href="#">{{#t}}Back{{/t}}</a>\n      {{/canGoBack}}\n    </div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card confirm-signup">\n    <header>\n        <h1 id="fxa-confirm-signup-code-header">\n            {{#serviceName}}\n                \x3c!-- L10N: For languages structured like English, the second phrase can read "to continue to %(serviceName)s" --\x3e\n                {{#t}}Enter verification code{{/t}} <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n            {{/serviceName}}\n            {{^serviceName}}\n                {{#t}}Enter verification code{{/t}}\n            {{/serviceName}}\n        </h1>\n    </header>\n\n    <section>\n        <div class="error"></div>\n        <div class="success"></div>\n\n        <div class="graphic graphic-mail"></div>\n\n        <p class="verification-email-message">{{#unsafeTranslate}}Please enter the verification code that was sent to %(escapedEmail)s within 5 minutes.{{/unsafeTranslate}}</p>\n        <form novalidate>\n            <div class="input-row">\n                \x3c!-- Using `type="text" inputmode="numeric"` shows the numericpad on mobile and strips out whitespace on desktop. --\x3e\n                <input type="text" inputmode="numeric" pattern="\\d[ ]*" class="tooltip-below otp-code" placeholder="{{#t}}Enter 6-digit code{{/t}}" required autofocus />\n            </div>\n            <div class="button-row">\n                <button id="submit-btn" type="submit">{{#t}}Verify{{/t}}</button>\n            </div>\n            <div class="links">\n                <a id="resend" class="left delayed-fadein" href="#">{{#t}}Need another code? Resend{{/t}}</a>\n            </div>\n        </form>\n    </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('{{#showSignUpMarketing}}\n  {{#isSpring2015}}\n    <aside class="marketing-ios">\n      {{#isIos}}\n        <p>\n          {{#t}}Get the full Sync experience.{{/t}}\n          <br>\n          {{#t}}Download Firefox for iOS!{{/t}}\n        </p>\n        <a target="_blank" class="marketing-link marketing-link-ios" href="{{ downloadLinkIos }}" data-flow-event="link.app-store.ios" data-marketing-id="{{ marketingId }}" data-marketing-type="ios"><img width="152" height="53" src="{{ appStoreImage }}" alt="{{#t}}Download Firefox for iOS!{{/t}}" /></a>\n      {{/isIos}}\n\n      {{#isAndroid}}\n        <p>\n          {{#t}}Get the full Sync experience.{{/t}}\n          <br>\n          {{#t}}Download Firefox for Android.{{/t}}\n        </p>\n        <a target="_blank" class="marketing-link marketing-link-android" href="{{ downloadLinkAndroid }}" data-flow-event="link.app-store.android" data-marketing-id="{{ marketingId }}" data-marketing-type="android"><img width="152" height="45" src="{{ playStoreImage }}" alt="{{#t}}Download Firefox for Android.{{/t}}"></a>\n      {{/isAndroid}}\n\n      {{#isOther}}\n        <div class="os-general">\n          <p>\n            {{#t}}Get the full Sync experience.{{/t}}\n            <br>\n            <span class="download-firefox-mobile">{{#t}}Download Firefox for mobile devices.{{/t}}</span>\n          </p>\n\n          <ul>\n            <li>\n              <a target="_blank" class="marketing-link marketing-link-ios" href="{{ downloadLinkIos }}" data-flow-event="link.app-store.ios" data-marketing-id="{{ marketingId }}" data-marketing-type="ios"><img width="152" height="45" src="{{ appStoreImage }}" alt="{{#t}}Download Firefox for iOS!{{/t}}" /></a>\n            </li>\n            <li>\n              <a target="_blank" class="marketing-link marketing-link-android" href="{{ downloadLinkAndroid }}" data-flow-event="link.app-store.android" data-marketing-id="{{ marketingId }}" data-marketing-type="android"><img width="152" height="45"  src="{{ playStoreImage }}" alt="{{#t}}Download Firefox for Android.{{/t}}" /></a>\n            </li>\n          </ul>\n        </div>\n      {{/isOther}}\n    </aside>\n  {{/isSpring2015}}\n  {{#isAutumn2016}}\n    {{#isIos}}\n      <a target="_blank" class="marketing-link marketing-link-ios" href="{{ downloadLinkIos }}" data-flow-event="link.app-store.ios" data-marketing-id="{{ marketingId }}" data-marketing-type="ios"><img width="152" height="53" src="{{ appStoreImage }}" alt="{{#t}}Download Firefox for iOS!{{/t}}" /></a>\n    {{/isIos}}\n\n    {{#isAndroid}}\n      <a target="_blank" class="marketing-link marketing-link-android" href="{{ downloadLinkAndroid }}" data-flow-event="link.app-store.android" data-marketing-id="{{ marketingId }}" data-marketing-type="android"><img width="152" height="45" src="{{ playStoreImage }}" alt="{{#t}}Download Firefox for Android.{{/t}}" /></a>\n    {{/isAndroid}}\n\n    {{#isOther}}\n      <div class="links clearfix">\n        <a target="_blank" class="marketing-link marketing-link-ios left" href="{{ downloadLinkIos }}" data-flow-event="link.app-store.ios" data-marketing-id="{{ marketingId }}" data-marketing-type="ios"><img width="152" height="45" src="{{ appStoreImage }}" alt="{{#t}}Download Firefox for iOS!{{/t}}" /></a>\n        <a target="_blank" class="marketing-link marketing-link-android right" href="{{ downloadLinkAndroid }}" data-flow-event="link.app-store.android" data-marketing-id="{{ marketingId }}" data-marketing-type="android"><img width="152" height="45"  src="{{ playStoreImage }}" alt="{{#t}}Download Firefox for Android.{{/t}}" /></a>\n      </div>\n    {{/isOther}}\n  {{/isAutumn2016}}\n{{/showSignUpMarketing}}\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header class="hidden" id="fxa-connect-another-device-header"><h1>{{#t}}Connect another device{{/t}}</h1></header>\n  {{#showSuccessMessage}}\n    {{#isSignedIn}}\n      <div class="success success-authenticated visible">{{#t}}This Firefox is connected{{/t}}</div>\n    {{/isSignedIn}}\n    {{^isSignedIn}}\n      {{#isSignUp}}\n        <div class="success success-not-authenticated visible">{{#t}}Email verified{{/t}}</div>\n      {{/isSignUp}}\n      {{#isSignIn}}\n        <div class="success success-not-authenticated visible">{{#t}}Sign-in confirmed{{/t}}</div>\n      {{/isSignIn}}\n    {{/isSignedIn}}\n  {{/showSuccessMessage}}\n  <section>\n    <div class="graphic {{graphicId}}">{{#t}}Success{{/t}}</div>\n\n    {{#canSignIn}}\n      <p>\n        {{#t}}Sign in to this Firefox to complete set-up{{/t}}\n      </p>\n\n      <form novalidate>\n        <div class="button-row">\n          <a data-flow-event="link.signin" id="signin" class="button primary-button" href="{{{ escapedSignInUrl }}}">{{#t}}Sign in{{/t}}</a>\n        </div>\n      </form>\n    {{/canSignIn}}\n    {{^canSignIn}}\n      {{#isFirefoxAndroid}}\n        \x3c!-- User verified in Fx for Android - they are using an old Fennec\n        or are already signed in. Ignore old browsers, assume already signed in.\n        Encourage installation on another device. --\x3e\n        <p id="connect-other-firefox-from-android">\n          {{#isSignIn}}\n            {{#t}}Still adding devices?{{/t}}\n          {{/isSignIn}}\n          {{#t}}Sign in to Firefox on another device to complete set-up{{/t}}\n        </p>\n      {{/isFirefoxAndroid}}\n      {{#isFirefoxDesktop}}\n        <p id="install-mobile-firefox-desktop">\n          {{#isSignIn}}\n            {{#t}}Still adding devices?{{/t}}\n          {{/isSignIn}}\n          {{#t}}Sign in to Firefox on another device to complete set-up{{/t}}\n        </p>\n      {{/isFirefoxDesktop}}\n      {{#isFirefoxIos}}\n        \x3c!-- user verifies in Fx for iOS, assume they are not signed in --\x3e\n        <p id="signin-fxios">\n          {{#t}}Still adding devices? Sign in to Firefox on another device to complete set-up{{/t}}\n        </p>\n      {{/isFirefoxIos}}\n      {{#isOtherAndroid}}\n        \x3c!-- Another android browser, encourage Fx for Android installation --\x3e\n        <p id="install-mobile-firefox-android">\n          {{#t}}Sign in to Firefox for Android to complete set-up{{/t}}\n        </p>\n      {{/isOtherAndroid}}\n      {{#isOtherIos}}\n        \x3c!-- Safari or Chrome for iOS, encourage installation of Fx --\x3e\n        <p id="install-mobile-firefox-ios">\n          {{#t}}Sign in to Firefox for iOS to complete set-up{{/t}}\n        </p>\n      {{/isOtherIos}}\n      {{#isOther}}\n        \x3c!-- probably some desktop browser --\x3e\n        <p id="install-mobile-firefox-other">\n          {{#isSignIn}}\n            {{#t}}Still adding devices?{{/t}}\n          {{/isSignIn}}\n          {{#t}}Sign in to Firefox on another device to complete set-up{{/t}}\n        </p>\n      {{/isOther}}\n\n        <div class="marketing-area"></div>\n    {{/canSignIn}}\n    <div class="links">\n      <a data-flow-event="link.why" href="/connect_another_device/why">{{#t}}Why is more than one device required?{{/t}}</a>\n    </div>\n    <aside class="child-view"></aside>\n  </section>\n\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-cookies-disabled-header">{{#t}}Cookies and local storage are required{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n\n    <p id="fxa-cookies-disabled">\n      {{#t}}Please enable cookies and local storage in your browser to access Firefox Accounts. Doing so will enable functionality such as remembering you between sessions.{{/t}}\n    </p>\n\n    <p class="links">\n      <a href="https://support.mozilla.org/kb/cookies-information-websites-store-on-your-computer" target="_blank">{{#t}}Learn more{{/t}}</a>\n    </p>\n\n\n    <div class="button-row">\n      <button id="submit-btn" type="submit">{{#t}}Try again{{/t}}</button>\n    </div>\n\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="delete-account" class="settings-unit {{#isPanelOpen}}open{{/isPanelOpen}}">\n  <div class="settings-unit-stub">\n    <header class="settings-unit-summary">\n      <h2 class="settings-unit-title">{{#t}}Delete account{{/t}}</h2>\n    </header>\n    <button class="settings-button secondary-button settings-unit-loading" disabled>\n      <div class="spinner spinner-settings-fetch"></div>\n    </button>\n    <button class="settings-button secondary-button settings-unit-toggle"\n      data-href="settings/delete_account">{{#t}}Deleteâ€¦{{/t}}</button>\n  </div>\n\n  <div class="settings-unit-details">\n    <div class="error"></div>\n    {{#subscriptions}}\n      <p class="subscription-link">\n        {{#unsafeTranslate}}Looking to cancel a paid subscription? Go to <a href="/subscriptions">Manage Subscriptions</a>.{{/unsafeTranslate}}\n      </p>\n    {{/subscriptions}}\n\n    <div class="delete-account-product-container {{#hideProductContainer}}hide{{/hideProductContainer}}">\n      <p>{{#t}}You\'ve connected your Firefox account to Mozilla products that keep you secure and productive on the web:{{/t}}</p>\n\n      <ul class="delete-account-product-list {{#hasTwoColumnProductList}}two-col{{/hasTwoColumnProductList}}">\n        {{#subscriptions}}\n          {{#plan_name}}\n            <li class="delete-account-product-subscription" title="{{plan_name}}">\n              {{plan_name}}\n            </li>\n          {{/plan_name}}\n        {{/subscriptions}}\n\n        {{#uniqueBrowserNames}}\n          {{#name}}\n            <li class="delete-account-product-browser" title="{{name}}">\n              {{name}}\n            </li>\n          {{/name}}\n        {{/uniqueBrowserNames}}\n\n        {{#clients}}\n          {{#isOAuthApp}}\n            {{#name}}\n              <li class="delete-account-product-client" title="{{name}}">\n                {{name}}\n              </li>\n            {{/name}}\n          {{/isOAuthApp}}\n\n        {{/clients}}\n      </ul>\n    </div>\n\n    <form novalidate>\n      <p>{{#t}}Please acknowledge that by deleting your account:{{/t}}</p>\n\n      <ul class="delete-account-checkbox-list">\n        <li class=\'delete-account-checkbox-list-item\'>\n          <input id="delete-account-subscriptions" type="checkbox" value="delete-account-subscriptions" class="delete-account-checkbox" required />\n          <label for="delete-account-subscriptions">{{#t}}Any paid subscriptions you have will be cancelled{{/t}}</label>\n        </li>\n\n        <li class=\'delete-account-checkbox-list-item\'>\n          <input id="delete-account-saved-info" type="checkbox" value="delete-account-saved-info" class="delete-account-checkbox" required />\n          <label for="delete-account-saved-info">{{#t}}You may lose saved information and features within Mozilla products{{/t}}</label>\n        </li>\n\n        <li class=\'delete-account-checkbox-list-item\'>\n          <input id="delete-account-reactivate" type="checkbox" value="delete-account-reactivate" class="delete-account-checkbox" required />\n          <label for="delete-account-reactivate">{{#t}}Reactivating with this email may not restore your saved information{{/t}}</label>\n        </li>\n      </ul>\n\n      <div class="input-row password-row">\n        \x3c!-- add the autocomplete=off attribute - the user is deleting the account, they most likely don\'t want the password saved. --\x3e\n        <input type="password" class="password tooltip-above" id="password" placeholder="{{#t}}Password{{/t}}" pattern=".{8,}" required autofocus autocomplete="off" />\n      </div>\n\n      <div class="button-row">\n        <button type="submit" class="settings-button warning-button delete-account-button" disabled>{{#t}}Delete account{{/t}}</button>\n        <button class="settings-button secondary-button cancel">{{#t}}Cancel{{/t}}</button>\n      </div>\n\n    </form>\n  </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="emails" class="settings-unit {{#isPanelOpen}}open{{/isPanelOpen}}">\n    <div class="settings-unit-stub">\n        <header class="settings-unit-summary">\n            <h2 class="settings-unit-title">{{#t}}Secondary email{{/t}}</h2>\n        </header>\n        <button class="settings-button settings-unit-toggle {{buttonClass}}" data-href="/settings/emails">\n            {{#hasSecondaryEmail}}{{#t}}Changeâ€¦{{/t}}{{/hasSecondaryEmail}}\n            {{^hasSecondaryEmail}}{{#t}}Addâ€¦{{/t}}{{/hasSecondaryEmail}}\n        </button>\n    </div>\n\n    <div class="settings-unit-details">\n        <form novalidate>\n            <p>\n                {{#t}}A secondary email is an additional address for receiving security notices and confirming new devices.{{/t}}\n            </p>\n            {{#hasSecondaryEmail}}\n                <ul class="email-list button-row">\n                    {{#emails}}\n                        {{^isPrimary}}\n                            <li class="email-address">\n                                <div class="email-address-details">\n                                    <div class="address {{#verified}}verified{{/verified}}">{{email}}</div>\n                                    <div class="details {{#verified}}verified{{/verified}}{{^verified}}not-verified{{/verified}}">\n                                        {{#verified}}\n                                            <div>{{#t}}Verified{{/t}}</div>\n                                        {{/verified}}\n                                        {{^verified}}\n                                            <div>{{#t}}Verification required{{/t}}</div>\n                                        {{/verified}}\n                                    </div>\n                                </div>\n                                <div class="settings-button-group">\n                                    {{#verified}}\n                                        <button class="settings-button secondary-button set-primary" data-id="{{email}}" title="{{#t}}Make primary{{/t}}">\n                                            {{#t}}Make primary{{/t}}\n                                        </button>\n                                    {{/verified}}\n                                    <button class="settings-button warning-button email-disconnect" data-id="{{email}}">\n                                        {{#t}}Remove{{/t}}\n                                    </button>\n                                </div>\n                            </li>\n                            <li class="email-options">\n                                <div class="settings-button-group">\n                                    {{#verified}}\n                                        <button class="settings-button secondary-button set-primary" data-id="{{email}}" title="{{#t}}Make primary{{/t}}">\n                                            {{#t}}Make primary{{/t}}\n                                        </button>\n                                    {{/verified}}\n                                    <button class="settings-button warning-button email-disconnect" data-id="{{email}}">\n                                        {{#t}}Remove{{/t}}\n                                    </button>\n                                </div>\n                            </li>\n\n                            {{^verified}}\n                                <a class="resend" data-id="{{email}}">{{#t}}Not in inbox or spam folder? Resend{{/t}}</a>\n                            {{/verified}}\n\n                        {{/isPrimary}}\n                    {{/emails}}\n                </ul>\n            {{/hasSecondaryEmail}}\n\n            {{^hasSecondaryEmail}}\n                <div class="input-row">\n                    <input type="email" class="new-email tooltip-below" placeholder="{{#t}}Secondary email{{/t}}"\n                           value="{{newEmail}}" autofocus autocomplete="off"/>\n                </div>\n            {{/hasSecondaryEmail}}\n\n            <div class="button-row">\n                {{#hasSecondaryEmail}}\n                    <button type="submit" class="settings-button email-refresh secondary-button enabled" title="{{ lastCheckedTime }}">{{#t}}Refresh status{{/t}}</button>\n\n                    <button\n                        class="settings-button {{#hasSecondaryVerifiedEmail}}cancel secondary-button enabled{{/hasSecondaryVerifiedEmail}}\n                            {{^hasSecondaryVerifiedEmail}} disabled {{/hasSecondaryVerifiedEmail}}">\n                        {{#t}}Done{{/t}}\n                    </button>\n                {{/hasSecondaryEmail}}\n\n                {{^hasSecondaryEmail}}\n                    <button type="submit" class="settings-button email-add primary-button">{{#t}}Add{{/t}}</button>\n                    <button class="settings-button cancel secondary-button enabled">{{#t}}Cancel{{/t}}</button>\n                {{/hasSecondaryEmail}}\n            </div>\n        </form>\n    </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-force-auth-header">\n      {{#serviceName}}\n        \x3c!-- L10N: For languages structured like English, the second phrase can read "to continue to %(serviceName)s" --\x3e\n        {{#t}}Sign in{{/t}} <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n      {{/serviceName}}\n      {{^serviceName}}\n        {{#t}}Sign in to continue{{/t}}\n      {{/serviceName}}\n    </h1>\n  </header>\n\n  <section>\n    {{#fatalError}}\n      <div class="error visible"></div>\n    {{/fatalError}}\n    {{^fatalError}}\n\n    <div class="error"></div>\n\n    {{{ userCardHTML }}}\n\n    <form novalidate>\n      <input type="email" class="email hidden" value="{{ email }}" disabled />\n      <div class="input-row password-row">\n        <input type="password" class="password tooltip-below" id="password" placeholder="{{#t}}Password{{/t}}" required pattern=".{8,}" required {{#email}}autofocus{{/email}} />\n      </div>\n\n      <div class="button-row">\n        <button id="submit-btn" type="submit">{{{buttonSignInText}}}</button>\n      </div>\n    </form>\n\n    <div class="tos-pp faint">\n      {{#unsafeTranslate}}By proceeding, you agree to the <a id="fxa-tos" href="/legal/terms">Terms of Service</a> and <a id="fxa-pp" href="/legal/privacy">Privacy Notice</a>.{{/unsafeTranslate}}\n    </div>\n\n    <div class="links">\n      <a href="/reset_password" class="reset-password" data-flow-event="forgot-password">{{#t}}Forgot password?{{/t}}</a>\n    </div>\n    {{/fatalError}}\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div class="user-card">\n  <div class="avatar-wrapper card-view"></div>\n  <div class="user-info">\n    <div>\n      <div class="prefillEmail">{{ email }}</div>\n    </div>\n  </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="coppa" class="input-row input-row-age">\n  <input type="number" pattern="\\d*" id="age" placeholder="{{#t}}How old are you?{{/t}}" min="0" max="130" value="{{ age }}" {{#required}}required{{/required}} />\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('{{#showSyncSuggestion}}\n  <div class="info" id="suggest-sync">\n      {{#unsafeTranslate}}Looking for Firefox Sync? <a %(escapedSyncSuggestionAttrs)s>Get started here</a>{{/unsafeTranslate}}\n      <span class="dismiss" tabindex="-1">&#10005;</span>\n  </div>\n{{/showSyncSuggestion}}\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<input name="email" type="email" class="email tooltip-below" autofocus placeholder="{{#t}}Email{{/t}}"/>\n<datalist id="autocomplete-domain">\n    {{#options}}\n        <option />\n    {{/options}}\n</datalist>\n<div id="focus-hack" tabindex="-1" aria-hidden="true"></div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-enter-email-header">\n      {{#serviceName}}\n        \x3c!-- L10N: For languages structured like English, the second phrase can read "to continue to %(serviceName)s" --\x3e\n        {{#t}}Enter your email{{/t}} <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n      {{/serviceName}}\n      {{^serviceName}}\n        {{#t}}Enter your email{{/t}}\n      {{/serviceName}}\n    </h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n    {{{ syncSuggestionHTML }}}\n\n    <form novalidate>\n      <div class="input-row">\n        {{{ unsafeEmailAutocompleteDomainsHTML }}}\n      </div>\n\n      <div class="button-row">\n        <button id="submit-btn" type="submit">{{#t}}Continue{{/t}}</button>\n      </div>\n    </form>\n    {{{ unsafeFirefoxFamilyHTML }}}\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<fieldset class="checkbox-row {{^visible}}hidden{{/visible}}" {{#required}}disabled{{/required}}>\n  <input class="permission" id="{{ name }}" name="{{ name }}" type="checkbox" checked="checked" value="{{ name }}" {{#required}}disabled{{/required}}/><label for="{{ name }}">\n    {{#valueVisible}}\n      <span class="fxa-checkbox__value">{{ value }}</span>\n      <div class="fxa-checkbox__label">{{ label }}</div>\n    {{/valueVisible}}\n\n    {{^valueVisible}}\n      {{ label }}\n    {{/valueVisible}}\n  </label>\n</fieldset>\n\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-permissions-header">{{#t}}Request for permission{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <p id="permission-request">{{#t}}%(serviceName)s wants the following information from your account:{{/t}}</p>\n\n    <form id="permissions" novalidate>\n      {{{ unsafePermissionsHTML }}}\n\n      <div class="button-row">\n        <button id="accept" type="submit">{{#t}}Accept{{/t}}</button>\n      </div>\n    </form>\n\n    <p class="links">\n      <a href="#" id="back">{{#t}}Cancel{{/t}}</a>\n    </p>\n\n  </section>\n</div>\n',e,t=t||{})}},,function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div class="modal dialog-error">\n  <div class="message">\n    <p>{{#t}}Hmm, we\'re having trouble with our system. We\'re working on fixing it for you and apologize for the inconvenience. Please try again later.{{/t}}</p>\n  </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div class="modal dialog-success">\n  <h2>{{#t}}Your message was sent to Support{{/t}}</h2>\n  <div class="message">\n    <p>{{{message}}}</p>\n  </div>\n  <button class="settings-button primary-button">{{#t}}Back to Subscriptions{{/t}}</button>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="fxa-settings-header-wrapper">\n  <header id="fxa-settings-header">\n    <h1 id="fxa-manage-account"><span class="fxa-account-title">{{#t}}Firefox Accounts{{/t}}</span></h1>\n  </header>\n\n  <ol class="breadcrumbs">\n    <li><a href="/settings">Account Home</a></li>\n    <li><a href="/subscriptions">Subscriptions</a></li>\n    <li><a href="/support">Contact Us</a></li>\n  </ol>\n\n  <div class="settings-success-wrapper">\n    <div class="success settings-success"></div>\n  </div>\n</div>\n\n<div id="fxa-settings">\n  <div id="fxa-settings-content" class="card">\n\n    <header id="fxa-settings-profile-header-wrapper">\n      <div class="avatar-wrapper avatar-settings-view nohover"></div>\n      <div id="fxa-settings-profile-header">\n      {{{ unsafeHeaderHTML }}}\n      </div>\n    </header>\n    <div class="child-views">\n      <div class="settings-child-view support">\n        <div class="settings-unit">\n          <div class="support-form">\n            <header>\n              <h3>{{#t}}Contact Us{{/t}}</h3>\n            </header>\n            <form id="fxa-support" novalidate>\n              <div class="support-field">\n                <div class="form-label">\n                  <label for="plan" id="plan-label">{{#t}}What are you contacting us about?{{/t}}</label>\n                </div>\n                <div class="input-row">\n                  <select id="plan" name="plan" data-placeholder="{{optionPlaceholder}}">\n                    <option value=""></option>\n                    {{#subscriptions}}\n                    <option value="{{plan_name}}">{{plan_name}}</option>\n                    {{/subscriptions}}\n                    <option value="Other">{{#t}}Other{{/t}}</option>\n                  </select>\n                </div>\n              </div>\n              <div class="support-field">\n                <div class="form-label">\n                  <label for="topic" id="topic-label">{{#t}}What do you need help with?{{/t}}</label>\n                </div>\n                <div class="input-row">\n                  <select id="topic" name="topic" data-placeholder="{{optionPlaceholder}}">\n                    <option value=""></option>\n                    {{#topicOptions}}\n                    <option value="{{topic}}">{{translated}}</option>\n                    {{/topicOptions}}\n                  </select>\n                </div>\n              </div>\n              <div class="support-field">\n                <div class="form-label">\n                  <label for="subject">{{#t}}Subject (optional){{/t}}</label>\n                </div>\n                <div class="input-row">\n                  <input type="text" id="subject" name="subject"/>\n                </div>\n              </div>\n              <div class="support-field">\n                <div class="form-label">\n                  <label for="message">{{#t}}Description of issue{{/t}}</label>\n                </div>\n                <div class="input-row">\n                  <textarea id="message" name="message" rows="5" cols="70"></textarea>\n                </div>\n              </div>\n              <div class="button-row">\n                <button class="settings-button secondary-button cancel">{{#t}}Cancel{{/t}}</button>\n                <button type="submit" class="settings-button primary-button disabled">\n                  <span class="submit-content">{{#t}}Send{{/t}}</span>\n                  <div class="spinner hidden"></div>\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<footer id="legal-footer"><a class="terms" href="/legal/terms">{{#t}}Terms of Service{{/t}}</a><a class="privacy" href="/legal/privacy">{{#t}}Privacy Notice{{/t}}</a></footer>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="{{headerId}}">{{{escapedHeaderTitle}}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n\n    <div class="graphic graphic-checkbox">{{#t}}Success{{/t}}</div>\n\n    {{#isSync}}\n      <p class="account-ready-service">{{{escapedReadyToSyncText}}}</p>\n      <div class="button-row">\n          <button class="primary-button btn-start-browsing">{{#t}}Start browsing{{/t}}</button>\n      </div>\n    {{/isSync}}\n\n    {{^isSync}}\n      {{#serviceName}}\n        <p class="account-ready-service">{{#t}}You are now ready to use %(serviceName)s{{/t}}</p>\n          {{#showContinueButton}}\n              <div class="button-row">\n                  <button class="primary-button btn-continue">{{#t}}Continue{{/t}}</button>\n              </div>\n          {{/showContinueButton}}\n      {{/serviceName}}\n      {{^serviceName}}\n          {{#emailVerified}}\n              <p class="account-ready-service">{{{escapedEmailReadyText}}}</p>\n          {{/emailVerified}}\n\n          {{^emailVerified}}\n              <p class="account-ready-generic">{{#t}}Your account is ready!{{/t}}</p>\n          {{/emailVerified}}\n      {{/serviceName}}\n    {{/isSync}}\n\n      {{#isPasswordReset}}\n          <div class="button-row">\n              <button class="primary-button btn-create-recovery-key">{{#t}}Generate a new recovery key{{/t}}</button>\n              <button class="button-link btn-goto-account">{{#t}}Continue to my account{{/t}}</button>\n          </div>\n      {{/isPasswordReset}}\n\n      <div class="marketing-area"></div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="recovery-codes">\n    <section class="modal-panel">\n        {{#modalSuccessMsg}}\n            <p class="success modal-success">{{modalSuccessMsg}}</p>\n        {{/modalSuccessMsg}}\n        <div class="error"></div>\n\n        <h2>{{#t}}Recovery codes{{/t}}</h2>\n\n    <form novalidate>\n        {{^showRecoveryCodes}}\n            <p class="description">\n                <span class="note">{{#t}}NOTE:{{/t}}</span>\n                {{#t}}By generating new recovery codes, all previous codes will become invalid. Please store new codes in a safe location.{{/t}}\n            </p>\n\n            <div class="recovery-code-generate">\n                <a class="replace-codes-link">{{#t}}Generate new recovery codes{{/t}}</a>\n            </div>\n        {{/showRecoveryCodes}}\n\n        {{#showRecoveryCodes}}\n            <p class="description">\n                <span class="note">{{#t}}NOTE:{{/t}}</span>\n                {{#t}}These are your one time use recovery codes. Store them in a safe place in the event you lose access to your mobile device. You will not be able to see these codes again.{{/t}}\n            </p>\n\n            <div id="recovery-code-container">\n                {{#recoveryCodes}}\n                    <div class="recovery-code">{{code}}</div>\n                {{/recoveryCodes}}\n            </div>\n            <div class="link-options">\n                <a class="replace-codes-link">{{#t}}Generate new recovery codes{{/t}}</a>\n            </div>\n\n            {{^isIos}}\n                <div class="button-row save-options">\n                    <a href="#" class="save-option download-option">\n                        <div class="graphic graphic-download-option"></div>\n                        <p class="name">{{#t}}Download{{/t}}</p>\n                    </a>\n                    <a href="#" class="save-option copy-option">\n                        <div class="graphic graphic-copy-option"></div>\n                        <p class="name">{{#t}}Copy{{/t}}</p>\n                    </a>\n                    <a href="#" class="save-option print-option">\n                        <div class="graphic graphic-print-option"></div>\n                        <p class="name">{{#t}}Print{{/t}}</p>\n                    </a>\n                </div>\n            {{/isIos}}\n\n            {{#isIos}}\n                <div class="button-row">\n                    <a href="#" class="save-option copy-option">\n                        <div class="graphic graphic-copy-option"></div>\n                        <p class="name">{{#t}}Copy{{/t}}</p>\n                    </a>\n                </div>\n            {{/isIos}}\n        {{/showRecoveryCodes}}\n\n        <div class="button-row">\n            <button class="settings-button secondary-button two-step-authentication-done">{{#t}}Done{{/t}}</button>\n        </div>\n    </form>\n    </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render("<html>\n<head><title>Recovery Codes</title>\n</head>\n<body>\n{{#recoveryCodes}}\n    <p>{{code}}</p>\n{{/recoveryCodes}}\n</body>\n</html>\n",e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  {{#isLinkDamaged}}\n    <header>\n      <h1 id="fxa-report-sign-in-link-damaged-header">{{#t}}Link damaged{{/t}}</h1>\n    </header>\n\n    <section>\n      <p>\n        {{#t}}The link you clicked was missing characters, and may have been broken by your email client. Copy the address carefully, and try again.{{/t}}\n      </p>\n    </section>\n  {{/isLinkDamaged}}\n\n  {{#isLinkValid}}\n    <header>\n      <h1 id="fxa-report-sign-in-header">{{#t}}Report unauthorized sign-in?{{/t}}</h1>\n    </header>\n\n    <section>\n      <div class="success"></div>\n      <div class="error"></div>\n\n      <p>\n        {{#t}}You received an email about attempted access to your account. Would you like to report this activity as suspicious?{{/t}}\n      </p>\n\n      <form novalidate>\n        <div class="button-row">\n          <button id="submit-btn" type="submit">{{#t}}Report activity{{/t}}</button>\n        </div>\n      </form>\n    </section>\n\n    {{#hasSupportLink}}\n      <div class="links">\n        <a href="{{{ escapedSupportLink }}}" id="support-link" target="_blank">{{#t}}Why is this happening?{{/t}}</a>\n      </div>\n    {{/hasSupportLink}}\n  {{/isLinkValid}}\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-reset-password-header">\n      {{#serviceName}}\n        \x3c!-- L10N: For languages structured like English, the second phrase can read "to continue to %(serviceName)s" --\x3e\n        {{#t}}Reset password{{/t}} <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n      {{/serviceName}}\n      {{^serviceName}}\n        {{#t}}Reset password{{/t}}\n      {{/serviceName}}\n    </h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n\n    <form novalidate>\n      <p class="reset-warning">\n        {{#unsafeTranslate}}<span>NOTE:</span> When you reset your password, you reset your account. You may lose some of your personal information (including history, bookmarks, and passwords). Thatâ€™s because we encrypt your data with your password to protect your privacy.{{/unsafeTranslate}}\n      </p>\n      <div class="input-row">\n        {{#forceEmail}}\n          <p class="prefillEmail">{{ forceEmail }}</p>\n          <input type="email" class="email hidden" value="{{ forceEmail }}" disabled />\n        {{/forceEmail}}\n        {{^forceEmail}}\n          <input name="email" type="email" class="email" placeholder="{{#t}}Email{{/t}}" spellcheck="false" autofocus required autocomplete="off" />\n        {{/forceEmail}}\n      </div>\n\n      <div class="button-row">\n        <button id="submit-btn" type="submit" class="warning-button">{{#t}}Begin reset{{/t}}</button>\n      </div>\n    </form>\n\n    {{#canGoBack}}\n    <div class="links">\n      <a href="#" class="remember-password">{{#t}}Remember password? Sign in{{/t}}</a>\n    </div>\n    {{/canGoBack}}\n\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<h1 id="recent-activity-header">{{#t}}Recent Activity{{/t}}</h1>\n\n<h2>{{#t}}Security Events{{/t}}</h2>\n<table id="security-events-table">\n    <thead>\n        <tr>\n            <th>{{#t}}Event Name{{/t}}</th>\n            <th>{{#t}}Verified{{/t}}</th>\n            <th>{{#t}}Created At{{/t}}</th>\n        </tr>\n    </thead>\n    <tbody id="security-events">\n        {{#securityEvents}}\n            <tr class="security-event">\n                <td class="event-name">{{name}}</td>\n                <td>{{verified}}</td>\n                <td>{{createdAt}}</td>\n            </tr>\n        {{/securityEvents}}\n    </tbody>\n</table>\n\n<br/>\n<button id="delete-events">{{#t}}Delete events{{/t}}</button>\n\n<footer id="legal-footer"><a class="terms" href="/settings?security_events=true">{{#t}}Back to settings{{/t}}</a></footer>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="change-avatar" class="settings-unit">\n  <div class="settings-unit-stub">\n    <header class="settings-unit-summary">\n      <h2 class="settings-unit-title">{{#t}}Account picture{{/t}}</h2>\n    </header>\n    {{^avatarDefault}}\n      <button class="settings-button secondary-button settings-unit-toggle" data-href="settings/avatar/change">\n      <span class="change-button">{{#t}}Changeâ€¦{{/t}}</span>\n      </button>\n    {{/avatarDefault}}\n    {{#avatarDefault}}\n      <button class="settings-button primary-button settings-unit-toggle" data-href="settings/avatar/change">\n      <span class="add-button">{{#t}}Addâ€¦{{/t}}</span>\n      </button>\n    {{/avatarDefault}}\n  </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div class="child-views"></div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="manage-subscription" class="settings-unit">\n  <div class="settings-unit-stub">\n    <header class="settings-unit-summary">\n      <h2 class="settings-unit-title">{{#t}}Subscriptions{{/t}}</h2>\n    </header>\n    <button class="settings-button primary-button settings-unit-toggle">\n      <span class="change-button">{{#t}}Manageâ€¦{{/t}}</span>\n    </button>\n  </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="fxa-settings-header-wrapper">\n  {{#ccExpired}}\n    <div class="cc-expired-alert" role="alert">\n      {{#unsafeTranslate}}Your credit card has expired. Please update it <a %(escapedCcExpiredLinkAttrs)s>here</a>.{{/unsafeTranslate}}\n    </div>\n  {{/ccExpired}}\n  <header id="fxa-settings-header">\n    <h1 id="fxa-manage-account"><span class="fxa-account-title">{{#t}}Firefox Accounts{{/t}}</span></h1>\n    {{#showSignOut}}\n      <button id="signout" class="settings-button secondary-button">{{#t}}Sign out{{/t}}</button>\n    {{/showSignOut}}\n  </header>\n\n  <div class="settings-success-wrapper">\n    <div class="success settings-success"></div>\n    <div class="error settings-error {{#error}}visible{{/error}}">{{error}}</div>\n  </div>\n</div>\n\n<div id="fxa-settings">\n  <div id="fxa-settings-content" class="card">\n\n    <header id="fxa-settings-profile-header-wrapper">\n      <div class="avatar-wrapper avatar-settings-view"></div>\n      <div id="fxa-settings-profile-header">\n      {{{ unsafeHeaderHTML }}}\n      </div>\n    </header>\n    <div id="sub-panels"></div>\n  </div>\n</div>\n\n<footer id="legal-footer">\n  {{#securityEventsVisible}}\n    <a id="recent-activity-link" class="terms" href="/security_events">{{#t}}Recent Activity{{/t}}</a>\n  {{/securityEventsVisible}}\n  <a class="terms" href="/legal/terms">{{#t}}Terms of Service{{/t}}</a>\n  <a class="privacy" href="/legal/privacy">{{#t}}Privacy Notice{{/t}}</a>\n</footer>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="totp-section" class="settings-unit {{#isPanelOpen}}open{{/isPanelOpen}} totp-panel">\n    <div class="settings-unit-stub">\n        <header class="settings-unit-summary">\n            <h2 class="settings-unit-title">{{#t}}Two-step authentication{{/t}}</h2>\n        </header>\n\n        <button class="settings-button secondary-button settings-unit-loading" disabled>\n            <div class="spinner spinner-settings-fetch"></div>\n        </button>\n\n        {{^hasToken}}\n            <button class="settings-button primary-button settings-unit-toggle totp-create" data-href="settings/two_step_authentication">\n                {{#t}}Enableâ€¦{{/t}}\n            </button>\n        {{/hasToken}}\n\n        {{#hasToken}}\n            <button class="settings-button secondary-button settings-unit-toggle" data-href="settings/two_step_authentication">\n                {{#t}}Changeâ€¦{{/t}}\n            </button>\n        {{/hasToken}}\n    </div>\n\n\n    <div class="settings-unit-details">\n        <p>\n            {{#unsafeTranslate}}Add a layer of security to your account by requiring security codes from one of <a %(escapedTotpSupportAttributes)s>these authentication apps</a>.{{/unsafeTranslate}}\n        </p>\n\n        <div class="totp-list">\n            <ul id="totp-status">\n                <li class="totp-type">\n                    <div class="name">{{#t}}Current status{{/t}}</div>\n                    <div class="details">\n                        {{#hasToken}}\n                            <div class="enabled">{{#t}}Enabled{{/t}}</div>\n                        {{/hasToken}}\n                        {{^hasToken}}\n                            <div class="disabled">{{#t}}Disabled{{/t}}</div>\n                        {{/hasToken}}\n                    </div>\n                    <div class="panel-settings-button-group">\n                        {{#hasToken}}\n                            <button class="settings-button warning-button totp-delete">{{#t}}Disable{{/t}}</button>\n                        {{/hasToken}}\n                        {{^hasToken}}\n                            <button class="settings-button secondary-button totp-create">{{#t}}Enable{{/t}}</button>\n                        {{/hasToken}}\n                    </div>\n                </li>\n                <li>\n                    {{#hasToken}}\n                        <button class="link replace-codes-link">{{#t}}Replace recovery codes{{/t}}</button>\n                    {{/hasToken}}\n                </li>\n            </ul>\n            <div class="button-row">\n                <button class="settings-button primary-button totp-refresh" title="{{ lastCheckedTime }}">{{#t}}Refresh status{{/t}}</button>\n                <button class="settings-button cancel secondary-button enabled totp-cancel">{{#t}}Cancel{{/t}}</button>\n            </div>\n        </div>\n\n        <form novalidate>\n            <div id="totp" class="totp-details hidden">\n                <div class="qr-image-container">\n                    <img class="qr-image" alt="{{ qrImageAltText }}"/>\n                </div>\n\n                <p class="setup-description">\n                    {{#t}}Scan the QR code in your authentication app and then enter the security code it provides.{{/t}}\n                    <a href="#" class="show-code-link">{{#t}}Canâ€™t scan code?{{/t}}</a>\n                </p>\n\n                <div class="manual-code hidden">\n                    <p class="setup-description">{{#t}}Manually enter this secret key into your authentication app:{{/t}}</p>\n                    <div class="code"></div>\n                </div>\n\n                <div class="input-row">\n                    <input type="number" pattern="\\d*" class="tooltip-below totp-code" placeholder="{{#t}}Security code{{/t}}" value="{{ code }}" required autofocus autocomplete="off"/>\n                </div>\n\n                <div class="button-row">\n                    <button type="submit" class="settings-button primary-button totp-confirm-code">{{#t}}Confirm{{/t}}</button>\n                    <button class="settings-button cancel secondary-button enabled totp-cancel">{{#t}}Cancel{{/t}}</button>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-signin-bounced-header">{{#unsafeTranslate}}Sorry. Weâ€™ve locked your&nbsp;account.{{/unsafeTranslate}}</h1>\n  </header>\n\n  <section>\n    <div class="graphic graphic-mail-bounced"></div>\n\n    <p>{{#t}}The confirmation email we sent to %(email)s was returned and weâ€™ve locked your account to protect your Firefox data.{{/t}}</p>\n\n    <p class="faint">{{#unsafeTranslate}}If this is a valid email address, <a %(escapedSupportLinkAttrs)s>let us know</a> and we can help unlock your account.{{/unsafeTranslate}}</p>\n\n    <div class="links">\n      <a id="create-account" class="{{#canGoBack}}left {{/canGoBack}}delayed-fadein" href="#" data-flow-event="link.create-account">{{#t}}No longer own that email? Create a new account{{/t}}</a>\n      {{#canGoBack}}\n        <a id="back" class="right delayed-fadein" href="#" data-flow-event="link.back">{{#t}}Back{{/t}}</a>\n      {{/canGoBack}}\n    </div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-signin-password-header">\n      {{#serviceName}}\n        \x3c!-- L10N: For languages structured like English, the second phrase can read "to continue to %(serviceName)s" --\x3e\n        {{#t}}Sign in{{/t}} <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n      {{/serviceName}}\n      {{^serviceName}}\n        {{#t}}Sign in{{/t}}\n      {{/serviceName}}\n    </h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    {{{ userCardHTML }}}\n\n    <form novalidate>\n      <input type="email" class="email hidden" value="{{ email }}" disabled />\n\n      {{#isPasswordNeeded}}\n      <div class="input-row password-row">\n        <input id="password" type="password" class="password check-password tooltip-below" placeholder="{{#t}}Password{{/t}}" value="{{ password }}" pattern=".{8,}" required autofocus />\n      </div>\n      {{/isPasswordNeeded}}\n\n      <div class="button-row">\n        <button id="submit-btn" {{^isPasswordNeeded}}class="use-logged-in"{{/isPasswordNeeded}} type="submit">{{#t}}Sign in{{/t}}</button>\n      </div>\n\n      <div class="links">\n        <a href="/" class="left use-different" data-flow-event="use-different-account">{{#t}}Use a different account{{/t}}</a>\n        <a href="/reset_password" class="right reset-password" data-flow-event="forgot-password">{{#t}}Forgot password?{{/t}}</a>\n      </div>\n    </form>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-recovery-code-header">{{#t}}Enter recovery code{{/t}}\n        {{#serviceName}}\n            <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n        {{/serviceName}}\n    </h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <div class="graphic graphic-recovery-codes"></div>\n\n    <p class="verification-recovery-code-message">\n    {{#t}}Please enter a recovery code that was provided to you during setup.{{/t}}\n    </p>\n\n    <form novalidate>\n      <div class="input-row otp-code-row">\n        <input type="text" class="tooltip-below recovery-code" placeholder="{{#t}}Enter 10-digit recovery code{{/t}}" required autofocus />\n      </div>\n\n      <div class="button-row">\n        <button type="submit" class="use-logged-in">{{#t}}Verify{{/t}}</button>\n      </div>\n\n    </form>\n\n    <div class="links">\n      <a id="use-backup-link" class="left" href="/signin_totp_code">{{#t}}Back{{/t}}</a>\n      <a id="locked-out-link" class="right" target="_blank" href="{{{ escapedLockedOutSupportLink }}}" >{{#t}}Are you locked out?{{/t}}</a>\n    </div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n    <header>\n      <h1 id="fxa-sign-in-reported-header">{{#t}}Thank you for your vigilance{{/t}}</h1>\n    </header>\n\n    <section>\n      <p>\n        {{#t}}Our team has been notified. Reports like this help us fend off intruders.{{/t}}\n      </p>\n    </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-signin-code-header">{{#t}}Authorize this sign-in{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <div class="graphic graphic-mail">{{#t}}Authorize this sign-in{{/t}}</div>\n\n    <p class="verification-email-message">\n    {{#t}}Check your email for the code sent to %(email)s.{{/t}}\n    </p>\n\n    <form novalidate>\n      <div class="input-row otp-code-row">\n          \x3c!-- Using `type="text" inputmode="numeric"` shows the numericpad on mobile and strips out whitespace on desktop. --\x3e\n          <input type="text" inputmode="numeric" pattern="\\d[ ]*" class="tooltip-below otp-code" placeholder="{{#t}}Enter 6-digit code{{/t}}" required autofocus />\n      </div>\n\n      <div class="button-row">\n        <button type="submit" class="use-logged-in">{{#t}}Continue{{/t}}</button>\n      </div>\n\n    </form>\n\n    <div class="links">\n        <a id="resend" class="left delayed-fadein" href="#">{{#t}}Need another code? Resend{{/t}}</a>\n        <a href="{{{ escapedSupportLink }}}" id="support-link" class="delayed-fadein right" target="_blank">{{#t}}Why is this happening?{{/t}}</a>\n    </div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card">\n  <header>\n    <h1 id="fxa-signin-unblock-header">{{#t}}Authorize this sign-in{{/t}}</h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <div class="graphic graphic-mail">{{#t}}Authorize this sign-in{{/t}}</div>\n\n    <p class="verification-email-message">\n    {{#t}}Check your email for the authorization code sent to %(email)s.{{/t}}\n    </p>\n\n    <form novalidate>\n      <div class="input-row unblock-code-row">\n        <input type="text" class="tooltip-below unblock-code" id="unblock_code" placeholder="{{#t}}Enter authorization code{{/t}}" required autofocus />\n      </div>\n\n      <div class="button-row">\n        <button type="submit" class="use-logged-in">{{#t}}Continue{{/t}}</button>\n      </div>\n\n    </form>\n\n    <div class="links">\n      {{#hasSupportLink}}\n        <a id="resend" class="delayed-fadein left" href="#">{{#t}}Not in inbox or spam folder? Resend{{/t}}</a>\n        <a href="{{{ escapedSupportLink }}}" id="support-link" class="delayed-fadein right" target="_blank">{{#t}}Why is this happening?{{/t}}</a>\n      {{/hasSupportLink}}\n      {{^hasSupportLink}}\n        <a id="resend" class="delayed-fadein" href="#">{{#t}}Not in inbox or spam folder? Resend{{/t}}</a>\n      {{/hasSupportLink}}\n    </div>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card signup-password">\n  <header>\n      <h1 id="fxa-signup-password-header">\n      {{#serviceName}}\n        \x3c!-- L10N: For languages structured like English, the second phrase can read "to continue to %(serviceName)s" --\x3e\n        {{#t}}Create a Firefox Account{{/t}} <span class="service">{{#t}}Continue to %(serviceName)s{{/t}}</span>\n      {{/serviceName}}\n      {{^serviceName}}\n        {{#t}}Create a Firefox Account{{/t}}\n      {{/serviceName}}\n      </h1>\n  </header>\n\n  <section>\n    <div class="error"></div>\n    <div class="success"></div>\n\n    <form novalidate>\n      <p class="prefillEmail">{{ email }}</p>\n      <input type="email" class="email hidden" value="{{ email }}" disabled />\n      {{#canChangeAccount}}\n      <a href="/" class="use-different">{{#t}}Change email{{/t}}</a>\n      {{/canChangeAccount}}\n\n      <div class="input-row password-row">\n        <input id="password" type="password" class="password check-password tooltip-below" placeholder="{{#t}}Password{{/t}}" value="{{ password }}" pattern=".{8,}" required autofocus data-form-prefill="password" data-synchronize-show="true" />\n        <div class="helper-balloon" tabindex="-1"></div>\n      </div>\n\n      <div class="input-row password-row">\n        <input id="vpassword" type="password" class="password check-password tooltip-below" placeholder="{{#t}}Repeat password{{/t}}" pattern=".{8,}" required data-synchronize-show="true" />\n\n        <div class="input-help input-help-focused input-help-signup input-help-balloon">\n          {{#unsafeTranslate}}You need this password to access any encrypted data you store with us.<br/>A reset means potentially losing data like passwords and bookmarks.{{/unsafeTranslate}}\n        </div>\n      </div>\n\n      {{{ coppaHTML }}}\n\n      {{^isCWTSOnSignupPasswordEnabled}}\n      <section class="get-involved">\n        {{#isAnyNewsletterEnabled}}\n        <header>\n          <h2>{{#t}}Practical knowledge is coming to your inbox. Sign up for more:{{/t}}</h2>\n        </header>\n        {{/isAnyNewsletterEnabled}}\n\n        {{#newsletters}}\n          <div class="input-row marketing-email-optin-row">\n            <input id="{{slug}}" type="checkbox" class="marketing-email-optin" value="{{slug}}"><label for="{{slug}}">{{label}}</label>\n          </div>\n        {{/newsletters}}\n      </section>\n      {{/isCWTSOnSignupPasswordEnabled}}\n      {{#isCWTSOnSignupPasswordEnabled}}\n      <header>\n        <h2 id="fxa-choose-what-to-sync-header">\n          {{#t}}Choose what to sync:{{/t}}\n        </h2>\n      </header>\n      <div class="two-col-items">\n        {{#engines}}\n          <div class="input-row choose-what-to-sync-row">\n            <input name="sync-content" id="sync-engine-{{id}}" type="checkbox" class="customize-sync" {{#checked}}checked="checked"{{/checked}} value="{{id}}" tabindex="{{tabindex}}" /><label class="fxa-checkbox__label" for="sync-engine-{{id}}">{{text}}</label>\n          </div>\n        {{/engines}}\n      </div>\n      {{/isCWTSOnSignupPasswordEnabled}}\n\n      <div class="button-row">\n        <button id="submit-btn" type="submit">{{#t}}Create account{{/t}}</button>\n      </div>\n\n      <div class="tos-pp faint">\n          {{#unsafeTranslate}}By proceeding, you agree to the <a id="fxa-tos" href="/legal/terms">Terms of Service</a> and <a id="fxa-pp" href="/legal/privacy">Privacy Notice</a>.{{/unsafeTranslate}}\n      </div>\n    </form>\n  </section>\n</div>\n{{{ unsafeFirefoxFamilyHTML }}}\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card send-sms">\n    <header id="fxa-send-sms-header">\n      <div class="error"></div>\n    </header>\n    <section class="send-sms">\n      <div class="graphic {{graphicId}}">{{#t}}Success{{/t}}</div>\n      <p>\n        {{#t}}Send Firefox directly to your smartphone and sign in to complete set-up{{/t}}\n      </p>\n\n      <form novalidate>\n        <div class="input-row sms-row">\n          <input name="phoneNumber" class="phone-number" type="tel" data-country="{{country}}" value="{{phoneNumber}}" placeholder="{{#t}}Mobile phone number{{/t}}" required autofocus="autofocus" />\n          <button type="submit" class="sms-send primary-button">{{#t}}Send{{/t}}</button>\n        </div>\n      </form>\n    </section>\n    <div class="marketing-area"></div>\n    <div class="sms-disclaimer faint">\n      {{#unsafeTranslate}}SMS service only available in certain countries. SMS &amp; data rates may apply. The intended recipient of the email or SMS must have consented. <a %(escapedLearnMoreAttributes)s>Learn more</a>{{/unsafeTranslate}}\n    </div>\n    <div class="links">\n      <a href="/sms/why" data-flow-event="link.why" class="left">{{#t}}Why sign in on another device?{{/t}}</a>\n    </div>\n    <aside class="child-view"></aside>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card sms-sent">\n  <header id="fxa-sms-sent-header">\n    <h1>{{#t}}Check your texts{{/t}}</h1>\n  </header>\n  <section>\n    <div class="success"></div>\n    <div class="error"></div>\n\n    <div class="graphic {{graphicId}}">{{#t}}Success{{/t}}</div>\n\n    <p id="sms-sent-to">\n      {{#t}}A link to the Firefox app was sent to %(escapedPhoneNumber)s{{/t}}\n    </p>\n    <p>\n      <a {{{escapedBackLinkAttrs}}}>{{#t}}Wrong number?{{/t}}</a>\n    </p>\n\n    <div class="faint">\n      {{#t}}If you are not receiving the SMS message, you can also search your app store for â€œFirefox.â€{{/t}}\n    </div>\n\n    <div class="marketing-area"></div>\n\n    <div class="links">\n      <a id="resend" class="delayed-fadein" href="#">{{#t}}Didn\'t arrive? Resend{{/t}}</a>\n      <a href="/sms/sent/why" data-flow-event="link.why" class="left">{{#t}}Why sign in on another device?{{/t}}</a>\n      <a href="https://www.mozilla.org/firefox/accounts" data-flow-event="link.mozilla.org" class="right">{{#t}}Start browsing{{/t}}</a>\n    </div>\n  </section>\n  <aside class="child-view"></aside>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<div id="main-content" class="card would-you-like-to-sync">\n  <div class="error"></div>\n  <div class="graphic graphic-choose-what-to-sync"></div>\n\n  <section>\n    <form id="would-you-like-to-sync" novalidate>\n      <header>\n        <h1 id="fxa-would-you-like-to-sync-header">\n          {{#t}}Would you like to sync this device to your account?{{/t}}\n        </h1>\n      </header>\n      <div class="button-row">\n        <button id="submit-btn" type="submit" tabindex="1" autofocus>{{#t}}Sync this device{{/t}}</button>\n      </div>\n      <div class="links centered">\n        <a id="do-not-sync-device" href="#" class="button-link">{{#t}}Donâ€™t sync this device{{/t}}</a>\n      </div>\n    </form>\n  </section>\n</div>\n',e,t=t||{})}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.render('<aside class="modal-panel connect-another-device">\n  <header>\n    <h1 id="fxa-why-connect-another-device-header">{{#t}}Why sync multiple devices?{{/t}}</h1>\n  </header>\n\n  <p>\n    {{#t}}The Sync service isnâ€™t a permanent backup, itâ€™s simply a secure way to transfer saved bookmarks, history and passwords between your own devices.{{/t}}\n  </p>\n  <p>\n    {{#t}}You should install Firefox and sync at least two devices to protect against losing your data if you need to restore it but forget your password.{{/t}}\n  </p>\n  <div class="button-row">\n    <button id="back" type="submit">{{#t}}Got it{{/t}}</button>\n  </div>\n</aside>\n',e,t=t||{})}},,,,,,,,,,,,,,,,,,function(e){e.exports=JSON.parse('["gmail.com","hotmail.com","yahoo.com","mail.ru","outlook.com","aol.com","qq.com","web.de","yandex.ru","gmx.de","live.com","comcast.net","t-online.de","hotmail.fr","msn.com","yahoo.fr","orange.fr","163.com","icloud.com","hotmail.co.uk"]')},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return RegExp("^(?:".concat(e.join("|"),")$"))}var u,l=n(110),d=(u=["pt-br","zh-tw"],c(["de","en","es","fr","hu","id","pl","ru"].map(function(e){return"".concat(e,"|").concat(e,"-[a-z]{2}")}).concat(u)));e.exports=function(){function e(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,s(e).call(this))).name="communicationPrefsVisible",t}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(e,l),t=e,(n=[{key:"choose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureFlags,n=e.lang,i=d;return t&&Array.isArray(t.communicationPrefLanguages)&&(i=c(t.communicationPrefLanguages)),!!n&&function(e,t){var n=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);return t.test(n)}(n,i)}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=n(110),u="signupPasswordCWTS",l=["control","treatment"];e.exports=function(){function e(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,s(e).call(this))).name=u,t}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(e,c),t=e,(n=[{key:"choose",value:function(e){if(!this._isValidSubject(e))return!1;if("sync"===e.service)return"treatment";if(!e.multiService)return!1;var t="rolloutRate"in e?e.rolloutRate:.2;return 0!==t&&(this.isTestEmail(e.email)?"treatment":/^signupPasswordCWTS\.treatment/.test(e.email)?"treatment":/^signupPasswordCWTS\.control/.test(e.email)?"control":1===t?"treatment":!!this.bernoulliTrial(t,e.uniqueUserId)&&this.uniformChoice(l,e.uniqueUserId))}},{key:"_isValidSubject",value:function(e){return!!(e&&e.email&&"multiService"in e&&e.service&&e.uniqueUserId)}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=n(110);e.exports=function(){function e(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,s(e).call(this))).name="isSampledUser",t}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(e,c),t=e,i=[{key:"sampleRate",value:function(e){var t=e.featureFlags;return t&&t.metricsSampleRate>=0?t.metricsSampleRate:"development"===e.env?1:.1}}],(n=[{key:"choose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.sampleRate(t);return!!(t.env&&t.uniqueUserId&&this.bernoulliTrial(n,t.uniqueUserId))}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=n(110),u=n(63),l=["control","signinCodes"];e.exports=function(){function e(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,s(e).call(this))).name="sendSms",t}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(e,c),t=e,(n=[{key:"choose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.account||!e.uniqueUserId||!e.country)return!1;var t=u[e.country],n=e.featureFlags;if(n&&n.smsCountries&&(t=n.smsCountries[e.country]),!t)return!1;var i=!1,r=t.rolloutRate||0;return this.isTestEmail(e.account.get("email"))?i="signinCodes":1>r?this.bernoulliTrial(r,e.uniqueUserId)&&(i=this.uniformChoice(l,e.uniqueUserId)):i=e.country,i}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=n(110);e.exports=function(){function e(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,s(e).call(this))).name="sentryEnabled",t}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(e,c),t=e,i=[{key:"sampleRate",value:function(e){var t=e.featureFlags;return t&&t.sentrySampleRate>=0?t.sentrySampleRate:"development"===e.env?1:.3}}],(n=[{key:"choose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.sampleRate(t);return!!(t.env&&t.uniqueUserId&&this.bernoulliTrial(n,t.uniqueUserId))}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=n(110);e.exports=function(){function e(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,s(e).call(this))).name="emailMxValidation",t}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(e,c),t=e,(n=[{key:"choose",value:function(e){return!(!e||!e.uniqueUserId)&&(!!this.bernoulliTrial(.2,e.uniqueUserId)&&this.uniformChoice(["control","treatment"],e.uniqueUserId))}}])&&r(t.prototype,n),i&&r(t,i),e}()},,,,,,,,,,,,function(e,t,n){function i(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then(function(){return n(i)})}var r={"./":[140],"./account_recovery_confirm_key":[166],"./account_recovery_confirm_key.js":[166],"./app":[164],"./app.js":[164],"./authorization":[191],"./authorization.js":[191],"./base":[11],"./base.js":[11],"./behaviors/connect-another-device":[98],"./behaviors/connect-another-device.js":[98],"./behaviors/halt":[49],"./behaviors/halt.js":[49],"./behaviors/navigate":[19],"./behaviors/navigate-or-redirect":[101],"./behaviors/navigate-or-redirect.js":[101],"./behaviors/navigate.js":[19],"./behaviors/null":[51],"./behaviors/null.js":[51],"./behaviors/settings":[91],"./behaviors/settings.js":[91],"./cannot_create_account":[181],"./cannot_create_account.js":[181],"./choose_what_to_sync":[183],"./choose_what_to_sync.js":[183],"./clear_storage":[184],"./clear_storage.js":[184],"./complete_reset_password":[159],"./complete_reset_password.js":[159],"./complete_sign_up":[104],"./complete_sign_up.js":[104],"./confirm":[150],"./confirm.js":[150],"./confirm_reset_password":[185],"./confirm_reset_password.js":[185],"./confirm_signup_code":[186],"./confirm_signup_code.js":[186],"./connect_another_device":[151],"./connect_another_device.js":[151],"./cookies_disabled":[187],"./cookies_disabled.js":[187],"./decorators/allow_only_one_submit":[81],"./decorators/allow_only_one_submit.js":[81],"./decorators/cancel_event_then":[94],"./decorators/cancel_event_then.js":[94],"./decorators/notify_delayed_request":[178],"./decorators/notify_delayed_request.js":[178],"./decorators/prevent_default_then":[10],"./decorators/prevent_default_then.js":[10],"./decorators/progress_indicator":[54],"./decorators/progress_indicator.js":[54],"./elements/checkbox-input":[167],"./elements/checkbox-input.js":[167],"./elements/coppa-age-input":[168],"./elements/coppa-age-input.js":[168],"./elements/default":[169],"./elements/default.js":[169],"./elements/email-input":[170],"./elements/email-input.js":[170],"./elements/jquery-plugin":[233],"./elements/jquery-plugin.js":[233],"./elements/otp-code-input":[176],"./elements/otp-code-input.js":[176],"./elements/password-input":[171],"./elements/password-input.js":[171],"./elements/recovery-code-input":[172],"./elements/recovery-code-input.js":[172],"./elements/recovery-key-input":[173],"./elements/recovery-key-input.js":[173],"./elements/tel-input":[174],"./elements/tel-input.js":[174],"./elements/text-input":[43],"./elements/text-input.js":[43],"./elements/totp-code-input":[175],"./elements/totp-code-input.js":[175],"./elements/unblock-code-input":[177],"./elements/unblock-code-input.js":[177],"./force_auth":[152],"./force_auth.js":[152],"./form":[7],"./form.js":[7],"./index":[140],"./index.js":[140],"./legal":[330,9],"./legal.js":[330,9],"./legal_copy":[327,15],"./legal_copy.js":[327,15],"./marketing_snippet":[129],"./marketing_snippet.js":[129],"./mixins/account-by-uid-mixin":[137],"./mixins/account-by-uid-mixin.js":[137],"./mixins/account-reset-mixin":[132],"./mixins/account-reset-mixin.js":[132],"./mixins/avatar-mixin":[25],"./mixins/avatar-mixin.js":[25],"./mixins/back-mixin":[27],"./mixins/back-mixin.js":[27],"./mixins/cached-credentials-mixin":[135],"./mixins/cached-credentials-mixin.js":[135],"./mixins/connect-another-device-mixin":[62],"./mixins/connect-another-device-mixin.js":[62],"./mixins/coppa-mixin":[136],"./mixins/coppa-mixin.js":[136],"./mixins/cwts-on-signup-password-experiment-mixin":[201],"./mixins/cwts-on-signup-password-experiment-mixin.js":[201],"./mixins/disable-form-mixin":[180],"./mixins/disable-form-mixin.js":[180],"./mixins/email-autocomplete-domains-mixin":[190],"./mixins/email-autocomplete-domains-mixin.js":[190],"./mixins/email-mx-validation-experiment-mixin":[188],"./mixins/email-mx-validation-experiment-mixin.js":[188],"./mixins/email-opt-in-mixin":[202],"./mixins/email-opt-in-mixin.js":[202],"./mixins/experiment-mixin":[45],"./mixins/experiment-mixin.js":[45],"./mixins/external-links-mixin":[148],"./mixins/external-links-mixin.js":[148],"./mixins/flow-begin-mixin":[133],"./mixins/flow-begin-mixin.js":[133],"./mixins/flow-events-mixin":[15],"./mixins/flow-events-mixin.js":[15],"./mixins/form-prefill-mixin":[44],"./mixins/form-prefill-mixin.js":[44],"./mixins/has-modal-child-view-mixin":[87],"./mixins/has-modal-child-view-mixin.js":[87],"./mixins/last-checked-time-mixin":[68],"./mixins/last-checked-time-mixin.js":[68],"./mixins/loading-mixin":[80],"./mixins/loading-mixin.js":[80],"./mixins/marketing-mixin":[69],"./mixins/marketing-mixin.js":[69],"./mixins/modal-panel-mixin":[119],"./mixins/modal-panel-mixin.js":[119],"./mixins/modal-settings-panel-mixin":[40],"./mixins/modal-settings-panel-mixin.js":[40],"./mixins/one-visible-of-type-mixin":[116],"./mixins/one-visible-of-type-mixin.js":[116],"./mixins/open-webmail-mixin":[128],"./mixins/open-webmail-mixin.js":[128],"./mixins/pairing-graphics-mixin":[79],"./mixins/pairing-graphics-mixin.js":[79],"./mixins/password-mixin":[39],"./mixins/password-mixin.js":[39],"./mixins/password-reset-mixin":[55],"./mixins/password-reset-mixin.js":[55],"./mixins/password-strength-mixin":[88],"./mixins/password-strength-mixin.js":[88],"./mixins/pulse-graphic-mixin":[86],"./mixins/pulse-graphic-mixin.js":[86],"./mixins/resend-mixin":[31],"./mixins/resend-mixin.js":[31],"./mixins/resume-token-mixin":[48],"./mixins/resume-token-mixin.js":[48],"./mixins/save-options-mixin":[122],"./mixins/save-options-mixin.js":[122],"./mixins/service-mixin":[22],"./mixins/service-mixin.js":[22],"./mixins/session-verification-poll-mixin":[71],"./mixins/session-verification-poll-mixin.js":[71],"./mixins/session-verified-notification-mixin":[179],"./mixins/session-verified-notification-mixin.js":[179],"./mixins/settings-panel-mixin":[28],"./mixins/settings-panel-mixin.js":[28],"./mixins/signed-in-notification-mixin":[70],"./mixins/signed-in-notification-mixin.js":[70],"./mixins/signed-out-notification-mixin":[85],"./mixins/signed-out-notification-mixin.js":[85],"./mixins/signin-mixin":[56],"./mixins/signin-mixin.js":[56],"./mixins/signup-mixin":[203],"./mixins/signup-mixin.js":[203],"./mixins/sms-mixin":[139],"./mixins/sms-mixin.js":[139],"./mixins/sync-auth-mixin":[111],"./mixins/sync-auth-mixin.js":[111],"./mixins/sync-optional-mixin":[84],"./mixins/sync-optional-mixin.js":[84],"./mixins/sync-suggestion-mixin":[189],"./mixins/sync-suggestion-mixin.js":[189],"./mixins/timer-mixin":[112],"./mixins/timer-mixin.js":[112],"./mixins/upgrade-session-mixin":[83],"./mixins/upgrade-session-mixin.js":[83],"./mixins/user-card-mixin":[134],"./mixins/user-card-mixin.js":[134],"./mixins/verification-reason-mixin":[38],"./mixins/verification-reason-mixin.js":[38],"./pair":[229,0],"./pair/":[229,0],"./pair/auth_allow":[331,2],"./pair/auth_allow.js":[331,2],"./pair/auth_complete":[332,3],"./pair/auth_complete.js":[332,3],"./pair/auth_totp":[333,16],"./pair/auth_totp.js":[333,16],"./pair/auth_wait_for_supp":[334,4],"./pair/auth_wait_for_supp.js":[334,4],"./pair/device-being-paired-mixin":[326,14],"./pair/device-being-paired-mixin.js":[326,14],"./pair/failure":[335,10],"./pair/failure.js":[335,10],"./pair/index":[229,0],"./pair/index.js":[229,0],"./pair/pairing-totp-mixin":[328,17],"./pair/pairing-totp-mixin.js":[328,17],"./pair/success":[336,11],"./pair/success.js":[336,11],"./pair/supp":[337,12],"./pair/supp.js":[337,12],"./pair/supp_allow":[338,5],"./pair/supp_allow.js":[338,5],"./pair/supp_wait_for_auth":[339,6],"./pair/supp_wait_for_auth.js":[339,6],"./pair/unsupported":[340,13],"./pair/unsupported.js":[340,13],"./password_strength/password_strength_balloon":[211],"./password_strength/password_strength_balloon.js":[211],"./password_strength/password_with_strength_balloon":[182],"./password_strength/password_with_strength_balloon.js":[182],"./permissions":[153],"./permissions.js":[153],"./pp":[341,7],"./pp.js":[341,7],"./progress_indicator":[115],"./progress_indicator.js":[115],"./ready":[53],"./ready.js":[53],"./report_sign_in":[209],"./report_sign_in.js":[209],"./reset_password":[192],"./reset_password.js":[192],"./security_events":[207],"./security_events.js":[207],"./settings":[36],"./settings.js":[36],"./settings/account_recovery/account_recovery":[117],"./settings/account_recovery/account_recovery.js":[117],"./settings/account_recovery/confirm_password":[118],"./settings/account_recovery/confirm_password.js":[118],"./settings/account_recovery/confirm_revoke":[120],"./settings/account_recovery/confirm_revoke.js":[120],"./settings/account_recovery/recovery_key":[121],"./settings/account_recovery/recovery_key.js":[121],"./settings/avatar":[193],"./settings/avatar.js":[193],"./settings/avatar_camera":[123],"./settings/avatar_camera.js":[123],"./settings/avatar_change":[124],"./settings/avatar_change.js":[124],"./settings/avatar_crop":[141],"./settings/avatar_crop.js":[141],"./settings/change_password":[125],"./settings/change_password.jsx":[125],"./settings/client_disconnect":[126],"./settings/client_disconnect.js":[126],"./settings/clients":[127],"./settings/clients.js":[127],"./settings/communication_preferences":[102],"./settings/communication_preferences.js":[102],"./settings/delete_account":[130],"./settings/delete_account.js":[130],"./settings/display_name":[131],"./settings/display_name.jsx":[131],"./settings/emails":[143],"./settings/emails.js":[143],"./settings/recovery_codes":[142],"./settings/recovery_codes.js":[142],"./settings/subscription":[154],"./settings/subscription.js":[154],"./settings/two_step_authentication":[138],"./settings/two_step_authentication.js":[138],"./sign_in_bounced":[195],"./sign_in_bounced.js":[195],"./sign_in_password":[155],"./sign_in_password.js":[155],"./sign_in_recovery_code":[196],"./sign_in_recovery_code.js":[196],"./sign_in_reported":[197],"./sign_in_reported.js":[197],"./sign_in_token_code":[198],"./sign_in_token_code.js":[198],"./sign_in_totp_code":[199],"./sign_in_totp_code.js":[199],"./sign_in_unblock":[200],"./sign_in_unblock.js":[200],"./sign_up_password":[156],"./sign_up_password.js":[156],"./sms_send":[157],"./sms_send.js":[157],"./sms_sent":[158],"./sms_sent.js":[158],"./sub_panels":[194],"./sub_panels.js":[194],"./subscriptions_management_redirect":[205],"./subscriptions_management_redirect.js":[205],"./subscriptions_product_redirect":[204],"./subscriptions_product_redirect.js":[204],"./support":[208],"./support.js":[208],"./tooltip":[82],"./tooltip.js":[82],"./tos":[342,8],"./tos.js":[342,8],"./why_connect_another_device":[145],"./why_connect_another_device.js":[145],"./would_you_like_to_sync":[206],"./would_you_like_to_sync.js":[206]};i.keys=function(){return Object.keys(r)},i.id=361,e.exports=i},,,function(e,t,n){"use strict";function i(){}function r(e,t){return new It({},{email:e.get("email"),namespace:t,uid:e.get("uid")})}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return 3===e.length?Wt.a.denodeify(e):e}function d(){}function h(){}function f(){}function p(e,t,n){return Object(vn.a)().then(function(i){return Object(_n.a)(e,"input key"),Object(_n.a)(t,"uid"),Object(_n.a)(n,"key data"),(new i.ScopedKeys).deriveScopedKey({identifier:n.identifier,inputKey:e,keyRotationSecret:n.keyRotationSecret,keyRotationTimestamp:n.keyRotationTimestamp,uid:t})})}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function E(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function T(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?M(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e){var t=new Gn.a(e.ua),n=Object(nt.assign)(Object(nt.pick)(e,"city","country","ipAddress","region","ua"),{deviceType:t.genericDeviceType(),family:t.browser.name,OS:t.genericOSName()});this.set({remoteMetaData:n})}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t,n){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=(e=e.replace(/-/g,"+")).replace(/_/g,"/");for(var t=atob(e),n=t.length,i=new Uint8Array(n),r=0;n>r;r++)i[r]=t.charCodeAt(r);return i}function $(){return n.e(25).then(n.t.bind(null,409,7))}function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function J(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function re(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}function oe(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?se(e):t}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e,t){var n=this;return Promise.resolve().then(function(){n.relier.validateApprovalData(t),n.relier.set({code:t.code}),n.gotoState(e)}).catch(function(e){return n.trigger("error",e)})}function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(e,t,n){return(pe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=me(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(e,t,n){return(Ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ce(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e){return ki.a.trim(e)}function ke(e,t){return e.wantsKeys()||it.a.contains(Ri,t)}function Pe(e){var t=Object.create(e);for(var n in e)"function"==typeof e[n]&&(t[n]=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];var r=this[e].apply(this,n);return r.then?r.then(null,function(e){throw ht.a.toError(e)}):r}.bind(e,n));return t}function xe(e){return function(){for(var t=this,n=arguments.length,i=Array(n),r=0;n>r;r++)i[r]=arguments[r];return this._getClient().then(function(n){return e.apply(t,[n].concat(i))})}}function Ne(e){return function(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];return this._getClient().then(function(t){if(!it.a.isFunction(t[e]))throw Error("Invalid method on fxa-js-client: ".concat(e));return t[e].apply(t,n)})}}function Re(e,t,n){var i=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).sessionTokenContext;!i&&t.isSync()&&(i=ot.a.SESSION_TOKEN_USED_FOR_SYNC);var r={email:e,sessionToken:n.sessionToken,sessionTokenContext:i,uid:n.uid,verificationMethod:n.verificationMethod,verificationReason:n.verificationReason,verified:n.verified||!1};return ke(t,i)&&(r.unwrapBKey=n.unwrapBKey,r.keyFetchToken=n.keyFetchToken),r}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.client?this._client=Pe(e.client):e.authServerUrl&&(this._authServerUrl=e.authServerUrl)}function Me(e,t){t.metricsContext&&(e.metricsContext=t.metricsContext)}function Le(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window||window;"BroadcastChannel"in e&&(this._broadcastChannel=new e.BroadcastChannel(Mi),this._broadcastChannel.onmessage=this.onMessage.bind(this))}function Ve(e){throw gn.a.normalizeXHRError(e)}function Ue(e){this._oAuthUrl=(e=e||{}).oAuthUrl,this._xhr=e.xhr||Fi.a}function Fe(e){this.profileUrl=(e=e||{}).profileUrl}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Be(e){return"string"==typeof e?n(361)("./".concat(e)).then(function(e){return e.default?e.default:e}):Promise.resolve(e)}function Ge(e,t){return function(){var n=this;return Be(e).then(function(e){return n.showView(e,t)})}}function He(e,t,n){return function(){var i=this;return Promise.all([Be(e),Be(t)]).then(function(e){var t=je(e,2);return i.showChildView(t[0],t[1],n)})}}function We(e){return new pt.a.Model(e||{})}function Ke(e){return e&&e.request&&(e.request.url&&(e.request.url=ze(e.request.url)),e.tags&&e.tags.errno&&(e.fingerprint=["errno"+e.tags.errno],e.level="info"),e.exception&&e.exception.values&&it.a.each(e.exception.values,function(e){e.stacktrace&&e.stacktrace.frames&&it.a.each(e.stacktrace.frames,function(e){e.abs_path&&(e.abs_path=ze(e.abs_path))})}),e.request.headers&&e.request.headers.Referer&&(e.request.headers.Referer=ze(e.request.headers.Referer))),e}function ze(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t.indexOf("?"),i=t;return-1===n?i:(e=bn.a.searchParams(t.substring(n+1)),i=t.substring(0,n),it.a.isObject(e)&&(Object.keys(e).forEach(function(t){it.a.contains(Kr,t)||(e[t]="VALUE")}),i+=bn.a.objToSearchString(e)),i)}function qe(e,t){if(this._logger=new zt.a,this._release=t,e)try{Hr.e({release:t,dsn:e,beforeSend:Ke})}catch(e){this._logger.error(e)}else this._logger.error("No Sentry dsn provided")}function $e(e){Vi.a.call(this,e)}function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e){return!!(e&&e.get("email")&&e.get("uid"))}function tt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._authenticationBroker=e.broker,this._config=e.config||{},this._history=e.history||pt.a.history,this._metrics=e.metrics,this._notifier=e.notifier,this._refreshObserver=e.refreshObserver,this._relier=e.relier,this._router=e.router,this._sentryMetrics=e.sentryMetrics,this._storage=e.storage||Et.a,this._translator=e.translator,this._user=e.user,this._window=this.window=e.window||window}n.r(t);var nt=n(0),it=n.n(nt),rt=n(2),ot=n.n(rt),st=n(72);i.prototype={useConfig:function(e){this._config=e},fetch:function(){var e=this;return this._config?Promise.resolve(this._config):this._readConfigFromHTML().then(this._parseHTMLConfig).then(function(t){return t.lang=document.querySelector("html").getAttribute("lang"),e._setWebpackPublicPath(t.webpackPublicPath),t})},_readConfigFromHTML:function(){var e=document.querySelector('meta[name="fxa-content-server/config"]'),t=e&&e.getAttribute("content");return t?Promise.resolve(t):Promise.reject(i.Errors.toError("MISSING_CONFIG"))},_parseHTMLConfig:function(e){var t;try{t=JSON.parse(decodeURIComponent(e));var n=document.querySelector('meta[name="fxa-feature-flags"]'),r=decodeURIComponent(n?n.getAttribute("content"):"");t.featureFlags=JSON.parse(r)}catch(e){return Promise.reject(i.Errors.toError("INVALID_CONFIG"))}return Promise.resolve(t)},_setWebpackPublicPath:function(){n.p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot.a.DEFAULT_BUNDLE_PATH}};var at=function(e){return e};i.Errors=it.a.extend({},st.a,{ERRORS:{MISSING_CONFIG:{errno:1e3,message:at("Missing configuration")},INVALID_CONFIG:{errno:1001,message:at("Invalid configuration")}},NAMESPACE:"config"});var ct=i,ut=n(258),lt=n.n(ut),dt=n(164),ht=n(1),ft=n(6),pt=n.n(ft),mt=n(4),gt=n(61),vt=n.n(gt),_t=n(89),yt=n(19),wt=n(101),bt=n(51),Et=n(37),St="verificationInfo",At=pt.a.Model.prototype,It=pt.a.Model.extend({initialize:function(e,t){At.initialize.call(this,e,t),this._email=t.email,this._namespace=t.namespace,this._uid=t.uid,this._window=t.window||window,this._storage=t.storage||new Et.a(this._window.localStorage)},_STORAGE_KEY:St,_getUsersStorageId:function(){return this._uid||this._email},persist:function(){var e=this._getUsersStorageId();if(e){var t=this._storage.get(St)||{};t[e]=t[e]||{},t[e][this._namespace]=this.toJSON(),this._storage.set(St,t)}},load:function(){if(this._getUsersStorageId()){var e=this._storage.get(St)||{},t=e[this._uid]||e[this._email];t&&this.set(t[this._namespace]||{})}},clear:function(){var e=this._getUsersStorageId();if(e){var t=this._storage.get(St)||{};t[e]&&(delete t[e][this._namespace],Object.keys(t[e]).length||delete t[e],this._storage.set(St,t))}}}),Ct=n(58),Tt=n(91),Ot=n(3),kt=n(46),Pt=n(16),xt=function(e){return e},Nt={automatedBrowser:Ot.a.boolean()},Rt=pt.a.Model.extend({type:"base",initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.relier=t.relier,this.window=t.window||window,this.environment=new vt.a(this.window),this._behaviors=new pt.a.Model(this.defaultBehaviors),this._capabilities=new pt.a.Model(this.defaultCapabilities),this._fxaClient=t.fxaClient,this._metrics=t.metrics,this._notificationChannel=t.notificationChannel,this._notificationChannel){var n=this._notificationChannel.isFxaStatusSupported()||t.fxaStatus;this.setCapability("fxaStatus",n),n&&this.on("fxa_status",function(t){return e.onFxaStatus(t)})}},onFxaStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setCapability("supportsPairing",e.capabilities&&e.capabilities.pairing)},notifications:{"once!view-shown":"afterLoaded"},defaultBehaviors:{afterChangePassword:new bt.default,afterCompletePrimaryEmail:new Tt.default(new yt.default("primary_email_verified"),{success:xt("Primary email verified successfully")}),afterCompleteResetPassword:new bt.default,afterCompleteSecondaryEmail:new Tt.default(new yt.default("secondary_email_verified"),{success:xt("Secondary email verified successfully")}),afterCompleteSignIn:new yt.default("signin_verified"),afterCompleteSignInWithCode:new yt.default("settings"),afterCompleteSignUp:new wt.default("signup_verified"),afterDeleteAccount:new bt.default,afterForceAuth:new yt.default("signin_confirmed"),afterResetPasswordConfirmationPoll:new bt.default,afterSignIn:new yt.default("signin_confirmed"),afterSignInConfirmationPoll:new yt.default("signin_confirmed"),afterSignUp:new yt.default("confirm"),afterSignUpConfirmationPoll:new wt.default("signup_confirmed"),afterSignUpRequireTOTP:new yt.default("signin"),beforeSignIn:new bt.default,beforeSignUpConfirmationPoll:new bt.default},setBehavior:function(e,t){this._behaviors.set(e,t)},getBehavior:function(e){if(!this._behaviors.has(e))throw Error("behavior not found for: "+e);return this._behaviors.get(e)},fetch:function(){var e=this;return Promise.resolve().then(function(){var t=e._isPairing();if(e._isForceAuth=e._isForceAuthUrl(),e.importSearchParamsUsingSchema(Nt,ht.a),e.setCapability("showSecurityEvents",!!e.getSearchParam("security_events")),e.hasCapability("fxaStatus"))return e._fetchFxaStatus({isPairing:t})}).then(function(){var t=e.relier&&e.relier.get("signinCode");if(t)return e._consumeSigninCode(t)})},openPairPreferences:function(){if(this.hasCapability("supportsPairing")){var e=this._notificationChannel;return e.send(e.COMMANDS.PAIR_PREFERENCES)}},_fetchFxaStatus:function(){var e=this,t=this._notificationChannel;return t.request(t.COMMANDS.FXA_STATUS,{isPairing:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isPairing,service:this.relier.get("service")}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.set("browserSignedInAccount",t.signedInUser),e.trigger("fxa_status",t)},function(t){if(!ht.a.is(t,"INVALID_WEB_CHANNEL"))throw t;e.setCapability("fxaStatus",!1)})},_consumeSigninCode:function(e){var t=this;this._metrics._initializeFlowModel();var n=this._metrics.getFlowEventMetadata();return this._fxaClient.consumeSigninCode(e,n.flowId,n.flowBeginTime).then(function(e){t.set("signinCodeAccount",e)},function(e){t._metrics.logError(e)})},afterLoaded:function(){return Promise.resolve()},beforeSignIn:function(){return Promise.resolve(this.getBehavior("beforeSignIn"))},afterSignIn:function(){return Promise.resolve(this.getBehavior("afterSignIn"))},afterSignInConfirmationPoll:function(){return Promise.resolve(this.getBehavior("afterSignInConfirmationPoll"))},afterCompleteSignIn:function(e){var t=this;return this.unpersistVerificationData(e).then(function(){return t.getBehavior("afterCompleteSignIn")})},afterCompleteSignInWithCode:function(){return Promise.resolve(this.getBehavior("afterCompleteSignInWithCode"))},afterCompletePrimaryEmail:function(e){var t=this;return this.unpersistVerificationData(e).then(function(){return t.getBehavior("afterCompletePrimaryEmail")})},afterCompleteSecondaryEmail:function(e){var t=this;return this.unpersistVerificationData(e).then(function(){return t.getBehavior("afterCompleteSecondaryEmail")})},afterForceAuth:function(){return Promise.resolve(this.getBehavior("afterForceAuth"))},persistVerificationData:function(e){var t=this;return Promise.resolve().then(function(){var n=r(e,"context");return n.set({context:t.relier.get("context")}),n.persist()})},unpersistVerificationData:function(e){return Promise.resolve().then(function(){!function(e,t){r(e,t).clear()}(e,"context")})},afterSignUp:function(e){return e.get("verified")?this.afterSignUpConfirmationPoll(e):Promise.resolve(this.getBehavior("afterSignUp"))},beforeSignUpConfirmationPoll:function(){return Promise.resolve(this.getBehavior("beforeSignUpConfirmationPoll"))},afterSignUpConfirmationPoll:function(e){var t=this;return this.unpersistVerificationData(e).then(function(){return t.getBehavior("afterSignUpConfirmationPoll")})},afterCompleteSignUp:function(e){var t=this;return this.unpersistVerificationData(e).then(function(){return t.getBehavior("afterCompleteSignUp")})},afterResetPasswordConfirmationPoll:function(e){var t=this;return Promise.resolve().then(function(){return e.get("verificationMethod")===kt.a.TOTP_2FA&&e.get("verificationReason")===Pt.a.SIGN_IN?new yt.default("signin_totp_code",{account:e}):t.getBehavior("afterResetPasswordConfirmationPoll")})},afterCompleteResetPassword:function(e){var t=this;return this.unpersistVerificationData(e).then(function(){return e.get("verificationMethod")===kt.a.TOTP_2FA&&e.get("verificationReason")===Pt.a.SIGN_IN?new yt.default("signin_totp_code",{account:e}):t.getBehavior("afterCompleteResetPassword")})},afterChangePassword:function(){return Promise.resolve(this.getBehavior("afterChangePassword"))},afterDeleteAccount:function(){return Promise.resolve(this.getBehavior("afterDeleteAccount"))},transformLink:function(e){return e},isForceAuth:function(){return!!this._isForceAuth},_isForceAuthUrl:function(){var e=this.window.location.pathname;return"/force_auth"===e||"/oauth/force_auth"===e},_isPairing:function(){return 0===this.window.location.pathname.indexOf("/pair")},isAutomatedBrowser:function(){return!!this.get("automatedBrowser")},defaultCapabilities:{allowUidChange:!1,browserTransitionsAfterEmailVerification:!1,disableLegacySigninSignup:!1,emailFirst:!1,emailVerificationMarketingSnippet:!0,fxaStatus:!1,handleSignedInNotification:!0,reuseExistingSession:!1,signup:!0,showSecurityEvents:!1,signupCode:!0,supportsPairing:!1,syncOptional:!1,tokenCode:!0},hasCapability:function(e){return this._capabilities.has(e)&&!!this._capabilities.get(e)},setCapability:function(e,t){this._capabilities.set(e,t)},unsetCapability:function(e){this._capabilities.unset(e)},getCapability:function(e){return this._capabilities.get(e)}});mt.a.mixin(Rt,_t.a,Ct.a);var Dt=Rt,Mt=n(98),Lt=n(73),Vt=n(21),Ut=function(e){return e},Ft=[{checked:!0,id:"bookmarks",text:Ut("Bookmarks")},{checked:!0,id:"history",text:Ut("History")},{checked:!0,id:"passwords",text:Ut("Logins and Passwords")},{checked:!0,id:"addons",text:Ut("Add-ons")},{checked:!0,id:"tabs",text:Ut("Open Tabs")},{checked:!0,id:"prefs",text:Ut("Preferences")},{checked:!0,id:"addresses",test:function(){return!1},text:Ut("Addresses")},{checked:!0,id:"creditcards",test:function(){return!1},text:Ut("Credit Cards")}],jt=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,c(e).apply(this,arguments))}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(e,pt.a.Collection),t=e,i=[{key:"getEngineConfig",value:function(e){return it.a.find(Ft,function(t){return t.id===e})}}],(n=[{key:"initialize",value:function(){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.window=t.window,(t.engines||this.getSupportedEngineIds()).forEach(function(t){return e.addById(t)})}},{key:"getSupportedEngineIds",value:function(){var e=this,t=this.getUserAgent(),n=Ft.map(function(e){return e.id});return it.a.filter(n,function(n){return e.isEngineSupportedByUA(n,t)})}},{key:"isEngineSupportedByUA",value:function(t,n){var i=e.getEngineConfig(t);return!i.test||i.test(n)}},{key:"addById",value:function(t){var n=e.getEngineConfig(t);n&&!this.get(t)&&this.add(n)}}])&&s(t.prototype,n),i&&s(t,i),e}();mt.a.mixin(jt,Lt.a,Vt.a);var Bt=jt,Gt=Dt.prototype,Ht=Dt.extend({defaultBehaviors:it.a.extend({},Gt.defaultBehaviors,{afterCompleteSignIn:new Mt.default(Gt.defaultBehaviors.afterCompleteSignIn),afterCompleteSignUp:new Mt.default(Gt.defaultBehaviors.afterCompleteSignUp),afterSignIn:new Mt.default(Gt.defaultBehaviors.afterSignIn)}),type:"fx-sync",initialize:function(){var e=this;Gt.initialize.call(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});var t=new Bt(null,{window:this.window});this.set("chooseWhatToSyncWebV1Engines",t),this.hasCapability("fxaStatus")&&this.on("fxa_status",function(t){return e.onFxaStatus(t)})},onFxaStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.get("chooseWhatToSyncWebV1Engines"),n=e.capabilities&&e.capabilities.multiService;this.relier.set("multiService",n),this.setCapability("syncOptional",n&&"sync"!==this.relier.get("service")),n&&(this.relier.has("service")||(this.relier.set("service",e.clientId),this._metrics.setService(e.clientId)));var i=e.capabilities&&e.capabilities.engines;return t&&i&&this.addAdditionalSyncEngines(i),Gt.onFxaStatus.call(this,e)},addAdditionalSyncEngines:function(e){var t=this.get("chooseWhatToSyncWebV1Engines");t&&e.forEach(function(e){return t.addById(e)})},afterSignInConfirmationPoll:function(e){var t=this;return Gt.afterSignInConfirmationPoll.call(this,e).then(function(e){return t.hasCapability("browserTransitionsAfterEmailVerification")?e:(t._metrics.setViewNamePrefix("signin"),new Mt.default(e))})},afterSignUpConfirmationPoll:function(e){var t=this;return Gt.afterSignUpConfirmationPoll.call(this,e).then(function(e){return t.hasCapability("browserTransitionsAfterEmailVerification")?e:(t._metrics.setViewNamePrefix("signup"),new Mt.default(e))})}}),Wt=n(93),Kt={getChannel:function(){return this._channel||(this._channel=this.createChannel()),this._channel},getCommand:function(e){if(!this.commands)throw Error("this.commands must be specified");var t=this.commands[e];if(!t)throw Error("command not found for: "+e);return t},send:function(e,t){var n=this.getChannel(),i=l(n.send.bind(n));return i(e,t)},request:function(e,t){var n=this.getChannel(),i=l((n.request||n.send).bind(n));return i(e,t)}},zt=n(32),qt=Ht.prototype,$t=["declinedSyncEngines","email","keyFetchToken","offeredSyncEngines","sessionToken","services","uid","unwrapBKey","verified"],Yt=["email","keyFetchToken","sessionToken","uid","unwrapBKey","verified"],Xt=Ht.extend({type:"fx-sync-channel",commands:null,defaultCapabilities:it.a.extend({},qt.defaultCapabilities,{sendChangePasswordNotice:!0}),initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._logger=new zt.a,this._channel=e.channel,e.commands&&(this.commands=e.commands),qt.initialize.call(this,e)},afterLoaded:function(){var e=this;return this.send(this.getCommand("LOADED")).then(function(){return qt.afterLoaded.call(e)})},beforeSignIn:function(e){var t=this,n=e.get("email");return this._verifiedCanLinkEmail===n?qt.beforeSignIn.call(this,e):this.request(this.getCommand("CAN_LINK_ACCOUNT"),{email:n}).then(function(i){if(i&&!i.ok)throw ht.a.toError("USER_CANCELED_LOGIN");return t._verifiedCanLinkEmail=n,qt.beforeSignIn.call(t,e)},function(e){t._logger.error("beforeSignIn failed with",e)})},afterSignIn:function(e){var t=this;return this._notifyRelierOfLogin(e).then(function(){return qt.afterSignIn.call(t,e)})},afterForceAuth:function(e){var t=this;return this._notifyRelierOfLogin(e).then(function(){return qt.afterForceAuth.apply(t,e)})},beforeSignUpConfirmationPoll:function(e){var t=this;return this._notifyRelierOfLogin(e).then(function(){return qt.beforeSignUpConfirmationPoll.call(t,e)})},afterSignUpConfirmationPoll:function(e){var t=this;return this._notifyRelierOfLogin(e).then(function(){return qt.afterSignUpConfirmationPoll.call(t,e)})},afterChangePassword:function(e){var t=this;return this.hasCapability("sendChangePasswordNotice")?this.send(this.getCommand("CHANGE_PASSWORD"),this._getLoginData(e)).then(function(){return qt.afterChangePassword.call(t,e)}):qt.afterChangePassword.call(this,e)},afterDeleteAccount:function(e){var t=this;return this.send(this.getCommand("DELETE_ACCOUNT"),{email:e.get("email"),uid:e.get("uid")}).then(function(){return qt.afterDeleteAccount.call(t,e)})},getChannel:function(){return this._channel||(this._channel=this.createChannel()),this._channel},createChannel:function(){throw Error("createChannel must be overridden")},_notifyRelierOfLogin:function(e){var t=this._getLoginData(e);return this._hasRequiredLoginFields(t)?t.uid===this._uidOfLoginNotification?Promise.resolve():(this._uidOfLoginNotification=t.uid,this.send(this.getCommand("LOGIN"),t)):Promise.resolve()},_hasRequiredLoginFields:function(e){return!it.a.difference(Yt,Object.keys(e)).length},_getLoginData:function(e){var t=e.pick($t)||{};return this.relier&&this.relier.get("multiService")&&(t=this._formatForMultiServiceBrowser(t)),t.verified=!!t.verified,t.verifiedCanLinkAccount=!!this._verifiedCanLinkEmail,it.a.omit(t,it.a.isUndefined)},_formatForMultiServiceBrowser:function(e){return e.services={},(this.relier.get("syncPreference")||"sync"===this.relier.get("service"))&&(e.services.sync={},e.offeredSyncEngines&&(e.services.sync={offeredEngines:e.offeredSyncEngines,declinedEngines:e.declinedSyncEngines})),delete e.offeredSyncEngines,delete e.declinedSyncEngines,e}},{REQUIRED_LOGIN_FIELDS:Yt});mt.a.mixin(Xt,Kt);var Jt=Xt,Qt=n(52),Zt=Jt.prototype,en=Jt.extend({type:"fx-sync-web-channel",defaultCapabilities:it.a.extend({},Zt.defaultCapabilities,{sendChangePasswordNotice:!1}),commands:it.a.pick(Qt.a,"CAN_LINK_ACCOUNT","CHANGE_PASSWORD","DELETE_ACCOUNT","LOADED","LOGIN","VERIFIED"),createChannel:function(){var e=new Qt.a(ot.a.ACCOUNT_UPDATES_WEBCHANNEL_ID);return e.initialize({window:this.window}),e},afterCompleteResetPassword:function(e){var t=this;return Promise.resolve().then(function(){if(e.get("verified")&&!e.get("verificationReason")&&!e.get("verificationMethod"))return t._notifyRelierOfLogin(e)}).then(function(){return Zt.afterCompleteResetPassword.call(t,e)})},afterCompleteSignInWithCode:function(e){var t=this;return this._notifyRelierOfLogin(e).then(function(){return Zt.afterSignInConfirmationPoll.call(t,e)})}});mt.a.mixin(en,Kt);var tn=en,nn=tn.extend({defaultCapabilities:it.a.extend({},tn.prototype.defaultCapabilities,{openWebmailButtonVisible:!0}),type:"fx-desktop-v2"}),rn=nn.extend({defaultCapabilities:it.a.extend({},nn.prototype.defaultCapabilities,{allowUidChange:!0,disableLegacySigninSignup:!0,emailFirst:!0,tokenCode:!0}),type:"fx-desktop-v3"});mt.a.mixin(rn,Vt.a);var on=rn,sn=tn.extend({defaultCapabilities:it.a.extend({},tn.prototype.defaultCapabilities,{disableLegacySigninSignup:!0,emailFirst:!0,emailVerificationMarketingSnippet:!1}),type:"fx-fennec-v1"}),an=n(108);d.prototype={initialize:function(e){this._window=(e=e||{}).window},send:function(e,t,n){var i=this;return Promise.resolve().then(function(){return i.dispatchCommand(e,t,n)})},dispatchCommand:function(e,t){var n=this._window,i=function(e,t,n){return new e.CustomEvent("FirefoxAccountsCommand",{detail:{bubbles:!0,command:t,data:n}})}(n,e,t);n.dispatchEvent(i)},teardown:function(){}};var cn=d;it.a.extend(h.prototype,pt.a.Events,{initialize:function(e){this._origin=(e=e||{}).origin,this._window=e.window,this._boundReceiveEvent=this.receiveEvent.bind(this),this._window.addEventListener("message",this._boundReceiveEvent,!1),this._logger=new zt.a(this._window)},isOriginIgnored:function(e){return"chrome://browser"===e},isOriginTrusted:function(e){return"null"===e||this._origin===e},receiveEvent:function(e){if("message"===e.type){var t=e.origin;if(this.isOriginIgnored(t))this._logger.error("postMessage received from %s, ignoring",t);else if(this.isOriginTrusted(t))e.data?this.trigger("message",e.data):this.trigger("error",{error:Error("malformed event")});else{this._logger.error("postMessage received from %s, expected %s",t,this._origin);var n=ht.a.toError("UNEXPECTED_POSTMESSAGE_ORIGIN");n.context=t,this.trigger("error",{error:n})}}},teardown:function(){this._window.removeEventListener("message",this._boundReceiveEvent,!1)}});var un=h;it.a.extend(f.prototype,new an.a,{initialize:function(e){var t=(e=e||{}).window||window,n=this._sender=new cn;n.initialize({window:t});var i=this._receiver=new un;i.initialize({origin:e.origin,window:t}),an.a.prototype.initialize.call(this,{receiver:i,sender:n,window:t})},createMessageId:function(e){return e},parseMessage:function(e){if(!e||!e.content)throw Error("malformed message");var t=e.content;return{command:t.status,data:t.data,messageId:t.status}}});var ln,dn,hn=f,fn=n(49),pn=Jt.prototype,mn=Jt.extend({type:"fx-ios-v1",commands:{CAN_LINK_ACCOUNT:"can_link_account",CHANGE_PASSWORD:"change_password",DELETE_ACCOUNT:"delete_account",LOADED:"loaded",LOGIN:"login"},defaultBehaviors:it.a.extend({},pn.defaultBehaviors,{afterCompleteSignInWithCode:new yt.default("signin_confirmed"),afterForceAuth:new fn.default,afterResetPasswordConfirmationPoll:new fn.default,afterSignIn:new fn.default,afterSignInConfirmationPoll:new yt.default("signin_confirmed"),afterSignUpConfirmationPoll:new yt.default("signup_confirmed")}),defaultCapabilities:it.a.extend({},pn.defaultCapabilities,{browserTransitionsAfterEmailVerification:!0,disableLegacySigninSignup:!0,emailFirst:!0}),createChannel:function(){var e=new hn;return e.initialize({origin:this.window.location.origin,window:this.window}),e.on("error",this.trigger.bind(this,"error")),e},afterResetPasswordConfirmationPoll:function(e){var t=this;return this._notifyRelierOfLogin(e).then(function(){return pn.afterResetPasswordConfirmationPoll.call(t,e)})},_notifyRelierOfLogin:function(e){return pn._notifyRelierOfLogin.call(this,e)},afterCompleteSignInWithCode:function(e){var t=this;return this._notifyRelierOfLogin(e).then(function(){return pn.afterCompleteSignInWithCode.call(t,e)})}}),gn=n(13),vn=n(64),_n=n(30),yn={createEncryptedBundle:function(e,t,n,i){var r=Object.keys(n).map(function(i){return p(e.kB,t,n[i])});return Promise.all(r).then(function(e){var t={};return e.forEach(function(e){t[e.scope]=e}),Object(vn.a)().then(function(e){return(new e.DeriverUtils).encryptBundle(i,JSON.stringify(t))})})},_deriveScopedKeys:p},wn=n(76),bn=n(17),En=Dt.prototype,Sn={code:Ot.a.oauthCode().required(),state:Ot.a.string()},An=Dt.extend({type:"redirect",defaultBehaviors:it.a.extend({},En.defaultBehaviors,{afterForceAuth:new fn.default,afterSignIn:new fn.default,afterSignInConfirmationPoll:new fn.default}),defaultCapabilities:it.a.extend({},En.defaultCapabilities,{disableLegacySigninSignup:!0,emailFirst:!0,handleSignedInNotification:!1,reuseExistingSession:!0,tokenCode:!0}),initialize:function(e){return this.session=(e=e||{}).session,this._scopedKeys=yn,this._metrics=e.metrics,En.initialize.call(this,e)},DELAY_BROKER_RESPONSE_MS:100,sendOAuthResultToRelier:function(e){var t=this;return Promise.resolve().then(function(){var n={};e.error&&(n.error=e.error),e.action&&(n.action=e.action);var i=t.relier.get("state");i&&(n.state=i),t.window.location.href=bn.a.updateSearchString(e.redirect,n)})},getOAuthResult:function(e){var t=this;if(!e||!e.get("sessionToken"))return Promise.reject(ht.a.toError("INVALID_TOKEN"));var n=this.relier,i=n.get("clientId");return Promise.resolve().then(function(){if(n.wantsKeys())return t._provisionScopedKeys(e)}).then(function(t){var r={acr_values:n.get("acrValues"),code_challenge:n.get("codeChallenge"),code_challenge_method:n.get("codeChallengeMethod"),scope:n.get("scope")};return t&&(r.keys_jwe=t),n.get("accessType")===ot.a.ACCESS_TYPE_OFFLINE&&(r.access_type=ot.a.ACCESS_TYPE_OFFLINE),e.createOAuthCode(i,n.get("state"),r)}).then(function(e){if(!e)return Promise.reject(gn.a.toError("INVALID_RESULT"));delete e.redirect;var t=wn.a.transformUsingSchema(e,Sn,gn.a);return t.redirect=bn.a.updateSearchString(n.get("redirectUri"),{code:t.code,state:t.state}),t})},_provisionScopedKeys:function(e){var t=this,n=this.relier,i=e.get("uid");return Promise.resolve().then(function(){if(e.canFetchKeys())return e.getOAuthScopedKeyData(n.get("clientId"),n.get("scope"))}).then(function(r){return r&&0!==Object.keys(r).length?e.accountKeys().then(function(e){return t._scopedKeys.createEncryptedBundle(e,i,r,n.get("keysJwk"))}):null})},afterForceAuth:function(e){var t=this;return this.finishOAuthSignInFlow(e).then(function(){return En.afterForceAuth.call(t,e)})},afterSignIn:function(e){var t=this;return this.finishOAuthSignInFlow(e).then(function(){return En.afterSignIn.call(t,e)})},afterSignInConfirmationPoll:function(e){var t=this;return this.finishOAuthSignInFlow(e).then(function(){return En.afterSignInConfirmationPoll.call(t,e)})},afterCompleteSignInWithCode:function(e){var t=this;return this.finishOAuthSignInFlow(e).then(function(){return En.afterSignIn.call(t,e)})},afterSignUpConfirmationPoll:function(e){return this.relier.wantsTwoStepAuthentication()?this.getBehavior("afterSignUpRequireTOTP"):this.finishOAuthSignUpFlow(e)},afterResetPasswordConfirmationPoll:function(e){var t=this;return Promise.resolve().then(function(){return!e.get("verified")||e.get("verificationReason")||e.get("verificationMethod")?En.afterResetPasswordConfirmationPoll.call(t,e):t.finishOAuthSignInFlow(e)})},transformLink:function(e){"/"!==e[0]&&(e="/"+e),/^\/(force_auth|signin|signup)?$/.test(e)&&(e="/oauth"+e);var t=bn.a.searchParams(this.window.location.search);return bn.a.updateSearchString(e,t)},setOriginalTabMarker:function(){this.window.sessionStorage.setItem("originalTab","1")},isOriginalTab:function(){return!!this.window.sessionStorage.getItem("originalTab")},clearOriginalTabMarker:function(){this.window.sessionStorage.removeItem("originalTab")},persistVerificationData:function(e){var t=this;return Promise.resolve().then(function(){var n=t.relier;return t.session.set("oauth",{access_type:n.get("access_type"),action:n.get("action"),client_id:n.get("clientId"),code_challenge:n.get("codeChallenge"),code_challenge_method:n.get("codeChallengeMethod"),keys:n.get("keys"),scope:n.get("scope"),state:n.get("state")}),t.setOriginalTabMarker(),En.persistVerificationData.call(t,e)})},finishOAuthSignInFlow:function(e){return this.finishOAuthFlow(e,{action:ot.a.OAUTH_ACTION_SIGNIN})},finishOAuthSignUpFlow:function(e){return this.finishOAuthFlow(e,{action:ot.a.OAUTH_ACTION_SIGNUP})},finishOAuthFlow:function(e,t){var n=this;return this.session.clear("oauth"),Promise.resolve().then(function(){return n.clearOriginalTabMarker(),n.getOAuthResult(e).then(function(i){return i=it.a.extend(i,t),n._metrics.flush().then(function(){return n.sendOAuthResultToRelier(i,e)})})})},afterCompleteResetPassword:function(e){var t=this;return En.afterCompleteResetPassword.call(this,e).then(function(n){return e.get("verified")&&!e.get("verificationReason")&&!e.get("verificationMethod")&&t.isOriginalTab()?t.finishOAuthSignInFlow(e):t.isOriginalTab()?n:e.get("verificationMethod")===kt.a.TOTP_2FA&&e.get("verificationReason")===Pt.a.SIGN_IN&&t.relier.has("state")?new yt.default("signin_totp_code",{account:e}):new bt.default})},afterCompleteSignUp:(ln="afterCompleteSignUp",dn="finishOAuthSignUpFlow",function(e){var t=this;return En[ln].call(this,e).then(function(e){return Wt.a.delay(t.DELAY_BROKER_RESPONSE_MS).then(function(){return e})}).then(function(n){return t.isOriginalTab()?t[dn](e).then(function(){return new fn.default}):n})})}),In=An.prototype,Cn=An.extend({defaultBehaviors:it.a.extend({},In.defaultBehaviors,{afterForceAuth:new fn.default,afterSignIn:new fn.default}),defaultCapabilities:it.a.extend({},In.defaultCapabilities,{chooseWhatToSyncWebV1:!0,openWebmailButtonVisible:!1}),commands:it.a.pick(Qt.a,"FXA_STATUS","OAUTH_LOGIN"),type:"oauth-webchannel-v1",initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.session=t.session,this._channel=t.channel,this._scopedKeys=yn,this._metrics=t.metrics,t.fxaStatus=!0,In.initialize.call(this,t),this.setCapability("fxaStatus",!0),this.on("fxa_status",function(t){return e.onFxaStatus(t)})},onFxaStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.capabilities&&e.capabilities.choose_what_to_sync||!1))return this.set("chooseWhatToSyncWebV1Engines",null);var t=e.capabilities&&e.capabilities.engines;if(t){var n=new Bt(null,{engines:t,window:this.window});return this.set("chooseWhatToSyncWebV1Engines",n)}return In.onFxaStatus.call(this,e)},createChannel:function(){var e=new Qt.a(ot.a.ACCOUNT_UPDATES_WEBCHANNEL_ID);return e.initialize({window:this.window}),e},DELAY_BROKER_RESPONSE_MS:100,sendOAuthResultToRelier:function(e,t){e.redirect=ot.a.OAUTH_WEBCHANNEL_REDIRECT,t&&t.get("declinedSyncEngines")&&(e.declinedSyncEngines=t.get("declinedSyncEngines"),e.offeredSyncEngines=t.get("offeredSyncEngines"));var n=this.relier.get("state");return n&&(e.state=n),this.send(this.getCommand("OAUTH_LOGIN"),e)}});mt.a.mixin(Cn,Kt);var Tn=Cn,On=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,_(e).apply(this,arguments))}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(e,An),t=e,(n=[{key:"afterSignInConfirmationPoll",value:function(e){return new yt.default("signin_confirmed",{account:e,continueBrokerMethod:"finishOAuthSignInFlow"})}},{key:"afterSignUpConfirmationPoll",value:function(e){return new yt.default("signup_confirmed",{account:e,continueBrokerMethod:"finishOAuthSignUpFlow"})}}])&&g(t.prototype,n),i&&g(t,i),e}(),kn=function(e){return e},Pn=Dt.prototype,xn=new wt.default("settings",{success:kn("Account verified successfully")}),Nn=new yt.default("settings",{success:kn("Password reset successfully")}),Rn=Dt.extend({defaultBehaviors:it.a.extend({},Pn.defaultBehaviors,{afterCompleteResetPassword:Nn,afterCompleteSignIn:new Tt.default(Pn.defaultBehaviors.afterCompleteSignIn),afterCompleteSignUp:new Tt.default(Pn.defaultBehaviors.afterCompleteSignUp),afterForceAuth:new yt.default("settings"),afterResetPasswordConfirmationPoll:xn,afterSignIn:new yt.default("settings"),afterSignInConfirmationPoll:xn,afterSignUpConfirmationPoll:xn}),defaultCapabilities:it.a.extend({},Pn.defaultCapabilities,{disableLegacySigninSignup:!0,emailFirst:!0,reuseExistingSession:!0}),type:rt.CONTENT_SERVER_CONTEXT}),Dn=function(){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(n=E(this,S(e).call(this,t,i))).broker=i.broker,n.notifier=i.notifier,n.parent=i.parent,n.oAuthClient=i.oAuthClient,n.relier=i.relier,n}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(e,ft["Model"]),t=e,(n=[{key:"gotoState",value:function(e,t){this.trigger("goto.state",e,t)}},{key:"navigate",value:function(e,t){this.notifier.trigger("navigate",{nextViewData:Object(nt.assign)(this.toJSON(),t),routerOptions:{replace:!0,trigger:!0},url:e})}}])&&b(t.prototype,n),i&&b(t,i),e}(),Mn=function(){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(n=T(this,O(e).call(this,t,i))).broker=i.broker,n.pairingChannelClient=i.pairingChannelClient,n.notifier=i.notifier,n.relier=i.relier,n}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(e,ft["Model"]),t=e,(n=[{key:"createState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.state&&this.state.destroy(),this.state=new e(t,{broker:this.broker,notifier:this.notifier,pairingChannelClient:this.pairingChannelClient,parent:this,relier:this.relier}),this.listenTo(this.state,"goto.state",this.createState)}}])&&C(t.prototype,n),i&&C(t,i),e}(),Ln=function(){function e(){var t,n;N(this,e);for(var i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];return U(M(n=R(this,(t=D(e)).call.apply(t,[this].concat(r)))),"name","WaitForAuthorizations"),n.navigate("pair/auth/allow"),n.listenTo(n.notifier,"pair:supp:authorize",function(){n.gotoState(Un)}),n.listenTo(n.notifier,"pair:auth:authorize",function(e){n.gotoState(Vn,e)}),n}return L(e,Dn),e}(),Vn=function(){function e(){var t,n;N(this,e);for(var i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];return U(M(n=R(this,(t=D(e)).call.apply(t,[this].concat(r)))),"name","WaitForSupplicantAuthorize"),n.navigate("/pair/auth/wait_for_supp"),n.listenTo(n.notifier,"pair:supp:authorize",function(){n.gotoState(Fn,{})}),n}return L(e,Dn),e}(),Un=function(){function e(){var t,n;N(this,e);for(var i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];return U(M(n=R(this,(t=D(e)).call.apply(t,[this].concat(r)))),"name","WaitForAuthApprove"),n.listenTo(n.notifier,"pair:auth:authorize",function(){n.gotoState(Fn)}),n}return L(e,Dn),e}(),Fn=function(){function e(){var t,n;N(this,e);for(var i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];return(n=R(this,(t=D(e)).call.apply(t,[this].concat(r)))).navigate("pair/auth/complete"),n}return L(e,Dn),e}(),jn=function(){function e(){var t,n;N(this,e);for(var i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];return(n=R(this,(t=D(e)).call.apply(t,[this].concat(r)))).navigate("pair/failure"),n}return L(e,Dn),e}(),Bn=function(){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N(this,e),(n=R(this,D(e).call(this,t,i))).createState(Ln),n}var t,n,i;return L(e,Mn),t=e,(n=[{key:"heartbeatError",value:function(e){this.createState(jn,{error:e})}}])&&P(t.prototype,n),i&&P(t,i),e}(),Gn=n(92),Hn=function(){function e(){var t,n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,s=Array(o),a=0;o>a;a++)s[a]=arguments[a];return i=this,z(G(n=!(r=(t=W(e)).call.apply(t,[this].concat(s)))||"object"!==j(r)&&"function"!=typeof r?G(i):r),"type","authority"),z(G(n),"setRemoteMetaData",F),n}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(e,Dt),t=e,(n=[{key:"initialize",value:function(t){H(W(e.prototype),"initialize",this).call(this,t);var n=t.notifier;if(!t.config.pairingClients.includes(this.relier.get("clientId")))throw gn.a.toError("INVALID_PAIRING_CLIENT");this.stateMachine=new Bn({},{broker:this,notifier:n,relier:this.relier})}},{key:"fetch",value:function(){var t=this;return Promise.resolve().then(function(){return H(W(e.prototype),"fetch",t).call(t)}).then(function(){return t.getSupplicantMetadata()}).then(function(){return t.startHeartbeat()})}},{key:"startHeartbeat",value:function(){var e=this;this._heartbeatInterval=setInterval(function(){return e.heartbeat()},arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3)}},{key:"stopHeartbeat",value:function(){clearInterval(this._heartbeatInterval)}},{key:"heartbeat",value:function(){var e=this;this.request(this._notificationChannel.COMMANDS.PAIR_HEARTBEAT).then(function(t){t.err?e.stateMachine.heartbeatError(t.err):t.suppAuthorized&&e.notifier.trigger("pair:supp:authorize")})}},{key:"getSupplicantMetadata",value:function(){var e=this,t=this.get("remoteMetaData");return t?Promise.resolve(t):this.request(this._notificationChannel.COMMANDS.PAIR_REQUEST_SUPPLICANT_METADATA).then(function(t){return e.setRemoteMetaData(t),e.get("remoteMetaData")})}},{key:"afterPairAuthAllow",value:function(){var e=this;return this.request(this._notificationChannel.COMMANDS.PAIR_AUTHORIZE).then(function(){e.notifier.trigger("pair:auth:authorize")})}},{key:"afterPairAuthDecline",value:function(){return this.request(this._notificationChannel.COMMANDS.PAIR_DECLINE)}},{key:"afterPairAuthComplete",value:function(){return this.request(this._notificationChannel.COMMANDS.PAIR_COMPLETE)}},{key:"request",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.resolve().then(function(){return n.channel_id=t.relier.get("channelId"),t._notificationChannel.request(e,n)})}}])&&B(t.prototype,n),i&&B(t,i),e}(),Wn=function(e){return e},Kn=Wn("Unexpected error"),zn=Object(nt.assign)({},st.a,{NAMESPACE:"channel-server",ERRORS:{UNEXPECTED_ERROR:{errno:999,message:Kn},INVALID_CONFIGURATION:{errno:1e3,message:"Invalid channel server configuration"},ALREADY_CONNECTED:{errno:1001,message:"Already connected to channel server"},NOT_CONNECTED:{errno:1002,message:"Not connected to channel server"},INVALID_MESSAGE:{errno:1003,message:Wn("Invalid message from the remote device")},INVALID_OUTBOUND_MESSAGE:{errno:1004,message:"Sending a malformed message"},CHANNEL_ID_MISMATCH:{errno:1005,message:Wn("Error pairing to remote device")},CONNECTION_CLOSED:{errno:1006,message:Wn("Connection to remote device closed, please try again")}}}),qn=n(113),$n={data:Ot.a.any(),message:Ot.a.string().required()},Yn={city:Ot.a.string(),country:Ot.a.string(),region:Ot.a.string(),remote:Ot.a.string(),ua:Ot.a.string()},Xn=function(){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=J(this,Q(e).call(this,n,i))).sentryMetrics=i.sentryMetrics||qn,t._importPairingChannel=i.importPairingChannel||$,t}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(e,ft["Model"]),t=e,(n=[{key:"open",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.get("channelServerUri"),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.get("channelId"),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.get("channelKey");return this._importPairingChannel().then(function(r){if(e.channel)throw zn.toError("ALREADY_CONNECTED");if(!t||!n||!i)throw zn.toError("INVALID_CONFIGURATION");var o=q(i);return r.PairingChannel.connect(t,n,o).then(function(t){e.channel=t,e.trigger("connected"),e.channel.addEventListener("message",e._messageHandler.bind(e)),e.channel.addEventListener("error",e._errorHandler.bind(e)),e.channel.addEventListener("close",e._closeHandler.bind(e))}).catch(function(t){e.sentryMetrics.captureException(t),e.trigger("error",t)})})}},{key:"close",value:function(){var e=this;return Promise.resolve().then(function(){if(!e.channel)throw zn.toError("NOT_CONNECTED");return e.channel.close().then(function(){e.channel=null},function(t){e.channel=null,e.sentryMetrics.captureException(t)})})}},{key:"send",value:function(e){return this.channel?e?this.channel.send({data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},message:e}):Promise.reject(zn.toError("INVALID_OUTBOUND_MESSAGE")):Promise.reject(zn.toError("NOT_CONNECTED"))}},{key:"_messageHandler",value:function(e){try{var t=e.detail,n=t.data,i=t.sender,r=Ot.a.validate(n,$n),o=Ot.a.validate(i,Yn);if(r.error||o.error)throw zn.toError("INVALID_MESSAGE");var s=n.data,a=void 0===s?{}:s,c=n.message;a.remoteMetaData=Object(nt.pick)(i,"city","country","region","ua"),a.remoteMetaData.ipAddress=i.remote,this.trigger("remote:".concat(c),a)}catch(e){this.sentryMetrics.captureException(e),this.trigger("error",e)}}},{key:"_errorHandler",value:function(e){this.sentryMetrics.captureException(e.detail),this.trigger("error",zn.toError("UNEXPECTED_ERROR"))}},{key:"_closeHandler",value:function(){this.trigger("close")}}])&&X(t.prototype,n),i&&X(t,i),e}(),Jn=function(){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ne(this,e),(n=oe(this,ae(e).call(this,t,i))).pairingChannelClient=i.pairingChannelClient,n.listenTo(n.pairingChannelClient,"close",function(){return n.socketClosed()}),n.listenTo(n.pairingChannelClient,"error",function(e){return n.socketError(e)}),n}return ce(e,Dn),re(e,[{key:"socketClosed",value:function(){this.navigate("pair/failure",{error:zn.toError("CONNECTION_CLOSED")})}},{key:"socketError",value:function(e){this.navigate("pair/failure",{error:e})}}]),e}(),Qn=function(){function e(){var t,n;ne(this,e);for(var i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];return ee(se(n=oe(this,(t=ae(e)).call.apply(t,[this].concat(r)))),"name","WaitForConnectionToChannelServer"),n.listenTo(n.pairingChannelClient,"connected",function(){n.gotoState(Zn)}),n}return ce(e,Jn),re(e,[{key:"socketClosed",value:function(){}}]),e}(),Zn=function(){function e(){var t,n;ne(this,e);for(var i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];return ee(se(n=oe(this,(t=ae(e)).call.apply(t,[this].concat(r)))),"name","WaitForAccountMetadata"),n.pairingChannelClient.send("pair:supp:request",n.relier.getOAuthParams()).then(function(){n.listenTo(n.pairingChannelClient,"remote:pair:auth:metadata",function(e){n.broker.setRemoteMetaData(e.remoteMetaData),n.gotoState(ei,e)})}),n}return ce(e,Jn),e}(),ei=function(){function e(){var t,n;ne(this,e);for(var i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];return ee(se(n=oe(this,(t=ae(e)).call.apply(t,[this].concat(r)))),"name","WaitForApprovals"),ee(se(n),"onAuthorityAuthorize",le.bind(se(n),ti)),n.navigate("pair/supp/allow",{deviceName:n.get("deviceName")}),n.listenTo(n.pairingChannelClient,"remote:pair:auth:authorize",n.onAuthorityAuthorize),n.listenTo(n.notifier,"pair:supp:authorize",function(){n.pairingChannelClient.send("pair:supp:authorize").then(function(){n.gotoState(ni)})}),n}return ce(e,Jn),e}(),ti=function(){function e(){var t,n;ne(this,e);for(var i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];return ee(se(n=oe(this,(t=ae(e)).call.apply(t,[this].concat(r)))),"name","WaitForSupplicantAuthorize"),n.listenTo(n.notifier,"pair:supp:authorize",function(){n.pairingChannelClient.send("pair:supp:authorize").then(function(){return n.gotoState(ii)})}),n}return ce(e,Jn),e}(),ni=function(){function e(){var t,n;ne(this,e);for(var i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];return ee(se(n=oe(this,(t=ae(e)).call.apply(t,[this].concat(r)))),"name","WaitForAuthorityAuthorize"),ee(se(n),"onAuthorityAuthorize",le.bind(se(n),ii)),n.navigate("pair/supp/wait_for_auth"),n.listenTo(n.pairingChannelClient,"remote:pair:auth:authorize",n.onAuthorityAuthorize),n}return ce(e,Jn),e}(),ii=function(){function e(){var t,n;ne(this,e);for(var i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];return ee(se(n=oe(this,(t=ae(e)).call.apply(t,[this].concat(r)))),"name","SendResultToRelier"),n.broker.sendCodeToRelier().then(function(){n.gotoState(Dn)}).catch(function(e){return n.trigger("error",e)}),n}return ce(e,Jn),re(e,[{key:"socketClosed",value:function(){}}]),e}(),ri=function(){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ne(this,e),(n=oe(this,ae(e).call(this,t,i))).createState(Qn),n}return ce(e,Mn),e}(),oi={initialize:function(e){var t=e.config,n=e.notifier,i=e.relier;if(!t.pairingClients.includes(i.get("clientId")))throw gn.a.toError("INVALID_PAIRING_CLIENT");var r=t.pairingChannelServerUri,o=i.toJSON(),s=o.channelId,a=o.channelKey;if(!(s&&a&&r))throw Error("Failed to initialize supplicant");this.pairingChannelClient=new Xn({channelId:s,channelKey:a,channelServerUri:r},{importPairingChannel:e.importPairingChannel,notifier:n}),this.suppStateMachine=new ri({},{broker:this,notifier:n,pairingChannelClient:this.pairingChannelClient,relier:i}),this.pairingChannelClient.open()},afterSupplicantApprove:function(){var e=this;return Promise.resolve().then(function(){e.notifier.trigger("pair:supp:authorize")})},setRemoteMetaData:F},si=function(){function e(){var t,n,i,r,o,s,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var c=arguments.length,u=Array(c),l=0;c>l;l++)u[l]=arguments[l];return i=this,n=!(r=(t=me(e)).call.apply(t,[this].concat(u)))||"object"!==de(r)&&"function"!=typeof r?fe(i):r,o=fe(n),a="supplicant",(s="type")in o?Object.defineProperty(o,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[s]=a,n}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(e,An),t=e,(n=[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};pe(me(e.prototype),"initialize",this).call(this,t)}},{key:"sendCodeToRelier",value:function(){var e=this;return Promise.resolve().then(function(){var t=e.relier,n={action:"pairing",redirect:bn.a.updateSearchString(t.get("redirectUri"),t.pick("code","state"))};e.sendOAuthResultToRelier(n)})}}])&&he(t.prototype,n),i&&he(t,i),e}();mt.a.mixin(si,oi);var ai=si,ci=function(){function e(){var t,n,i,r,o,s,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var c=arguments.length,u=Array(c),l=0;c>l;l++)u[l]=arguments[l];return i=this,n=!(r=(t=ye(e)).call.apply(t,[this].concat(u)))||"object"!==ve(r)&&"function"!=typeof r?we(i):r,o=we(n),a="supplicant-webchannel",(s="type")in o?Object.defineProperty(o,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[s]=a,n}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(e,Tn),t=e,(n=[{key:"sendCodeToRelier",value:function(){var e=this;return Promise.resolve().then(function(){var t=e.relier,n={action:"pairing",code:t.get("code"),redirect:t.get("redirectUri"),state:t.get("state")};return e.sendOAuthResultToRelier(n)})}}])&&_e(t.prototype,n),i&&_e(t,i),e}();mt.a.mixin(ci,oi);var ui=[{context:ot.a.FX_SYNC_CONTEXT,Constructor:Ht},{context:ot.a.FX_DESKTOP_V3_CONTEXT,Constructor:on},{context:ot.a.FX_FENNEC_V1_CONTEXT,Constructor:sn},{context:ot.a.FX_IOS_V1_CONTEXT,Constructor:mn},{context:ot.a.OAUTH_CONTEXT,Constructor:An},{context:ot.a.OAUTH_WEBCHANNEL_CONTEXT,Constructor:Tn},{context:ot.a.OAUTH_CHROME_ANDROID_CONTEXT,Constructor:On},{context:ot.a.CONTENT_SERVER_CONTEXT,Constructor:Rn},{context:ot.a.DEVICE_PAIRING_AUTHORITY_CONTEXT,Constructor:Hn},{context:ot.a.DEVICE_PAIRING_SUPPLICANT_CONTEXT,Constructor:ai},{context:ot.a.DEVICE_PAIRING_WEBCHANNEL_SUPPLICANT_CONTEXT,Constructor:ci}].reduce(function(e,t){return e[t.context]=t.Constructor,e},{}),li=function(e){return ui[e]||Rn},di=n(103),hi=pt.a.Model.extend({defaults:{context:null,name:"base"},fetch:function(){return Promise.resolve(!0)},isOAuth:function(){return!1},isSync:function(){return!1},shouldOfferToSync:function(){return!1},wantsKeys:function(){return!1},wantsTwoStepAuthentication:function(){return!1},pickResumeTokenInfo:function(){return{}},isTrusted:function(){return!0},accountNeedsPermissions:function(){return!1}}),fi=n(57),pi={action:Ot.a.action(),coppa:Ot.a.boolean().renameTo("isCoppaEnabled"),entryPoint:Ot.a.string(),entrypoint:Ot.a.string(),entrypoint_experiment:Ot.a.string().renameTo("entrypointExperiment"),entrypoint_variation:Ot.a.string().renameTo("entrypointVariation"),migration:Ot.a.string().valid(ot.a.AMO_MIGRATION,ot.a.SYNC11_MIGRATION),reset_password_confirm:Ot.a.boolean().renameTo("resetPasswordConfirm"),setting:Ot.a.string(),style:Ot.a.string().valid(ot.a.STYLE_TRAILHEAD),uid:Ot.a.uid(),utm_campaign:Ot.a.string().renameTo("utmCampaign"),utm_content:Ot.a.string().renameTo("utmContent"),utm_medium:Ot.a.string().renameTo("utmMedium"),utm_source:Ot.a.string().renameTo("utmSource"),utm_term:Ot.a.string().renameTo("utmTerm")},mi={email:Ot.a.string().allow("")},gi={email:Ot.a.email()},vi=it.a.extend({},pi,{email:Ot.a.string(),redirectTo:Ot.a.url(),uid:Ot.a.string()}),_i=hi.extend({defaults:{context:ot.a.CONTENT_SERVER_CONTEXT,email:null,entrypoint:null,entrypointExperiment:null,entrypointVariation:null,migration:null,resetPasswordConfirm:!0,setting:null,style:null,uid:null,utmCampaign:null,utmContent:null,utmMedium:null,utmSource:null,utmTerm:null},initialize:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isVerification=e.isVerification,this.sentryMetrics=e.sentryMetrics,this.window=e.window||window},fetch:function(){var e=this;return Promise.resolve().then(function(){e.populateFromStringifiedResumeToken(e.getSearchParam("resume")),e.isVerification?e.importSearchParamsUsingSchema(vi,ht.a):(e.importSearchParamsUsingSchema(pi,ht.a),"email"===e.get("action")?e.importSearchParamsUsingSchema(mi,ht.a):e.importSearchParamsUsingSchema(gi,ht.a)),e.has("entryPoint")&&!e.has("entrypoint")&&e.set("entrypoint",e.get("entryPoint")),e.has("migration")&&e.unset("migration")})},resumeTokenFields:["entrypoint","entrypointExperiment","entrypointVariation","resetPasswordConfirm","style","utmCampaign","utmContent","utmMedium","utmSource","utmTerm"]});mt.a.mixin(_i,fi.a,Ct.a);var yi=_i,wi={id:Ot.a.hex().required().renameTo("clientId"),image_uri:Ot.a.url().allow("").renameTo("imageUri"),name:Ot.a.string().required().min(1).renameTo("serviceName"),redirect_uri:Ot.a.url().required().renameTo("redirectUri"),trusted:Ot.a.boolean().required()},bi={access_type:Ot.a.accessType().renameTo("accessType"),acr_values:Ot.a.string().renameTo("acrValues"),action:Ot.a.action(),client_id:Ot.a.clientId().required().renameTo("clientId"),code_challenge:Ot.a.codeChallenge().renameTo("codeChallenge"),code_challenge_method:Ot.a.codeChallengeMethod().renameTo("codeChallengeMethod"),keys_jwk:Ot.a.keysJwk().renameTo("keysJwk"),login_hint:Ot.a.email().renameTo("loginHint"),prompt:Ot.a.prompt(),redirect_uri:Ot.a.url().allow(ot.a.DEVICE_PAIRING_AUTHORITY_REDIRECT_URI).renameTo("redirectUri"),redirectTo:Ot.a.url(),return_on_error:Ot.a.boolean().renameTo("returnOnError"),scope:Ot.a.string().required().min(1),state:Ot.a.string()},Ei={access_type:Ot.a.accessType().renameTo("accessType"),acr_values:Ot.a.string().renameTo("acrValues"),action:Ot.a.string().min(1),client_id:Ot.a.clientId().required().renameTo("clientId"),code_challenge:Ot.a.codeChallenge().renameTo("codeChallenge"),code_challenge_method:Ot.a.codeChallengeMethod().renameTo("codeChallengeMethod"),prompt:Ot.a.prompt(),redirect_uri:Ot.a.url().renameTo("redirectUri"),scope:Ot.a.string().min(1),service:Ot.a.clientId(),state:Ot.a.string().min(1)},Si=yi.extend({defaults:it.a.extend({},yi.prototype.defaults,{accessType:null,acrValues:null,clientId:null,context:ot.a.OAUTH_CONTEXT,name:"oauth",keysJwk:null,permissions:null,prompt:null,redirectTo:null,redirectUri:null,scope:null,state:null}),initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yi.prototype.initialize.call(this,e,t),this._config=t.config,this._oAuthClient=t.oAuthClient,this._session=t.session,this._wantsScopeThatHasKeys=!1},fetch:function(){var e=this;return yi.prototype.fetch.call(this).then(function(){return e._isSuccessFlow()?e._setupSuccessFlow():e._isVerificationFlow()?e._setupVerificationFlow():e._setupSignInSignUpFlow(),e.has("service")||e.set("service",e.get("clientId")),e._setupOAuthRPInfo()}).then(function(){e.has("scope")&&e._normalizeScopesAndPermissions()}).then(function(){e._validateKeyScopeRequest()})},_normalizeScopesAndPermissions:function(){var e,t,n,i=this.scopeStrToArray(this.get("scope"));if(this.isTrusted()?this.wantsConsent()&&(t=ot.a.OAUTH_TRUSTED_PROFILE_SCOPE_EXPANSION,i=(n=it.a.without(e=i,ot.a.OAUTH_TRUSTED_PROFILE_SCOPE)).length!==e.length?it.a.union(n,t):e):i=function(e){return it.a.intersection(e,ot.a.OAUTH_UNTRUSTED_ALLOWED_PERMISSIONS)}(i),!i.length)throw gn.a.toInvalidParameterError("scope");this.set("scope",i.join(" ")),this.set("permissions",i)},isOAuth:function(){return!0},_isVerificationFlow:function(){return!!this.getSearchParam("code")},_isSuccessFlow:function(){return/oauth\/success/.test(this.window.location.pathname)},_setupVerificationFlow:function(){var e=this._session.oauth;e||(e={client_id:this.getSearchParam("service"),service:this.getSearchParam("service")});var t=wn.a.transformUsingSchema(e,Ei,gn.a);this.set(t)},_setupSignInSignUpFlow:function(){if(this.importSearchParamsUsingSchema(bi,gn.a),!this.get("email")&&this.get("loginHint")&&this.set("email",this.get("loginHint")),this.getSearchParam("service"))throw gn.a.toInvalidParameterError("service")},_setupSuccessFlow:function(){var e=this.window.location.pathname.split("/"),t=e[e.length-1];if(!t)throw gn.a.toError("INVALID_PARAMETER");this.set("clientId",t)},_setupOAuthRPInfo:function(){var e=this,t=this.get("clientId");return this._oAuthClient.getClientInfo(t).then(function(t){var n,i=wn.a.transformUsingSchema(t,wi,gn.a);if((n=e.get("redirectUri"))&&n!==i.redirectUri&&n!==ot.a.DEVICE_PAIRING_AUTHORITY_REDIRECT_URI)throw gn.a.toError("INCORRECT_REDIRECT");e.set(i)},function(e){throw gn.a.is(e,"INVALID_PARAMETER")&&e.validation&&e.validation.keys&&"client_id"===e.validation.keys[0]&&((e=gn.a.toError("UNKNOWN_CLIENT")).client_id=t),e})},isTrusted:function(){return this.get("trusted")},wantsConsent:function(){return this.get("prompt")===di.a.CONSENT},wantsTwoStepAuthentication:function(){var e=this.get("acrValues");return!!e&&e.split(" ").includes(ot.a.TWO_STEP_AUTHENTICATION_ACR)},wantsKeys:function(){return!!(this._config&&this._config.scopedKeysEnabled&&this.has("keysJwk")&&this._wantsScopeThatHasKeys)},_validateKeyScopeRequest:function(){var e=this;if(!this.has("keysJwk"))return!1;if(!this.get("scope"))return!1;var t=this._config.scopedKeysValidation||{};return this.scopeStrToArray(this.get("scope")).forEach(function(n){if(t.hasOwnProperty(n)){if(!t[n].redirectUris.includes(e.get("redirectUri")))throw Error("Invalid redirect parameter");e._wantsScopeThatHasKeys=!0}}),this._wantsScopeThatHasKeys},validatePromptNoneRequest:function(e){var t=this;return Promise.resolve().then(function(){if(!t._config.isPromptNoneEnabled)throw gn.a.toError("PROMPT_NONE_NOT_ENABLED");if(!t._config.isPromptNoneEnabledForClient)throw gn.a.toError("PROMPT_NONE_NOT_ENABLED_FOR_CLIENT");if(t.wantsKeys())throw gn.a.toError("PROMPT_NONE_WITH_KEYS");var n=t.get("email");if(!n)throw gn.a.toMissingParameterError("login_hint");if(e.isDefault()||!e.get("sessionToken"))throw gn.a.toError("PROMPT_NONE_NOT_SIGNED_IN");if(n!==e.get("email"))throw gn.a.toError("PROMPT_NONE_DIFFERENT_USER_SIGNED_IN");return e.sessionVerificationStatus()}).then(function(e){if(!e.verified)throw gn.a.toError("PROMPT_NONE_UNVERIFIED")})},accountNeedsPermissions:function(e){if(this.isTrusted()&&!this.wantsConsent())return!1;var t=e.getPermissionsWithValues(this.get("permissions"));return!e.hasSeenPermissions(this.get("clientId"),t)},scopeStrToArray:function(e){return it.a.isString(e)&&e.trim().length?it.a.uniq(e.split(/\s+|\++/g)):[]}}),Ai={channel_id:Ot.a.channelId().required().renameTo("channelId")},Ii=function(){function e(){var t,n,i,r,o,s,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var c=arguments.length,u=Array(c),l=0;c>l;l++)u[l]=arguments[l];return i=this,n=!(r=(t=Ce(e)).call.apply(t,[this].concat(u)))||"object"!==Ee(r)&&"function"!=typeof r?Ae(i):r,o=Ae(n),a="pairing-authority",(s="name")in o?Object.defineProperty(o,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[s]=a,n}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(e,Si),t=e,(n=[{key:"fetch",value:function(){var t=this;return Promise.resolve().then(function(){return t.importSearchParamsUsingSchema(Ai,gn.a),Ie(Ce(e.prototype),"fetch",t).call(t)})}}])&&Se(t.prototype,n),i&&Se(t,i),e}(),Ci=n(74),Ti=pt.a.Model.extend({defaults:{age:null,email:null,password:null}}),Oi=n(5),ki=n.n(Oi),Pi=n(147),xi=n(33),Ni=n(107),Ri=[ot.a.FX_DESKTOP_V1_CONTEXT,ot.a.FX_DESKTOP_V2_CONTEXT,ot.a.FX_DESKTOP_V3_CONTEXT,ot.a.FX_FENNEC_V1_CONTEXT];De.prototype={_getClient:function(){var e=this;return this._client?Promise.resolve(this._client):n.e(23).then(n.t.bind(null,408,7)).then(function(t){var n=new t.default(e._authServerUrl);return e._client=Pe(n),e._client})},getRandomBytes:Ne("getRandomBytes"),checkPassword:xe(function(e,t,n,i){return i?e.sessionReauth(i,t,n,{reason:Ni.a.PASSWORD_CHECK}):e.signIn(t,n,{reason:Ni.a.PASSWORD_CHECK}).then(function(t){if(t&&t.sessionToken)return e.sessionDestroy(t.sessionToken)})}),checkAccountExists:xe(function(e,t){return e.accountStatus(t).then(function(e){return e.exists})}),checkAccountExistsByEmail:xe(function(e,t){return e.accountStatusByEmail(t).then(function(e){return e.exists})}),signIn:xe(function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=Oe(t),s={keys:ke(i),reason:r.reason||Ni.a.SIGN_IN};return i.has("service")&&(s.service=i.get("service")),i.has("redirectTo")&&(s.redirectTo=i.get("redirectTo")),r.unblockCode&&(s.unblockCode=r.unblockCode),r.resume&&(s.resume=r.resume),r.skipCaseError&&(s.skipCaseError=r.skipCaseError),r.originalLoginEmail&&(s.originalLoginEmail=r.originalLoginEmail),r.verificationMethod&&(s.verificationMethod=r.verificationMethod),Me(s,r),e.signIn(o,n,s).then(function(e){return e.verified||e.hasOwnProperty("verificationReason")||(e.verificationReason=Pt.a.SIGN_UP,e.verificationMethod=s.verificationMethod?s.verificationMethod:kt.a.EMAIL),Re(o,i,e,r)})}),sessionReauth:xe(function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=Oe(n),a={keys:ke(r),reason:o.reason||Ni.a.SIGN_IN};return r.has("service")&&(a.service=r.get("service")),r.has("redirectTo")&&(a.redirectTo=r.get("redirectTo")),o.unblockCode&&(a.unblockCode=o.unblockCode),o.resume&&(a.resume=o.resume),o.skipCaseError&&(a.skipCaseError=o.skipCaseError),o.originalLoginEmail&&(a.originalLoginEmail=o.originalLoginEmail),o.verificationMethod&&(a.verificationMethod=o.verificationMethod),Me(a,o),e.sessionReauth(t,s,i,a).then(function(e){return e.sessionToken=t,Re(s,r,e,o)})}),signUp:xe(function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=Oe(t),s={keys:ke(i)};return i.has("service")&&(s.service=i.get("service")),i.has("redirectTo")&&(s.redirectTo=i.get("redirectTo")),r.preVerified&&(s.preVerified=!0),r.resume&&(s.resume=r.resume),r.verificationMethod&&(s.verificationMethod=r.verificationMethod),i.has("style")&&(s.style=i.get("style")),Me(s,r),e.signUp(o,n,s).then(function(e){return Re(o,i,e,r)})}),signUpResend:xe(function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r={redirectTo:t.get("redirectTo"),service:t.get("service")};return i.resume&&(r.resume=i.resume),t.has("style")&&(r.style=t.get("style")),e.recoveryEmailResendCode(n,r)}),sessionVerifyResend:xe(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={type:"upgradeSession"};return n.redirectTo&&(i.redirectTo=n.redirectTo),e.recoveryEmailResendCode(t,i)}),sessionDestroy:Ne("sessionDestroy"),verifyCode:Ne("verifyCode"),passwordReset:xe(function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=Oe(t),o={redirectTo:n.get("redirectTo"),service:n.get("service")};return i.resume&&(o.resume=i.resume),Me(o,i),e.passwordForgotSendCode(r,o).then(function(e){return xi.a.clear(),e})}),passwordResetResend:xe(function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=Oe(t),s={redirectTo:i.get("redirectTo"),service:i.get("service")};return r.resume&&(s.resume=r.resume),e.passwordForgotResendCode(o,n,s)}),completePasswordReset:xe(function(e,t,n,i,r,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},a=Oe(t),c={keys:ke(o),sessionToken:!0};return e.passwordForgotVerifyCode(r,i,{}).then(function(t){var i=a;return s.emailToHashWith&&(i=Oe(s.emailToHashWith)),e.accountReset(i,n,t.accountResetToken,c)}).then(function(e){return Re(a,o,e)})}),isPasswordResetComplete:xe(function(e,t){return e.passwordForgotStatus(t).then(function(){return!1},function(e){if(ht.a.is(e,"INVALID_TOKEN"))return!0;throw e})}),changePassword:xe(function(e,t,n,i,r,o,s){var a=Oe(t);return e.passwordChange(a,n,i,{keys:ke(s,o),sessionToken:r}).then(function(){return Re(a,s,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{sessionTokenContext:o})})}),deleteAccount:xe(function(e,t,n,i){var r=Oe(t);return e.accountDestroy(r,n,{},i)}),sessionStatus:Ne("sessionStatus"),sessionVerifyCode:Ne("sessionVerifyCode"),sessionResendVerifyCode:Ne("sessionResendVerifyCode"),isSignedIn:function(e){return e?this.sessionStatus(e).then(function(){return!0},function(e){if(ht.a.is(e,"INVALID_TOKEN"))return!1;throw e}):Promise.resolve(!1)},recoveryEmailStatus:xe(function(e,t){return e.recoveryEmailStatus(t).then(function(e){return e.verified?it.a.pick(e,"email","verified"):{email:e.email,verificationReason:e.emailVerified?Pt.a.SIGN_IN:Pt.a.SIGN_UP,verified:!1}})}),sessionVerificationStatus:Ne("recoveryEmailStatus"),accountKeys:Ne("accountKeys"),accountProfile:Ne("accountProfile"),account:Ne("account"),deviceList:Ne("deviceList"),sessions:Ne("sessions"),securityEvents:Ne("securityEvents"),deleteSecurityEvents:Ne("deleteSecurityEvents"),attachedClients:Ne("attachedClients"),deviceDestroy:Ne("deviceDestroy"),attachedClientDestroy:Ne("attachedClientDestroy"),sendUnblockEmail:xe(function(e,t){var n={};return Me(n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),e.sendUnblockCode(t,n)}),rejectUnblockCode:Ne("rejectUnblockCode"),sendSms:xe(function(e,t,n,i){return e.sendSms(t,n,i,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).catch(function(e){if(function(e){return ht.a.is(e,"INVALID_PARAMETER")&&e.validation&&e.validation.keys&&"phoneNumber"===e.validation.keys[0]}(e))throw ht.a.toError("INVALID_PHONE_NUMBER");throw e})}),smsStatus:Ne("smsStatus"),consumeSigninCode:Ne("consumeSigninCode"),recoveryEmails:Ne("recoveryEmails"),recoveryEmailCreate:Ne("recoveryEmailCreate"),recoveryEmailDestroy:Ne("recoveryEmailDestroy"),resendEmailCode:Ne("recoveryEmailResendCode"),deleteEmail:Ne("deleteEmail"),recoveryEmailSetPrimaryEmail:Ne("recoveryEmailSetPrimaryEmail"),verifyTokenCode:Ne("verifyTokenCode"),createTotpToken:Ne("createTotpToken"),deleteTotpToken:Ne("deleteTotpToken"),checkTotpTokenExists:Ne("checkTotpTokenExists"),verifyTotpCode:Ne("verifyTotpCode"),consumeRecoveryCode:Ne("consumeRecoveryCode"),replaceRecoveryCodes:Ne("replaceRecoveryCodes"),createRecoveryBundle:xe(function(e,t,n,i,r){var o,s,a;return e.sessionReauth(i,t,n,{keys:!0,reason:Pt.a.RECOVERY_KEY}).then(function(t){return e.accountKeys(t.keyFetchToken,t.unwrapBKey)}).then(function(e){return s=e,Pi.a.generateRecoveryKey(ot.a.RECOVERY_KEY_LENGTH).then(function(e){return Pi.a.getRecoveryJwk(r,o=e)})}).then(function(e){return Pi.a.bundleRecoveryData(a=e,s)}).then(function(t){return e.createRecoveryKey(i,a.kid,t)}).then(function(){return{recoveryKey:o}})}),deleteRecoveryKey:Ne("deleteRecoveryKey"),recoveryKeyExists:Ne("recoveryKeyExists"),passwordForgotVerifyCode:xe(function(e,t,n){return e.passwordForgotVerifyCode(t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}),getRecoveryBundle:xe(function(e,t,n,i){return Pi.a.getRecoveryJwk(n,i).then(function(n){return e.getRecoveryKey(t,n.kid).then(function(e){return Pi.a.unbundleRecoveryData(n,e.recoveryData)}).then(function(e){return{keys:e,recoveryKeyId:n.kid}})})}),resetPasswordWithRecoveryKey:xe(function(e,t,n,i,r,o,s){return e.resetPasswordWithRecoveryKey(t,n,i,r,{kB:o},{keys:!0,sessionToken:!0}).then(function(e){return Re(n,s,e)})}),createOAuthCode:Ne("createOAuthCode"),createOAuthToken:Ne("createOAuthToken"),getOAuthScopedKeyData:Ne("getOAuthScopedKeyData"),getSubscriptionPlans:Ne("getSubscriptionPlans"),getActiveSubscriptions:Ne("getActiveSubscriptions"),createSupportTicket:Ne("createSupportTicket")};var Di=De,Mi="firefox_accounts";it.a.extend(Le.prototype={onMessage:function(e){var t=JSON.parse(e.data);this.trigger(t.name,t.data)},send:function(e,t){this._broadcastChannel&&this._broadcastChannel.postMessage(this.stringify(e,t))},stringify:function(e){return JSON.stringify({data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},name:e})}},pt.a.Events);var Li=Le,Vi=n(105),Ui=n(41),Fi=n(67);Ue.prototype={_request:function(e,t,n){return this._xhr[e](this._oAuthUrl+t,n||null).catch(Ve)},getClientInfo:function(e){return this._request("get","/v1/client/"+e)},fetchOAuthApps:function(e){var t={accessToken:e,type:"get",url:"".concat(this._oAuthUrl).concat("/v1/client-tokens")};return this._xhr.oauthAjax(t).catch(Ve)},destroyOAuthApp:function(e,t){var n={accessToken:e,type:"delete",url:"".concat(this._oAuthUrl).concat("/v1/client-tokens","/").concat(t)};return this._xhr.oauthAjax(n).catch(Ve)},destroyToken:function(e){return this._request("post","/v1/destroy",{token:e})}};var ji=Ue,Bi=n(60);Fe.prototype._request=function(e,t,n,i,r){return Fi.a.oauthAjax({accessToken:n,data:i,headers:r,type:t,url:this.profileUrl+e}).then(function(e){if(e.error)throw Bi.a.toError(e);return e},function(e){throw Bi.a.normalizeXHRError(e)})},Fe.prototype.getProfile=function(e){return this._request("/v1/profile","get",e)},Fe.prototype.getAvatar=function(e){return this._request("/v1/avatar","get",e)},Fe.prototype.deleteAvatar=function(e,t){return this._request("/v1/avatar/"+t,"delete",e)},Fe.prototype.uploadAvatar=function(e,t){return this._request("/v1/avatar/upload","post",e,t,{"Content-type":t.type})},Fe.prototype.getDisplayName=function(e){return this._request("/v1/display_name","get",e)},Fe.prototype.postDisplayName=function(e,t){return this._request("/v1/display_name","post",e,{displayName:t})},Fe.Errors=Bi.a;var Gi=Fe,Hi=pt.a.Model.extend({initialize:function(e){this._metrics=(e=e||{}).metrics,this._notifier=e.notifier,this._window=e.window||window,this._storage=Et.a.factory("sessionStorage",this._window),this._notifier.on("show-view",this._onShowView.bind(this)),this._notifier.on("show-child-view",this._onShowChildView.bind(this))},_onShowView:function(e,t){this.logIfRefresh(t.viewName)},_onShowChildView:function(e,t,n){this.logIfRefresh(n.viewName)},logIfRefresh:function(e){var t=this._storage.get("last_page_loaded");(function(e,t){return e&&e.view===t})(t,e)&&this._metrics.logViewEvent(e,"refresh"),t={timestamp:Date.now(),view:e},this._storage.set("last_page_loaded",t)}}),Wi=n(166),Ki=n(117),zi=n(118),qi=n(120),$i=n(121),Yi=n(123),Xi=n(124),Ji=n(141),Qi=n(181),Zi=n(125),er=n(183),tr=n(184),nr=n(126),ir=n(127),rr=n(102),or=n(159),sr=n(104),ar=n(185),cr=n(150),ur=n(186),lr=n(151),dr=n(187),hr=n(130),fr=n(131),pr=n(143),mr=n(152),gr=n(140),vr=n(153),_r=n(208),yr=n(53),wr=n(142),br=n(191),Er=n(209),Sr=n(192),Ar=n(207),Ir=n(36),Cr=n(195),Tr=n(155),Or=n(196),kr=n(197),Pr=n(198),xr=n(199),Nr=n(200),Rr=n(156),Dr=n(157),Mr=n(158),Lr=n(204),Vr=n(205),Ur=n(138),Fr=n(206),jr=n(145),Br=pt.a.Router.extend({routes:{"(/)":Ge(gr.default),"account_recovery_confirm_key(/)":Ge(Wi.default),"account_recovery_reset_password(/)":Ge(or.default),"authorization(/)":Ge(br.default),"cannot_create_account(/)":Ge(Qi.default),"choose_what_to_sync(/)":Ge(er.default),"clear(/)":Ge(tr.default),"complete_reset_password(/)":Ge(or.default),"complete_signin(/)":Ge(sr.default,{type:Pt.a.SIGN_IN}),"confirm(/)":Ge(cr.default,{type:Pt.a.SIGN_UP}),"confirm_reset_password(/)":Ge(ar.default),"confirm_signin(/)":Ge(cr.default,{type:Pt.a.SIGN_IN}),"confirm_signup_code(/)":Ge(ur.default),"connect_another_device(/)":Ge(lr.default),"connect_another_device/why(/)":He(jr.default,lr.default),"cookies_disabled(/)":Ge(dr.default),"force_auth(/)":Ge(mr.default),"legal(/)":Ge("legal"),"legal/privacy(/)":Ge("pp"),"legal/terms(/)":Ge("tos"),"oauth(/)":Ge(gr.default),"oauth/force_auth(/)":Ge(mr.default),"oauth/signin(/)":Ge(Tr.default),"oauth/signup(/)":Ge(Rr.default),"oauth/success/:client_id(/)":Ge(yr.default,{type:Pt.a.SUCCESSFUL_OAUTH}),"pair(/)":Ge("pair/index"),"pair/auth/allow(/)":Ge("pair/auth_allow"),"pair/auth/complete(/)":Ge("pair/auth_complete"),"pair/auth/totp(/)":Ge("pair/auth_totp"),"pair/auth/wait_for_supp(/)":Ge("pair/auth_wait_for_supp"),"pair/failure(/)":Ge("pair/failure"),"pair/success(/)":Ge("pair/success"),"pair/supp(/)":Ge("pair/supp",{force:!0}),"pair/supp/allow(/)":Ge("pair/supp_allow"),"pair/supp/wait_for_auth(/)":Ge("pair/supp_wait_for_auth"),"pair/unsupported(/)":Ge("pair/unsupported"),"primary_email_verified(/)":Ge(yr.default,{type:Pt.a.PRIMARY_EMAIL_VERIFIED}),"report_signin(/)":Ge(Er.default),"reset_password(/)":Ge(Sr.default),"reset_password_confirmed(/)":Ge(yr.default,{type:Pt.a.PASSWORD_RESET}),"reset_password_verified(/)":Ge(yr.default,{type:Pt.a.PASSWORD_RESET}),"reset_password_with_recovery_key_verified(/)":Ge(yr.default,{type:Pt.a.PASSWORD_RESET_WITH_RECOVERY_KEY}),"secondary_email_verified(/)":Ge(yr.default,{type:Pt.a.SECONDARY_EMAIL_VERIFIED}),"security_events(/)":Ge(Ar.default),"settings(/)":Ge(Ir.default),"settings/account_recovery(/)":He(Ki.default,Ir.default),"settings/account_recovery/confirm_password(/)":He(zi.default,Ir.default),"settings/account_recovery/confirm_revoke(/)":He(qi.default,Ir.default),"settings/account_recovery/recovery_key(/)":He($i.default,Ir.default),"settings/avatar/camera(/)":He(Yi.default,Ir.default),"settings/avatar/change(/)":He(Xi.default,Ir.default),"settings/avatar/crop(/)":He(Ji.default,Ir.default),"settings/change_password(/)":He(Zi.default,Ir.default),"settings/clients(/)":He(ir.default,Ir.default),"settings/clients/disconnect(/)":He(nr.default,Ir.default),"settings/communication_preferences(/)":He(rr.default,Ir.default),"settings/delete_account(/)":He(hr.default,Ir.default),"settings/display_name(/)":He(fr.default,Ir.default),"settings/emails(/)":He(pr.default,Ir.default),"settings/two_step_authentication(/)":He(Ur.default,Ir.default),"settings/two_step_authentication/recovery_codes(/)":He(wr.default,Ir.default),"signin(/)":Ge(Tr.default),"signin_bounced(/)":Ge(Cr.default),"signin_confirmed(/)":Ge(yr.default,{type:Pt.a.SIGN_IN}),"signin_permissions(/)":Ge(vr.default,{type:Pt.a.SIGN_IN}),"signin_recovery_code(/)":Ge(Or.default),"signin_reported(/)":Ge(kr.default),"signin_token_code(/)":Ge(Pr.default,{type:Pt.a.SIGN_IN}),"signin_totp_code(/)":Ge(xr.default),"signin_unblock(/)":Ge(Nr.default),"signin_verified(/)":Ge(yr.default,{type:Pt.a.SIGN_IN}),"signup(/)":Ge(Rr.default),"signup_confirmed(/)":Ge(yr.default,{type:Pt.a.SIGN_UP}),"signup_permissions(/)":Ge(vr.default,{type:Pt.a.SIGN_UP}),"signup_verified(/)":Ge(yr.default,{type:Pt.a.SIGN_UP}),"sms(/)":Ge(Dr.default),"sms/sent(/)":Ge(Mr.default),"sms/sent/why(/)":He(jr.default,Mr.default),"sms/why(/)":He(jr.default,Dr.default),"subscriptions/products/:productId":Ge(Lr.default),"subscriptions(/)":Ge(Vr.default),"support(/)":Ge(_r.default),"verify_email(/)":Ge(sr.default,{type:Pt.a.SIGN_UP}),"verify_primary_email(/)":Ge(sr.default,{type:Pt.a.PRIMARY_EMAIL_VERIFIED}),"verify_secondary_email(/)":Ge(sr.default,{type:Pt.a.SECONDARY_EMAIL_VERIFIED}),"would_you_like_to_sync(/)":Ge(Fr.default)},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.broker=t.broker,this.metrics=t.metrics,this.notifier=t.notifier,this.relier=t.relier,this.user=t.user,this.window=t.window||window,this._viewModelStack=[],this.notifier.once("view-shown",this._afterFirstViewHasRendered.bind(this)),this.notifier.on("navigate",this.onNavigate.bind(this)),this.notifier.on("navigate-back",this.onNavigateBack.bind(this)),this.notifier.on("email-first-flow",function(){return e._onEmailFirstFlow()}),this.broker.getCapability("disableLegacySigninSignup")&&(this._isEmailFirstFlow=!0),this.storage=Et.a.factory("sessionStorage",this.window)},onNavigate:function(e){if(e.server)return this.navigateAway(e.url);this.navigate(e.url,e.nextViewData,e.routerOptions)},onNavigateBack:function(e){this.navigateBack(e.nextViewData)},navigate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=this.broker.transformLink(e),n.replace&&this._viewModelStack.length?this._viewModelStack[this._viewModelStack.length-1]=We(t):this._viewModelStack.push(We(t)),n.hasOwnProperty("trigger")||(n.trigger=!0),0===e.indexOf(this.window.location.origin)&&(e=e.replace(this.window.location.origin,""));var i=!!n.clearQueryParams,r=/\?/.test(e);return i||r?i&&r&&(e=e.split("?")[0]):e+=this.window.location.search,this.window.location.hash&&(e+=this.window.location.hash),pt.a.Router.prototype.navigate.call(this,e,n)},navigateAway:function(e){var t=this;return e=this.broker.transformLink(e),this.metrics.flush().then(function(){t.window.location.href=e})},navigateBack:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.canGoBack()){this._viewModelStack.pop();var t=this.getCurrentViewModel();t&&t.set(e),this.window.history.back()}},getCurrentViewModel:function(){if(this._viewModelStack.length)return this._viewModelStack[this._viewModelStack.length-1]},getViewOptions:function(e){return it.a.extend({canGoBack:this.canGoBack(),currentPage:this.getCurrentPage(),model:this.getCurrentViewModel(),viewName:this.getCurrentViewName()},e)},canGoBack:function(){return!!this.storage.get("canGoBack")},getCurrentPage:function(){return(pt.a.history.fragment||"").replace(/^\//,"").replace(/\/$/,"").replace(/\?.*/,"")},getCurrentViewName:function(){return this.fragmentToViewName(this.getCurrentPage())},_afterFirstViewHasRendered:function(){this.storage.set("canGoBack",!0)},_onEmailFirstFlow:function(){this._isEmailFirstFlow=!0,this.storage.set("canGoBack",!0)},fragmentToViewName:function(e){return(e=e||"").replace(/^\//,"").replace(/\/$/,"").replace(/\//g,".").replace(/\?.*/,"").replace(/_/g,"-")},showView:function(e,t){this.notifier.trigger("show-view",e,this.getViewOptions(t))},showChildView:function(e,t,n){this.notifier.trigger("show-child-view",e,t,this.getViewOptions(n))},createViewHandler:Ge,createChildViewHandler:He}),Gr=n(217),Hr=n(66),Wr=n(24),Kr=["automatedBrowser","client_id","context","entrypoint","keys","migration","redirect_uri","scope","service","setting","style"],zr=["code","context","errno","namespace","status"];qe.prototype={captureException:function(e){Wr.l(function(t){zr.forEach(function(n){n in e&&t.setTag(n,e[n])}),Wr.c(e)})},__beforeSend:Ke,__cleanUpQueryParam:ze};var qr=qe,$r=Et.a.factory("localStorage");it.a.extend($e.prototype,Vi.a.prototype,{_send:function(e){var t=$r.get("metrics_all");return Array.isArray(t)||(t=[]),t.push(e),$r.set("metrics_all",t),Promise.resolve(e)},isMetricsCollectionEnabled:function(){return!1}});var Yr,Xr,Jr=$e,Qr={access_type:Ot.a.accessType().renameTo("accessType"),client_id:Ot.a.clientId().required().renameTo("clientId"),code_challenge:Ot.a.codeChallenge().required().renameTo("codeChallenge"),code_challenge_method:Ot.a.codeChallengeMethod().required().renameTo("codeChallengeMethod"),keys_jwk:Ot.a.keysJwk().required().renameTo("keysJwk"),redirect_uri:Ot.a.url().renameTo("redirectUri"),scope:Ot.a.string().required().min(1),state:Ot.a.string().required()},Zr={channel_id:Ot.a.channelId().required().renameTo("channelId"),channel_key:Ot.a.channelKey().required().renameTo("channelKey")},eo=function(){function e(){var t,n,i,r,o,s,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var c=arguments.length,u=Array(c),l=0;c>l;l++)u[l]=arguments[l];return i=this,n=!(r=(t=Je(e)).call.apply(t,[this].concat(u)))||"object"!==Ye(r)&&"function"!=typeof r?Qe(i):r,o=Qe(n),a="pairing-supplicant",(s="name")in o?Object.defineProperty(o,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[s]=a,n}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(e,Si),t=e,(n=[{key:"fetch",value:function(){var e=this;return Promise.resolve().then(function(){return e.importHashParamsUsingSchema(Zr,gn.a),e.importSearchParamsUsingSchema(Qr,gn.a),e._setupOAuthRPInfo()})}},{key:"getOAuthParams",value:function(){var e=this.scopeStrToArray(this.get("scope")).join(" ");return{access_type:this.get("accessType"),client_id:this.get("clientId"),code_challenge:this.get("codeChallenge"),code_challenge_method:this.get("codeChallengeMethod"),keys_jwk:this.get("keysJwk"),scope:e,state:this.get("state")}}},{key:"validateApprovalData",value:function(e){var t=e.code,n=e.state;if(Ot.a.oauthCode().validate(t).error)throw gn.a.toInvalidParameterError("code");if(n!==this.get("state"))throw gn.a.toInvalidParameterError("state")}}])&&Xe(t.prototype,n),i&&Xe(t,i),e}(),to=n(63),no=function(e){return e},io=Object.keys(n.n(to).a),ro={context:Ot.a.string().min(1),country:(Yr=Ot.a.string()).valid.apply(Yr,(Xr=io,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);e.length>t;t++)n[t]=e[t];return n}}(Xr)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(Xr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}())),service:Ot.a.string(),signin:Ot.a.string().empty("").renameTo("signinCode")},oo=yi.extend({defaults:it.a.extend({},yi.prototype.defaults,{action:void 0,name:"browser",syncPreference:void 0,multiService:!1,signinCode:void 0,tokenCode:!0}),initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._translator=t.translator,yi.prototype.initialize.call(this,e,t)},fetch:function(){var e=this;return yi.prototype.fetch.call(this).then(function(){e.importSearchParamsUsingSchema(ro,ht.a),e.get("service")?e.set("serviceName",no("Firefox Sync")):e.set("serviceName",no("Firefox"))})},isSync:function(){return!0},shouldOfferToSync:function(e){return"sync"!==this.get("service")&&"force-auth"!==e},wantsKeys:function(){return!0}}),so=n(90),ao=n(149),co=n.n(ao),uo=pt.a.Model.extend({initialize:function(e){this.sentryMetrics=(e=e||{}).sentryMetrics,this.window=e.window||window,this.fetch()},defaults:{uniqueUserId:null},fetch:function(){var e=Et.a.factory("localStorage",this.window);this.populateFromStringifiedResumeToken(this.getSearchParam("resume"));var t=this.get("uniqueUserId");t||(t=e.get("uniqueUserId")?e.get("uniqueUserId"):co.a.v4()),this.set("uniqueUserId",t),e.set("uniqueUserId",t)},resumeTokenFields:["uniqueUserId"]});mt.a.mixin(uo,fi.a,Ct.a);var lo=uo,ho=n(106),fo=pt.a.Model.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._oAuthClientId=e.oAuthClientId,this._oAuthClient=e.oAuthClient,this._profileClient=e.profileClient,this._fxaClient=e.fxaClient,this._metrics=e.metrics,this._notifier=e.notifier,this._subscriptionsConfig=e.subscriptionsConfig,this._storage=e.storage||Et.a.factory(),this.sentryMetrics=e.sentryMetrics,this.set("uniqueUserId",e.uniqueUserId),this._cachedSignedInAccount=null,this.window=e.window||window,this.fetch()},defaults:{uniqueUserId:null},resumeTokenFields:["uniqueUserId"],resumeTokenSchema:{uniqueUserId:Ot.a.uuid()},fetch:function(){var e=this;return Promise.resolve().then(function(){e.populateFromStringifiedResumeToken(e.getSearchParam("resume"))})},logNumStoredAccounts:function(){var e=Object.keys(this._accounts()).length;this._metrics.logNumStoredAccounts(e)},_accounts:function(){return this._storage.get("accounts")||{}},_getAccount:function(e){return e&&this._accounts()[e]||null},_setSignedInAccountUid:function(e){this._storage.set("currentAccountUid",e),this._cachedSignedInAccount&&this._cachedSignedInAccount.get("uid")!==e&&(this._cachedSignedInAccount=null)},clearSignedInAccountUid:function(){this._storage.remove("currentAccountUid"),this._cachedSignedInAccount=null},_getSignedInAccountData:function(){return this._getAccount(this._storage.get("currentAccountUid"))},_persistAccount:function(e){var t=this.initAccount(e);if(et(t)){var n=t.get("uid"),i=this._accounts();i[n]=t.toPersistentJSON(),this._storage.set("accounts",i)}},initAccount:function(e){var t=this;if(e instanceof ho.a)return e;var n=new ho.a(e,{fxaClient:this._fxaClient,metrics:this._metrics,notifier:this._notifier,oAuthClient:this._oAuthClient,oAuthClientId:this._oAuthClientId,profileClient:this._profileClient,sentryMetrics:this.sentryMetrics,subscriptionsConfig:this._subscriptionsConfig});return this.listenTo(n,"change",function(){et(n)&&(t._persistAccount(n),!n.has("sessionToken")&&t.isSignedInAccount(n)&&t.clearSignedInAccountUid())}),n},isSyncAccount:function(e){return this.initAccount(e).isFromSync()},sessionStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSignedInAccount();return e.sessionStatus().then(function(){return e})},getSignedInAccount:function(){return this._cachedSignedInAccount||(this._cachedSignedInAccount=this.initAccount(this._getSignedInAccountData())),this._cachedSignedInAccount},isSignedInAccount:function(e){var t=e.get("uid"),n=this.getSignedInAccount().get("uid");return!(!n||!t)&&t===n},isAnotherAccountSignedIn:function(e){return!this.getSignedInAccount().isDefault()&&!this.isSignedInAccount(e)},setSignedInAccountByUid:function(e){this._accounts()[e]&&this._setSignedInAccountUid(e)},getAccountByUid:function(e){var t=this._accounts()[e];return this.initAccount(t)},getAccountByEmail:function(e){var t=Object.keys(this._accounts()).reverse(),n=this._accounts(),i=it.a.find(t,function(t){return n[t].email===e});return this.initAccount(n[i])},getChooserAccount:function(){function e(e){return et(e)&&e.get("sessionToken")}var t=this;if(this.has("signinCodeAccount"))return this.get("signinCodeAccount");var n=it.a.map(this._accounts(),function(e){return t.initAccount(e)}),i=it.a.find(n,function(n){return t.isSyncAccount(n)&&e(n)});if(i)return i;var r=this.getSignedInAccount(),o=e(r)&&r;if(o)return o;var s=it.a.find(n,et);return s||this.initAccount({})},clearSignedInAccount:function(){var e=this.getSignedInAccount().get("uid");this.clearSignedInAccountUid(),this._notifier.triggerRemote(this._notifier.COMMANDS.SIGNED_OUT,{uid:e})},removeAllAccounts:function(){this.clearSignedInAccountUid(),this._storage.remove("accounts"),this.unset("signinCodeAccount")},removeAccount:function(e){var t=this.initAccount(e);this.isSignedInAccount(t)&&this.clearSignedInAccount();var n=this._accounts();delete n[t.get("uid")],this._storage.set("accounts",n)},deleteAccount:function(e,t){var n=this,i=this.initAccount(e);return i.destroy(t).then(function(){n.removeAccount(i),n._notifier.triggerAll(n._notifier.COMMANDS.DELETE,{uid:i.get("uid")})})},setSignedInAccount:function(e){var t=this.initAccount(e);return t.set("lastLogin",Date.now()),this.updateSignedInAccount(t)},updateSignedInAccount:function(e){var t=this;return this.setAccount(e).then(function(e){return t._cachedSignedInAccount=e,t._setSignedInAccountUid(e.get("uid")),e})},setAccount:function(e){var t=this,n=this.initAccount(e);return n.fetch().then(function(){return t._persistAccount(n),n})},removeAccountsWithInvalidUid:function(){var e=this;return Promise.resolve().then(function(){var t=e._accounts();for(var n in t)n&&"undefined"!==n||(delete t[n],e._storage.set("accounts",t))})},signInAccount:function(e,t,n,i){var r=this;return e.signIn(t,n,i).then(function(){var t=r.getAccountByUid(e.get("uid"));return t.isDefault()||(t.set(it.a.omit(e.attributes,function(e){return void 0===e})),e=t),r._notifyOfAccountSignIn(e),r.setSignedInAccount(e)},function(t){throw ht.a.is(t,"INVALID_TOKEN")&&(e.discardSessionToken(),r.removeAccount(e)),t})},signUpAccount:function(e,t,n,i){var r=this;return e.signUp(t,n,i).then(function(){return r.setSignedInAccount(e)})},signOutAccount:function(e){var t=this;return e.signOut().then(function(n){return t.removeAccount(e),n},function(n){throw t.removeAccount(e),n})},completeAccountSignUp:function(e,t,n){var i=this;return e.verifySignUp(t,n).then(function(){return function(e){e.has("sessionToken")&&i._notifyOfAccountSignIn(e)}(e),e})},verifyAccountSessionCode:function(e,t,n){var i=this;return e.verifySessionCode(t,n).then(function(){return i._notifyOfAccountSignIn(e),e})},changeAccountPassword:function(e,t,n,i){var r=this;return e.changePassword(t,n,i).then(function(){return r.setSignedInAccount(e)}).then(function(){var t=r._notifier,n=t.COMMANDS.CHANGE_PASSWORD,i=e.pick(Object.keys(t.SCHEMATA[n]));return i.verified=!!i.verified,t.triggerRemote(n,i),e})},_notifyOfAccountSignIn:function(e){var t=this._notifier,n=t.COMMANDS.SIGNED_IN;t.triggerRemote(n,e.pick(Object.keys(t.SCHEMATA[n])))},completeAccountPasswordReset:function(e,t,n,i,r,o){var s=this;return e.completePasswordReset(t,n,i,r,o).then(function(){return s._notifyOfAccountSignIn(e),s.setSignedInAccount(e)})},completeAccountPasswordResetWithRecoveryKey:function(e,t,n,i,r,o,s){var a=this;return e.resetPasswordWithRecoveryKey(n,t,i,r,o,s).then(function(){return a._notifyOfAccountSignIn(e),a.setSignedInAccount(e)})},destroyAccountAttachedClient:function(e,t){var n=this;return e.destroyAttachedClient(t).then(function(){t.get("isCurrentSession")&&n.isSignedInAccount(e)&&n.removeAccount(e)})},fetchAccountAttachedClients:function(e){return e.fetchAttachedClients()},checkAccountUidExists:function(e){var t=this;return e.checkUidExists().then(function(n){return n||t.removeAccount(e),n})},checkAccountEmailExists:function(e){var t=this;return e.checkEmailExists().then(function(n){return n||t.removeAccount(e),n})},rejectAccountUnblockCode:function(e,t){return e.rejectUnblockCode(t)},shouldSetSignedInAccountFromBrowser:function(e,t,n){return!(!n||n.isDefault())&&(e===ot.a.SYNC_SERVICE||(!!t||!!this.getSignedInAccount().isDefault()))},mergeBrowserAccount:function(e){var t=this.getAccountByUid(e.uid);return t.set({email:e.email,sessionToken:e.sessionToken,sessionTokenContext:ot.a.SESSION_TOKEN_USED_FOR_SYNC,uid:e.uid,verified:e.verified}),this.setAccount(t)},setSigninCodeAccount:function(e){var t=this;return Promise.resolve().then(function(){var n=t.initAccount(it.a.pick(e,"email"));t.set("signinCodeAccount",n)})}});mt.a.mixin(fo,fi.a,Ct.a);var po=fo,mo=/^\/pair\/supp/,go=/^\/pair\/?$/;tt.prototype={startApp:function(){var e=this,t=this._isAutomatedBrowser()?750:0;return Wt.a.delay(t).then(function(){return e.initializeDeps()}).then(function(){return e.testLocalStorage()}).then(function(){return e.allResourcesReady()}).catch(function(t){return e.fatalError(t)})},initializeInterTabChannel:function(){this._interTabChannel=new Li},initializeExperimentGroupingRules:function(){this._experimentGroupingRules=new lt.a({env:this._config.env,featureFlags:this._config.featureFlags})},initializeDeps:function(){var e=this;return Promise.resolve().then(function(){return e.initializeL10n()}).then(function(){return e.initializeInterTabChannel()}).then(function(){return e.initializeExperimentGroupingRules()}).then(function(){return e.initializeErrorMetrics()}).then(function(){return e.initializeOAuthClient()}).then(function(){return e.initializeRelier()}).then(function(){return e.initializeFxaClient()}).then(function(){return e.initializeNotificationChannel()}).then(function(){return e.initializeNotifier()}).then(function(){return e.initializeMetrics()}).then(function(){return e.initializeProfileClient()}).then(function(){return e.initializeAuthenticationBroker()}).then(function(){return e.initializeUser()}).then(function(){return e.initializeFormPrefill()}).then(function(){return e.initializeRefreshObserver()}).then(function(){return e.initializeRouter()}).then(function(){return e.initializeAppView()})},initializeErrorMetrics:function(){if(this._config&&this._config.env&&this._experimentGroupingRules){var e={env:this._config.env,uniqueUserId:this._getUniqueUserId()};this._experimentGroupingRules.choose("sentryEnabled",e)&&this.enableSentryMetrics()}},enableSentryMetrics:function(){var e;this._config&&this._config.release&&(e=this._config.release),this._sentryMetrics=new qr(this._config.sentryDsn,e)},initializeL10n:function(){return this._translator||(this._translator=new so.a),this._translator.fetch()},initializeMetrics:function(){var e=this._experimentGroupingRules.choose("isSampledUser",{env:this._config.env,uniqueUserId:this._getUniqueUserId()}),t=this._relier,n=new Gr.a(this._window);this._metrics=this._createMetrics({clientHeight:n.clientHeight,clientWidth:n.clientWidth,context:t.get("context"),devicePixelRatio:n.devicePixelRatio,entrypoint:t.get("entrypoint"),isSampledUser:e,lang:this._config.lang,migration:t.get("migration"),notifier:this._notifier,screenHeight:n.screenHeight,screenWidth:n.screenWidth,sentryMetrics:this._sentryMetrics,service:t.get("service"),uniqueUserId:this._getUniqueUserId(),utmCampaign:t.get("utmCampaign"),utmContent:t.get("utmContent"),utmMedium:t.get("utmMedium"),utmSource:t.get("utmSource"),utmTerm:t.get("utmTerm")})},initializeFormPrefill:function(){this._formPrefill=new Ti},initializeOAuthClient:function(){this._oAuthClient=new ji({oAuthUrl:this._config.oAuthUrl})},initializeProfileClient:function(){this._profileClient=new Gi({profileUrl:this._config.profileUrl})},initializeRelier:function(){if(!this._relier){var e,t=this._getContext();return e=this.isDevicePairingAsAuthority()?new Ii({},{config:this._config,oAuthClient:this._oAuthClient,oAuthClientId:this._config.oAuthClientId,oAuthUrl:this._config.oAuthUrl}):this.isDevicePairingAsSupplicant()?new eo({},{config:this._config,isSupplicant:!0,oAuthClient:this._oAuthClient,oAuthClientId:this._config.oAuthClientId,oAuthUrl:this._config.oAuthUrl}):this._isOAuth()?new Si({context:t},{config:this._config,isVerification:this._isVerification(),oAuthClient:this._oAuthClient,sentryMetrics:this._sentryMetrics,session:xi.a,window:this._window}):this._isServiceSync()||this._searchParam("context")===ot.a.FX_DESKTOP_V3_CONTEXT?new oo({context:t},{isVerification:this._isVerification(),sentryMetrics:this._sentryMetrics,translator:this._translator,window:this._window}):new yi({context:t},{isVerification:this._isVerification(),sentryMetrics:this._sentryMetrics,window:this._window}),this._relier=e,e.fetch()}},initializeAuthenticationBroker:function(){if(!this._authenticationBroker){var e;e=this._isOAuth()?this._chooseOAuthBrokerContext():this._getContext();var t=li(e);return this._authenticationBroker=new t({config:this._config,fxaClient:this._fxaClient,isVerificationSameBrowser:this._isVerificationSameBrowser(),metrics:this._metrics,notificationChannel:this._notificationChannel,notifier:this._notifier,oAuthClient:this._oAuthClient,relier:this._relier,session:xi.a,window:this._window}),this._authenticationBroker.on("error",this.captureError.bind(this)),this._metrics.setBrokerType(this._authenticationBroker.type),this._authenticationBroker.fetch()}},_chooseOAuthBrokerContext:function(){return this.isDevicePairingAsAuthority()?ot.a.DEVICE_PAIRING_AUTHORITY_CONTEXT:this.isOAuthWebChannel()&&this.isDevicePairingAsSupplicant()?ot.a.DEVICE_PAIRING_WEBCHANNEL_SUPPLICANT_CONTEXT:this.isDevicePairingAsSupplicant()?ot.a.DEVICE_PAIRING_SUPPLICANT_CONTEXT:this.isOAuthWebChannel()?ot.a.OAUTH_WEBCHANNEL_CONTEXT:this.getUserAgent().isChromeAndroid()?ot.a.OAUTH_CHROME_ANDROID_CONTEXT:ot.a.OAUTH_CONTEXT},initializeFxaClient:function(){this._fxaClient||(this._fxaClient=new Di({authServerUrl:this._config.authServerUrl,interTabChannel:this._interTabChannel}))},initializeUser:function(){var e=this;if(!this._user)return this._user=new po({fxaClient:this._fxaClient,metrics:this._metrics,notifier:this._notifier,oAuthClient:this._oAuthClient,oAuthClientId:this._config.oAuthClientId,profileClient:this._profileClient,sentryMetrics:this._sentryMetrics,subscriptionsConfig:this._config.subscriptions,storage:this._getUserStorageInstance(),uniqueUserId:this._getUniqueUserId()}),this._user.removeAccountsWithInvalidUid().then(function(){return e._updateUserFromSigninCodeAccount()}).then(function(){return e._updateUserFromBrowserAccount()})},_updateUserFromSigninCodeAccount:function(){var e=this;return Promise.resolve().then(function(){var t=e._authenticationBroker.get("signinCodeAccount");if(t)return e._user.setSigninCodeAccount(t)})},_updateUserFromBrowserAccount:function(){var e=this,t=this._user;return Promise.resolve().then(function(){var n=e._authenticationBroker.get("browserSignedInAccount");if(n)return t.mergeBrowserAccount(n)}).then(function(n){var i=e.isDevicePairingAsAuthority()||e.isStartingPairing();if(t.shouldSetSignedInAccountFromBrowser(e._relier.get("service"),i,n))return t.updateSignedInAccount(n)})},initializeNotificationChannel:function(){this._notificationChannel||(this._notificationChannel=new Qt.a(ot.a.ACCOUNT_UPDATES_WEBCHANNEL_ID),this._notificationChannel.initialize({window:this._window}))},initializeNotifier:function(){this._notifier||(this._notifier=new Ui.a({tabChannel:this._interTabChannel,webChannel:this._notificationChannel}))},initializeRefreshObserver:function(){this._refreshObserver||(this._refreshObserver=new Hi({metrics:this._metrics,notifier:this._notifier,window:this._window}))},_uniqueUserId:null,_getUniqueUserId:function(){return this._uniqueUserId||(this._uniqueUserId=new lo({sentryMetrics:this._sentryMetrics,window:this._window}).get("uniqueUserId")),this._uniqueUserId},createView:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new e(it.a.extend({broker:this._authenticationBroker,config:this._config,createView:this.createView.bind(this),experimentGroupingRules:this._experimentGroupingRules,formPrefill:this._formPrefill,interTabChannel:this._interTabChannel,isCoppaEnabled:this._config.isCoppaEnabled,lang:this._config.lang,metrics:this._metrics,notifier:this._notifier,relier:this._relier,sentryMetrics:this._sentryMetrics,session:xi.a,subscriptionsManagementEnabled:this._config.subscriptions.enabled,translator:this._translator,user:this._user,window:this._window},this._router.getViewOptions(t)))},initializeRouter:function(){this._router||(this._router=new Br({broker:this._authenticationBroker,createView:this.createView.bind(this),metrics:this._metrics,notifier:this._notifier,relier:this._relier,user:this._user,window:this._window})),this._window.router=this._router},initializeAppView:function(){this._appView||(this._appView=new dt.default({createView:this.createView.bind(this),el:"body",environment:new vt.a(this._window),notifier:this._notifier,router:this._router,translator:this._translator,window:this._window}))},testLocalStorage:function(){var e=this;return Promise.resolve().then(function(){e._isAtCookiesDisabled()||e._storage.testLocalStorage(e._window)}).catch(function(t){return e.captureError(t)})},fatalError:function(e){return this._sentryMetrics||this.enableSentryMetrics(),Ci.a.fatalError(e,this._sentryMetrics,this._metrics,this._window,this._translator)},captureError:function(e){return this._sentryMetrics||this.enableSentryMetrics(),Ci.a.captureAndFlushError(e,this._sentryMetrics,this._metrics,this._window)},allResourcesReady:function(){n.e(23).then(n.t.bind(null,408,7));var e=this._selectStartPage(),t=!!e;this._history.start({pushState:this._canUseHistoryAPI(),silent:t}),e&&this._router.navigate(e,{},{replace:!0,trigger:!0})},_canUseHistoryAPI:function(){var e=this._window;try{e.history.replaceState({},e.document.title,e.location.href)}catch(e){return!1}return!0},_getUserStorageInstance:function(){return Et.a.factory("localStorage",this._window)},_isServiceSync:function(){return this._isService(ot.a.SYNC_SERVICE)},isDevicePairingAsAuthority:function(){return this._searchParam("redirect_uri")===ot.a.DEVICE_PAIRING_AUTHORITY_REDIRECT_URI},isOAuthWebChannel:function(){return this._searchParam("context")===ot.a.OAUTH_WEBCHANNEL_CONTEXT},isStartingPairing:function(){return go.test(this._window.location.pathname)},isDevicePairingAsSupplicant:function(){return mo.test(this._window.location.pathname)},_isServiceOAuth:function(){return this._searchParam("service")&&!this._isServiceSync()},_isService:function(e){var t=this._searchParam("service");return!(!t||!e||t!==e)},_isContext:function(e){return this._getContext()===e},_getContext:function(){return this._isVerification()?this._getVerificationContext():this._searchParam("context")},_getVerificationContext:function(){var e=this._getSameBrowserVerificationModel("context").get("context");return e||(this._isServiceSync()?ot.a.FX_SYNC_CONTEXT:this._isServiceOAuth()?ot.a.OAUTH_CONTEXT:ot.a.CONTENT_SERVER_CONTEXT)},_getSameBrowserVerificationModel:function(e){var t=bn.a.searchParams(this._window.location.search),n=new It({},{email:t.email,namespace:e,uid:t.uid});return n.load(),n},_isSignUpVerification:function(){return this._searchParam("code")&&this._searchParam("uid")},_isPasswordResetVerification:function(){return this._searchParam("code")&&this._searchParam("token")},_isReportSignIn:function(){return"/report_signin"===this._window.location.pathname},_isVerification:function(){return this._isSignUpVerification()||this._isPasswordResetVerification()||this._isReportSignIn()},_isVerificationSameBrowser:function(){return this._isVerification()&&!!this._getSameBrowserVerificationModel("context").get("context")},_isOAuth:function(){return!(!this._searchParam("client_id")&&!this._isOAuthVerificationSameBrowser())||this._isOAuthVerificationDifferentBrowser()||/oauth/.test(this._window.location.pathname)},_isAtCookiesDisabled:function(){return"/cookies_disabled"===this._window.location.pathname},_getSavedClientId:function(){return xi.a.oauth&&xi.a.oauth.client_id},_isOAuthVerificationSameBrowser:function(){return this._isVerification()&&this._isService(this._getSavedClientId())},_isOAuthVerificationDifferentBrowser:function(){return this._isVerification()&&this._isServiceOAuth()},_searchParam:function(e){return bn.a.searchParam(e,this._window.location.search)},_selectStartPage:function(){return this._isAtCookiesDisabled()||this._storage.isLocalStorageEnabled(this._window)||this._isVerificationInMobileSafari()?this.isDevicePairingAsAuthority()?"pair/auth/allow":void 0:"cookies_disabled"},_createMetrics:function(e){return this._isAutomatedBrowser()?new Jr(e):new Vi.a(e)},_isVerificationInMobileSafari:function(){var e=this._window.location.pathname,t="/complete_signin"===e||"/verify_email"===e,n=this.getUserAgent();return t&&n.isMobileSafari()},_isAutomatedBrowser:function(){return"true"===this._searchParam("automatedBrowser")}},mt.a.mixin(tt,Vt.a);var vo=tt,_o=new ct;_o.fetch().then(function(e){var t=new vo({config:e});_o.useConfig(e),t.startApp()})}]);
//# sourceMappingURL=app.bundle.js.map•Ž1$XQ$      ]ÿÝQ]ÿÝRA'ÌÃ^ ?ˆ   k    a,:https://accounts-static.cdn.mozilla.net/bundle-fdac8446fb59e4d985ed1693009cebe0541f978d/app.bundle.en.js strongly-framed 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAAAAgAAAAAAAAAAAAAAAAAAAAEAMwFmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAZcMIIGWDCCBUCgAwIBAgIQD6JXuBgLGd0YHCEmpv/jozANBgkqhkiG9w0BAQsFADBNMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMScwJQYDVQQDEx5EaWdpQ2VydCBTSEEyIFNlY3VyZSBTZXJ2ZXIgQ0EwHhcNMTkxMjEwMDAwMDAwWhcNMjAxMjA5MTIwMDAwWjCBjTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxHDAaBgNVBAoTE01vemlsbGEgQ29ycG9yYXRpb24xFzAVBgNVBAsTDkNsb3VkIFNlcnZpY2VzMRowGAYDVQQDDBEqLmNkbi5tb3ppbGxhLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKnB0ZAey/48siGZC1QNsECCAO2x9neZydY3/x9kGmM6WBU3M1TYpYIl1Zs1ss6PMe7IRC27eqsIi5c0sBmSySwnyL4CJ/jvV7mH25logN6ND9dAWCQpY/X5WMg3hkxSICBG/xKGNQtcVMkwrR8F+KAG6L4t13dMpZ38nNaSDNRs2Ih6poQVkJ/KB6ts/KfFpS31l5OULamByc0iZiPxNcIfPFrnCVSuDuP/rhbWVEekSajAkEhhTLIswdlxOc/M+DkL8GMmb9B7RaWqKd0az5sCPvJ5LI8H0MFqYPAVz5BibDMCx5roL4fi3wV1zO3QF40IG54t0jUv3ELG2RIssnECAwEAAaOCAvEwggLtMB8GA1UdIwQYMBaAFA+AYRyCMWHVLyjnjUY4tCzhxtniMB0GA1UdDgQWBBTy5ejKpR2Sy+knFPu3IDImjjd8LDAtBgNVHREEJjAkghEqLmNkbi5tb3ppbGxhLm5ldIIPY2RuLm1vemlsbGEubmV0MA4GA1UdDwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwawYDVR0fBGQwYjAvoC2gK4YpaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL3NzY2Etc2hhMi1nNi5jcmwwL6AtoCuGKWh0dHA6Ly9jcmw0LmRpZ2ljZXJ0LmNvbS9zc2NhLXNoYTItZzYuY3JsMEwGA1UdIARFMEMwNwYJYIZIAYb9bAEBMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LmRpZ2ljZXJ0LmNvbS9DUFMwCAYGZ4EMAQICMHwGCCsGAQUFBwEBBHAwbjAkBggrBgEFBQcwAYYYaHR0cDovL29jc3AuZGlnaWNlcnQuY29tMEYGCCsGAQUFBzAChjpodHRwOi8vY2FjZXJ0cy5kaWdpY2VydC5jb20vRGlnaUNlcnRTSEEyU2VjdXJlU2VydmVyQ0EuY3J0MAwGA1UdEwEB/wQCMAAwggEEBgorBgEEAdZ5AgQCBIH1BIHyAPAAdwC72d+8H4pxtZOUI5eqkntHOFeVCqtS6BqQlmQ2jh7RhQAAAW7xaubXAAAEAwBIMEYCIQC5RmcaaZDwMO1L5VSkEHlQauKfKccq/SP9npp8n6xg8gIhAPPcb/Zh8iy6G0lYDpRs+vnCjLXuFxAIuVajl6BPUegnAHUAXqdz+d9WwOe1Nkh90EngMnqRmgyEoRIShBh1loFxRVgAAAFu8WrmjgAABAMARjBEAiAkk4WXXw4d90S4TB3WUQz59sgFJzcakdMeLH+nedBuGgIgRzXELUl13GbfFsZnax0CORB+F0IxPUzexfxLGDAFnH0wDQYJKoZIhvcNAQELBQADggEBAFQQJ9wWNUoh/GT3Y8xUaMFJrXPyqz8UUBpkY/HgDM0KtF0KVlOG2RjTWvm2zCQt5eFoVLEpBYxQZqedHVcwVxnPP2rpahD7fnsexA/cnTvpXpUgYOwMehStbUKdG05OiZ+Zp525MEgpySuAdaXzDen5UL7k12QnqNHSt/92wTHPSpTtPCfdY6vo/3iArLyzr6LjxGN6JUpABx73AsvxVhQDADtdhcIeHNGcTqmswKGW81SZDZTrNpOKfUM0pex/tfvMLzxLwuRFPDR55Exk8wk2wyeRzFfFRag0WQxB+vY2hiIp2OLpVwC3XH1zOpZNnQKcz9Sic3Zd+4EbSdD405rALwADAAAAAAEBAAAAAAAABFAyNTYAAAAQUlNBLVBLQ1MxLVNIQTI1NgADZgoyJpFcT/u7IImFpjLfBb3Dl5pUIkzVhYlpa26W6oMAAAAAAAAGXDCCBlgwggVAoAMCAQICEA+iV7gYCxndGBwhJqb/46MwDQYJKoZIhvcNAQELBQAwTTELMAkGA1UEBhMCVVMxFTATBgNVBAoTDERpZ2lDZXJ0IEluYzEnMCUGA1UEAxMeRGlnaUNlcnQgU0hBMiBTZWN1cmUgU2VydmVyIENBMB4XDTE5MTIxMDAwMDAwMFoXDTIwMTIwOTEyMDAwMFowgY0xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRwwGgYDVQQKExNNb3ppbGxhIENvcnBvcmF0aW9uMRcwFQYDVQQLEw5DbG91ZCBTZXJ2aWNlczEaMBgGA1UEAwwRKi5jZG4ubW96aWxsYS5uZXQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCpwdGQHsv+PLIhmQtUDbBAggDtsfZ3mcnWN/8fZBpjOlgVNzNU2KWCJdWbNbLOjzHuyEQtu3qrCIuXNLAZksksJ8i+Aif471e5h9uZaIDejQ/XQFgkKWP1+VjIN4ZMUiAgRv8ShjULXFTJMK0fBfigBui+Ldd3TKWd/JzWkgzUbNiIeqaEFZCfygerbPynxaUt9ZeTlC2pgcnNImYj8TXCHzxa5wlUrg7j/64W1lRHpEmowJBIYUyyLMHZcTnPzPg5C/BjJm/Qe0WlqindGs+bAj7yeSyPB9DBamDwFc+QYmwzAsea6C+H4t8Fdczt0BeNCBueLdI1L9xCxtkSLLJxAgMBAAGjggLxMIIC7TAfBgNVHSMEGDAWgBQPgGEcgjFh1S8o541GOLQs4cbZ4jAdBgNVHQ4EFgQU8uXoyqUdksvpJxT7tyAyJo43fCwwLQYDVR0RBCYwJIIRKi5jZG4ubW96aWxsYS5uZXSCD2Nkbi5tb3ppbGxhLm5ldDAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMGsGA1UdHwRkMGIwL6AtoCuGKWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9zc2NhLXNoYTItZzYuY3JsMC+gLaArhilodHRwOi8vY3JsNC5kaWdpY2VydC5jb20vc3NjYS1zaGEyLWc2LmNybDBMBgNVHSAERTBDMDcGCWCGSAGG/WwBATAqMCgGCCsGAQUFBwIBFhxodHRwczovL3d3dy5kaWdpY2VydC5jb20vQ1BTMAgGBmeBDAECAjB8BggrBgEFBQcBAQRwMG4wJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBGBggrBgEFBQcwAoY6aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0U0hBMlNlY3VyZVNlcnZlckNBLmNydDAMBgNVHRMBAf8EAjAAMIIBBAYKKwYBBAHWeQIEAgSB9QSB8gDwAHcAu9nfvB+KcbWTlCOXqpJ7RzhXlQqrUugakJZkNo4e0YUAAAFu8Wrm1wAABAMASDBGAiEAuUZnGmmQ8DDtS+VUpBB5UGrinynHKv0j/Z6afJ+sYPICIQDz3G/2YfIsuhtJWA6UbPr5woy17hcQCLlWo5egT1HoJwB1AF6nc/nfVsDntTZIfdBJ4DJ6kZoMhKESEoQYdZaBcUVYAAABbvFq5o4AAAQDAEYwRAIgJJOFl18OHfdEuEwd1lEM+fbIBSc3GpHTHix/p3nQbhoCIEc1xC1Jddxm3xbGZ2sdAjkQfhdCMT1M3sX8SxgwBZx9MA0GCSqGSIb3DQEBCwUAA4IBAQBUECfcFjVKIfxk92PMVGjBSa1z8qs/FFAaZGPx4AzNCrRdClZThtkY01r5tswkLeXhaFSxKQWMUGannR1XMFcZzz9q6WoQ+357HsQP3J076V6VIGDsDHoUrW1CnRtOTomfmaeduTBIKckrgHWl8w3p+VC+5NdkJ6jR0rf/dsExz0qU7Twn3WOr6P94gKy8s6+i48RjeiVKQAce9wLL8VYUAwA7XYXCHhzRnE6prMChlvNUmQ2U6zaTin1DNKXsf7X7zC88S8LkRTw0eeRMZPMJNsMnkcxXxUWoNFkMQfr2NoYiKdji6VcAt1x9czqWTZ0CnM/UonN2XfuBG0nQ+NOaZgoyJpFcT/u7IImFpjLfBb3Dl5pUIkzVhYlpa26W6oMAAAAAAAAEmDCCBJQwggN8oAMCAQICEAH9o+tuynXIiEOLckvPvJEwDQYJKoZIhvcNAQELBQAwYTELMAkGA1UEBhMCVVMxFTATBgNVBAoTDERpZ2lDZXJ0IEluYzEZMBcGA1UECxMQd3d3LmRpZ2ljZXJ0LmNvbTEgMB4GA1UEAxMXRGlnaUNlcnQgR2xvYmFsIFJvb3QgQ0EwHhcNMTMwMzA4MTIwMDAwWhcNMjMwMzA4MTIwMDAwWjBNMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMScwJQYDVQQDEx5EaWdpQ2VydCBTSEEyIFNlY3VyZSBTZXJ2ZXIgQ0EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDcrliQTcHEMBWQNVtuPIIV9SxcvePb/3FD+mQlgNTuGKJN8GbQCnNuEZg2F2SvN539+kGEr8evjP4ac03PM5eQopaHU4MruaZ1SC0dVjd72jEyGtesqwb0ql1Lt0dG3SqTw5AueYCA7xMEahQ7tZuSvsIHZU782vz/eq7cXH5VMQzoOQek174v0wtq0rHfX/5XdFM7NYDdro5EmLOfDtPa4Nf0aymrRKdLWIRtkkuBw9pzixKXSJAERXUa3Tcxl5LozVQNO+TBPzleLrjzXH4QjoZBAI1FZkewoWXOoKopCU7zl+voLqsPcqcwDvrH9P0Ud8OkWyhXwrP5gv23RVibAgMBAAGjggFaMIIBVjASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIBhjA0BggrBgEFBQcBAQQoMCYwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTB7BgNVHR8EdDByMDegNaAzhjFodHRwOi8vY3JsMy5kaWdpY2VydC5jb20vRGlnaUNlcnRHbG9iYWxSb290Q0EuY3JsMDegNaAzhjFodHRwOi8vY3JsNC5kaWdpY2VydC5jb20vRGlnaUNlcnRHbG9iYWxSb290Q0EuY3JsMD0GA1UdIAQ2MDQwMgYEVR0gADAqMCgGCCsGAQUFBwIBFhxodHRwczovL3d3dy5kaWdpY2VydC5jb20vQ1BTMB0GA1UdDgQWBBQPgGEcgjFh1S8o541GOLQs4cbZ4jAfBgNVHSMEGDAWgBQD3lA1VtFMu2bwo+IbG8OXsj3RVTANBgkqhkiG9w0BAQsFAAOCAQEAIz7fS9IxQqW2fkJcGkTMadFotF1L4AQhbEvibcyx4JePplMJzaoqZeU5Tx6DpW5cmKIkJub7oe2Txy4Cxk1Kv7BC33jas6j5bf8hhVM2YEx2zuw43NZRgPDF1uXUTSdkq5vHPnH7SJe4M23JEwfulqIbGBX2XExA7bPC7P9xweNH/9S5ALQ3Qtogyepuiu4UBq59olmYiKgbby308skUXybPLI1+7TfAqdU5uYK/GQzqNK8AIWj4rXPiyTLaOCULVdOaHfBohu0uQTTvfKVQHb86+dPBCAzm7R6KWCXkuHetLW71Ut20dI+rSS6dO5M0KB94zpTqx73TyW0c3lwy82YKMiaRXE/7uyCJhaYy3wW9w5eaVCJM1YWJaWtuluqDAAAAAAAAA7MwggOvMIICl6ADAgECAhAIO+BWkEJGsaF1aslZkcdKMA0GCSqGSIb3DQEBBQUAMGExCzAJBgNVBAYTAlVTMRUwEwYDVQQKEwxEaWdpQ2VydCBJbmMxGTAXBgNVBAsTEHd3dy5kaWdpY2VydC5jb20xIDAeBgNVBAMTF0RpZ2lDZXJ0IEdsb2JhbCBSb290IENBMB4XDTA2MTExMDAwMDAwMFoXDTMxMTExMDAwMDAwMFowYTELMAkGA1UEBhMCVVMxFTATBgNVBAoTDERpZ2lDZXJ0IEluYzEZMBcGA1UECxMQd3d3LmRpZ2ljZXJ0LmNvbTEgMB4GA1UEAxMXRGlnaUNlcnQgR2xvYmFsIFJvb3QgQ0EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDiO+ERct6opNOjV6pQoo8Ld5DJoqXuEs6WWwEJIMwBk6dOMLdT90PEaQBXneKNIt2HBkAAgQnOzhuDv9/NO3FG4tZmxwWzdicWj3ueHpV97rdIowja1q96DDkGZX9KXR+8F/irvu4o13R/eniZWYVoblwjMku/TsDoWm3jcL93EL/8AfaF2ahEEFgyqXUY1dGivkfiJ2r0mjP4SQhgi9RftDqEv6GqSkx9Ps9PX2x2XqBLN5Ge3CLmbc4UGo5qy/7NsxRkF8dbKZ4yv/Lu+tMLQtSrt0Ey2gzU7/iB1buNWD+1G+hJKKJw2jEE3feyFvJMCk4HqO1KPV61f6OQw68nAgMBAAGjYzBhMA4GA1UdDwEB/wQEAwIBhjAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBQD3lA1VtFMu2bwo+IbG8OXsj3RVTAfBgNVHSMEGDAWgBQD3lA1VtFMu2bwo+IbG8OXsj3RVTANBgkqhkiG9w0BAQUFAAOCAQEAy5w3qkgTEgr63UScT1Kw9N+uBPV5eQijJBj8SyuEwC251cf+9MEfWMu4bZx6dOeYKasRteNwoKHNTIiZk4yRcOKrDxy+k6n/Y9XkB2DTo7+dWwnx1Y7jU/SOY/o/p9u0Zt9iZtbRbkGN8i216ndKn51Y4itZwEAj7S0ogkU+eVSSJpjggEioN+/w1nlgFt6s6A7NbqxEFzgvSdrhRT4quTZTzzpQBvcu6MRXSWxhIRjVBK14PCw6gGun668VFOnYicG5OGzikWyK/2S5dyVXMMAbJKPh3OnfR3y1tCQIBTDsLb0Lv0W/ULmp8+uYARKtyIjGmDRfjQo8xunVlZVt3gAAAA== request-method GET request-Origin https://accounts.firefox.com response-head HTTP/2.0 200 OK
content-type: application/javascript
content-length: 596822
access-control-allow-origin: *
access-control-allow-methods: HEAD, GET
last-modified: Tue, 17 Dec 2019 03:42:11 GMT
x-amz-version-id: 5AqRfiy2uWaxvwwsH5WRb8kzaIjJKYMu
accept-ranges: bytes
server: AmazonS3
date: Sun, 22 Dec 2019 04:16:09 GMT
etag: "4686ec55e958ad8985515ce0b2878921"
cache-control: public, max-age=86400
vary: Origin
x-cache: Hit from cloudfront
via: 1.1 263d97c176fc51d1d08116820c013de4.cloudfront.net (CloudFront)
x-amz-cf-pop: IAD89-C1
x-amz-cf-id: uWEwA3CYl_L2CAlG0WGukEmLQoQ-2BVr3F699Usu-LZbHauhQN3C6Q==
age: 61257
X-Firefox-Spdy: h2
 original-response-headers content-type: application/javascript
content-length: 596822
access-control-allow-origin: *
access-control-allow-methods: HEAD, GET
last-modified: Tue, 17 Dec 2019 03:42:11 GMT
x-amz-version-id: 5AqRfiy2uWaxvwwsH5WRb8kzaIjJKYMu
accept-ranges: bytes
server: AmazonS3
date: Sun, 22 Dec 2019 04:16:09 GMT
etag: "4686ec55e958ad8985515ce0b2878921"
cache-control: public, max-age=86400
vary: Origin
x-cache: Hit from cloudfront
via: 1.1 263d97c176fc51d1d08116820c013de4.cloudfront.net (CloudFront)
x-amz-cf-pop: IAD89-C1
x-amz-cf-id: uWEwA3CYl_L2CAlG0WGukEmLQoQ-2BVr3F699Usu-LZbHauhQN3C6Q==
age: 61257
X-Firefox-Spdy: h2
 ctid 2 eTLD1Access 1;0;3359502194, uncompressed-len 0 net-response-time-onstart 549 net-response-time-onstop 977  	V